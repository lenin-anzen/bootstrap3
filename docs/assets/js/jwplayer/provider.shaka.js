webpackJsonpjwplayer([2], { 12(t, e, i) {
  let n,
    r; n = [i(1), i(14), i(2), i(19), i(18)], r = function (t, e, i, n, r) {
    function s(e) {
      if (this._currentTextTrackIndex = -1, e) {
        if (this._textTracks ? (this._textTracks = t.reject(this._textTracks, function (t) { if (this.renderNatively && t._id === 'nativecaptions') return delete this._tracksById[t._id], !0; }, this), delete this._tracksById.nativemetadata) : this._initTextTracks(), e.length) {
          let n = 0,
            s = e.length; for (n; n < s; n++) {
            const a = e[n]; if (!a._id) { if (a.kind === 'captions' || a.kind === 'metadata') { if (a._id = `native${a.kind}`, !a.label && a.kind === 'captions') { const o = r.createLabel(a, this._unknownCount); a.name = o.label, this._unknownCount = o.unknownCount; } } else a._id = r.createId(a, this._textTracks.length); if (this._tracksById[a._id]) continue; a.inuse = !0; } if (a.inuse && !this._tracksById[a._id]) {
              if (a.kind === 'metadata')a.mode = 'hidden', a.oncuechange = P.bind(this), this._tracksById[a._id] = a; else if (S(a.kind)) {
                var h,
                  u = a.mode; if (a.mode = 'hidden', !a.cues.length && a.embedded) continue; if (a.mode = u, this._cuesByTrackId[a._id] && !this._cuesByTrackId[a._id].loaded) { for (let c = this._cuesByTrackId[a._id].cues; h = c.shift();)k(a, h); a.mode = u, this._cuesByTrackId[a._id].loaded = !0; }x.call(this, a);
              }
            }
          }
        } this.renderNatively && (this.textTrackChangeHandler = this.textTrackChangeHandler || g.bind(this), this.addTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler), (i.isEdge() || i.isFF()) && (this.addTrackHandler = this.addTrackHandler || v.bind(this), this.addTracksListener(this.video.textTracks, 'addtrack', this.addTrackHandler))), this._textTracks.length && this.trigger('subtitlesTracks', { tracks: this._textTracks });
      }
    } function a(t) { if (this.renderNatively) { const e = t === this._itemTracks; e || n.cancelXhr(this._itemTracks), this._itemTracks = t, t && (e || (this.disableTextTrack(), A.call(this), this.addTextTracks(t))); } } function o() { return this._currentTextTrackIndex; } function h(e) { this._textTracks && (e === 0 && t.each(this._textTracks, (t) => { t.mode = t.embedded ? 'hidden' : 'disabled'; }), this._currentTextTrackIndex !== e - 1 && (this.disableTextTrack(), this._currentTextTrackIndex = e - 1, this.renderNatively && (this._textTracks[this._currentTextTrackIndex] && (this._textTracks[this._currentTextTrackIndex].mode = 'showing'), this.trigger('subtitlesTrackChanged', { currentTrack: this._currentTextTrackIndex + 1, tracks: this._textTracks })))); } function u(t) {
      if (t.text && t.begin && t.end) {
        let e = t.trackid.toString(),
          i = this._tracksById && this._tracksById[e]; i || (i = { kind: 'captions', _id: e, data: [] }, this.addTextTracks([i]), this.trigger('subtitlesTracks', { tracks: this._textTracks })); let r; t.useDTS && (i.source || (i.source = t.source || 'mpegts')), r = `${t.begin}_${t.text}`; let s = this._metaCuesByTextTime[r]; if (!s) { s = { begin: t.begin, end: t.end, text: t.text }, this._metaCuesByTextTime[r] = s; const a = n.convertToVTTCues([s])[0]; i.data.push(a); }
      }
    } function c(t) {
      this._tracksById || this._initTextTracks(); let e = `native${t.type}`,
        i = this._tracksById[e],
        n = t.type === 'captions' ? 'Unknown CC' : 'ID3 Metadata',
        r = t.cue; if (!i) { const s = { kind: t.type, _id: e, label: n, embedded: !0 }; i = I.call(this, s), this.renderNatively || i.kind === 'metadata' ? this.setTextTracks(this.video.textTracks) : y.call(this, [i]); }C.call(this, i, r) && (this.renderNatively || i.kind === 'metadata' ? k(i, r) : i.data.push(r));
    } function l(t) {
      const e = this._tracksById[t.name]; if (e) {
        e.source = t.source; for (var i = t.captions || [], r = [], s = !1, a = 0; a < i.length; a++) {
          let o = i[a],
            h = `${t.name}_${o.begin}_${o.end}`; this._metaCuesByTextTime[h] || (this._metaCuesByTextTime[h] = o, r.push(o), s = !0);
        }s && r.sort((t, e) => t.begin - e.begin); const u = n.convertToVTTCues(r); Array.prototype.push.apply(e.data, u);
      }
    } function d(t, e, i) { t && (f(t, e, i), this.instreamMode || (t.addEventListener ? t.addEventListener(e, i) : t[`on${e}`] = i)); } function f(t, e, i) { t && (t.removeEventListener ? t.removeEventListener(e, i) : t[`on${e}`] = null); } function p() { n.cancelXhr(this._itemTracks); const t = this._tracksById && this._tracksById.nativemetadata; (this.renderNatively || t) && (E.call(this, this.video.textTracks), t && (t.oncuechange = null)), this._itemTracks = null, this._textTracks = null, this._tracksById = null, this._cuesByTrackId = null, this._metaCuesByTextTime = null, this._unknownCount = 0, this._activeCuePosition = null, this.renderNatively && (this.removeTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler), E.call(this, this.video.textTracks)); } function m() { if (this._textTracks) { const t = this._textTracks[this._currentTextTrackIndex]; t && (t.mode = t.embedded || t._id === 'nativecaptions' ? 'hidden' : 'disabled'); } } function b() { if (this._textTracks) { const t = this._textTracks[this._currentTextTrackIndex]; t && (t.mode = 'showing'); } } function g() {
      let e = this.video.textTracks,
        i = t.filter(e, t => (t.inuse || !t._id) && S(t.kind)); if (!this._textTracks || N.call(this, i)) return void this.setTextTracks(e); let n = -1,
        r = 0; for (r; r < this._textTracks.length; r++) if (this._textTracks[r].mode === 'showing') { n = r; break; }n !== this._currentTextTrackIndex && this.setSubtitlesTrack(n + 1);
    } function v() { this.setTextTracks(this.video.textTracks); } function y(t) { if (t) { this._textTracks || this._initTextTracks(); for (let e = 0; e < t.length; e++) { const i = t[e]; if (!i.kind || S(i.kind)) { const r = I.call(this, i); x.call(this, r), i.file && (i.data = [], n.loadFile(i, this.addVTTCuesToTrack.bind(this, r), M)); } }!this.renderNatively && this._textTracks && this._textTracks.length && this.trigger('subtitlesTracks', { tracks: this._textTracks }); } } function T(t, e) { if (this.renderNatively) { const i = this._tracksById[t._id]; if (!i) return this._cuesByTrackId || (this._cuesByTrackId = {}), void (this._cuesByTrackId[t._id] = { cues: e, loaded: !1 }); if (!this._cuesByTrackId[t._id] || !this._cuesByTrackId[t._id].loaded) { let n; for (this._cuesByTrackId[t._id] = { cues: e, loaded: !0 }; n = e.shift();)k(i, n); } } } function w() { const t = this.video.textTracks; t && E(t, !0); } function k(t, e) { if (!i.isEdge() || !window.TextTrackCue) return void t.addCue(e); const n = new window.TextTrackCue(e.startTime, e.endTime, e.text); t.addCue(n); } function E(e, i) { e.length && t.each(e, (t) => { t.mode = 'disabled', t.mode = 'hidden'; for (let e = t.cues.length; e--;)t.removeCue(t.cues[e]); t.embedded || (t.mode = 'disabled'), i || (t.inuse = !1); }); } function S(t) { return t === 'subtitles' || t === 'captions'; } function _() { this._textTracks = [], this._tracksById = {}, this._metaCuesByTextTime = {}, this._cuesByTrackId = {}, this._cachedVTTCues = {}, this._unknownCount = 0; } function I(e) {
      let i,
        n = r.createLabel(e, this._unknownCount),
        s = n.label; if (this._unknownCount = n.unknownCount, this.renderNatively || e.kind === 'metadata') { const a = this.video.textTracks; i = t.findWhere(a, { label: s }), i ? (i.kind = e.kind, i.language = e.language || '') : i = this.video.addTextTrack(e.kind, s, e.language || ''), i.default = e.default, i.mode = 'disabled', i.inuse = !0; } else i = e, i.data = i.data || []; return i._id || (i._id = r.createId(e, this._textTracks.length)), i;
    } function x(t) { this._textTracks.push(t), this._tracksById[t._id] = t; } function A() { if (this._textTracks) { const e = t.filter(this._textTracks, t => t.embedded || t.groupid === 'subs'); this._initTextTracks(), t.each(e, function (t) { this._tracksById[t._id] = t; }), this._textTracks = e; } } function P(i) { const n = i.currentTarget.activeCues; if (n && n.length) { const r = n[n.length - 1].startTime; if (this._activeCuePosition !== r) { const s = []; if (t.each(n, function (t) { t.startTime < r || (t.data || t.value ? s.push(t) : t.text && this.trigger('meta', { metadataTime: r, metadata: JSON.parse(t.text) })); }, this), s.length) { const a = e.parseID3(s); this.trigger('meta', { metadataTime: r, metadata: a }); } this._activeCuePosition = r; } } } function C(t, e) {
      const i = t.kind; this._cachedVTTCues[t._id] || (this._cachedVTTCues[t._id] = {}); let n,
        r = this._cachedVTTCues[t._id]; switch (i) {
        case 'captions':n = Math.floor(20 * e.startTime); var s = Math.floor(20 * e.endTime),
          a = r[n] || r[n + 1] || r[n - 1]; return !(a && Math.abs(a - s) <= 1) && (r[n] = s, !0); case 'metadata':var o = e.data ? new Uint8Array(e.data).join('') : e.text; return n = e.startTime + o, !r[n] && (r[n] = e.endTime, !0);
      }
    } function N(t) { if (t.length > this._textTracks.length) return !0; for (let e = 0; e < t.length; e++) { const i = t[e]; if (!i._id || !this._tracksById[i._id]) return !0; } return !1; } function M(t) { i.log(`CAPTIONS(${t})`); } const R = { _itemTracks: null, _textTracks: null, _tracksById: null, _cuesByTrackId: null, _cachedVTTCues: null, _metaCuesByTextTime: null, _currentTextTrackIndex: -1, _unknownCount: 0, _activeCuePosition: null, _initTextTracks: _, addTracksListener: d, clearCues: w, clearTracks: p, disableTextTrack: m, enableTextTrack: b, getSubtitlesTrack: o, removeTracksListener: f, addTextTracks: y, setTextTracks: s, setupSideloadedTracks: a, setSubtitlesTrack: h, textTrackChangeHandler: null, addTrackHandler: null, addCuesToTrack: l, addCaptionsCue: u, addVTTCue: c, addVTTCuesToTrack: T, renderNatively: !1 }; return R;
  }.apply(e, n), !(void 0 !== r && (t.exports = r));
},
40(t, e, i) {
  let n,
    r; n = [i(2)], r = function (t) {
    return { container: null,
      volume(e) { e = t.between(e / 100, 0, 1), this.video.volume = e; },
      mute(t) { this.video.muted = !!t, this.video.muted || this.video.removeAttribute('muted'); },
      resize(e, i, n) {
        if (!(e && i && this.video.videoWidth && this.video.videoHeight)) return !1; if (n === 'uniform') {
          let r = e / i,
            s = this.video.videoWidth / this.video.videoHeight,
            a = null; Math.abs(r - s) < 0.09 && (a = 'fill'), t.style(this.video, { objectFit: a });
        } return !1;
      },
      getContainer() { return this.container; },
      setContainer(t) { this.container = t, t.appendChild(this.video); },
      remove() { this.stop(), this.destroy(), this.container === this.video.parentNode && this.container.removeChild(this.video); },
      getVideo(e, i) {
        let n = i || document.getElementById(e),
          r = n ? n.querySelector('video') : null; return r || (r = document.createElement('video'), t.isMobile() && r.setAttribute('jw-gesture-required', '')), r.className = 'jw-video jw-reset', this.video = r, r;
      } };
  }.apply(e, n), !(void 0 !== r && (t.exports = r));
},
41(t, e, i) {
  let n,
    r; n = [i(4), i(13), i(5)], r = function (t, e, i) { const n = 256; return { attached: !0, beforeComplete: !1, stallCheckTimeout_: -1, lastStalledTime_: NaN, trigger(e, i) { if (this.attached) return t.trigger.call(this, e, i); }, setState(t) { return e.setState.call(this, t); }, checkComplete() { return this.beforeComplete; }, playbackComplete_() { this.stopStallCheck(), this.setState(i.COMPLETE), this.beforeComplete = !1, this.trigger('complete'); }, attachMedia() { this.attached = !0, this.eventsOn_(), this.beforeComplete && this.playbackComplete_(); }, detachMedia() { return this.stopStallCheck(), this.attached = !1, this.eventsOff_(), this.video; }, stopStallCheck() { clearTimeout(this.stallCheckTimeout_); }, startStallCheck() { this.stopStallCheck(), this.stallCheckTimeout_ = setTimeout(this.stalledHandler.bind(this), n); }, stalledHandler() { return this.lastStalledTime_ !== this.video.currentTime ? void (this.lastStalledTime_ = this.video.currentTime) : void (this.video.paused || this.video.ended || this.state !== i.LOADING && this.state !== i.ERROR && (this.seeking || this.setState(i.STALLED))); }, setAutoplayAttributes() { this.video.setAttribute('autoplay', ''), this.video.setAttribute('muted', ''); }, removeAutoplayAttributes() { this.video.removeAttribute('autoplay'), this.video.removeAttribute('muted'); } }; }.apply(e, n), !(void 0 !== r && (t.exports = r));
},
42(t, e, i) {
  let n,
    r; n = [i(2), i(5)], r = function (t, e) {
    return { seeking: !1,
      loadedmetadata() {
        let t = { duration: this.getDuration(), height: this.video.videoHeight, width: this.video.videoWidth },
          e = this.drmUsed; e && (t.drm = e), this.trigger('meta', t);
      },
      timeupdate() {
        this.stopStallCheck(); const t = this.video.videoHeight; t !== this._helperLastVideoHeight && this.adaptation && this.adaptation({ size: { width: this.video.videoWidth, height: t } }), this._helperLastVideoHeight = t, this.state === e.STALLED && this.setState(e.PLAYING), this.startStallCheck(); let i = this.getCurrentTime(),
          n = { position: i, duration: this.getDuration() }; if (this.getPtsOffset) { const r = this.getPtsOffset(); r >= 0 && (n.metadata = { mpegts: r + i }); }(this.state === e.PLAYING || this.seeking) && this.trigger('time', n);
      },
      click(t) { this.trigger('click', t); },
      volumechange() { const t = this.video; this.trigger('volume', { volume: Math.round(100 * t.volume) }), this.trigger('mute', { mute: t.muted }); },
      seeked() { this.seeking && (this.seeking = !1, this.trigger('seeked')); },
      playing() { this.setState(e.PLAYING), this.video.hasAttribute('jw-gesture-required') && this.video.removeAttribute('jw-gesture-required'); },
      pause() { this.state !== e.COMPLETE && (this.video.ended || this.video.currentTime !== this.video.duration && this.setState(e.PAUSED)); },
      progress() { const e = this.getDuration(); if (!(e <= 0 || e === 1 / 0)) { const i = this.video.buffered; if (i && i.length !== 0) { const n = t.between(i.end(i.length - 1) / e, 0, 1); this.trigger('bufferChange', { bufferPercent: 100 * n, position: this.getCurrentTime(), duration: e }); } } },
      ended() { if (this.stopStallCheck(), this._helperLastVideoHeight = 0, this.state !== e.IDLE && this.state !== e.COMPLETE) { if (this.beforeComplete = !0, this.attached = !0, this.trigger('beforeComplete'), !this.attached) return; this.playbackComplete_(); } },
      loadeddata() { this.setTextTracks(this.video.textTracks), this.video.setAttribute('jw-loaded', 'data'); },
      error() {
        let t = this.video.error && this.video.error.code || -1,
          e = { 1: 'Unknown operation aborted', 2: 'Unknown network error', 3: 'Unknown decode error', 4: 'Source not supported' }[t] || 'Unknown'; this.trigger('mediaError', { code: t, message: `Error playing file: ${e}` });
      } };
  }.apply(e, n), !(void 0 !== r && (t.exports = r));
},
72(t, e, i) {
  let n,
    r; n = [i(1), i(23), i(2), i(5), i(3), i(4), i(42), i(40), i(41), i(12), i(37), i(160)], r = function (t, e, i, n, r, s, a, o, h, u, c, l) {
    function d(d) {
      function f() { j.addEventListener('error', y), j.addEventListener('trackschanged', A), t.each(F, (t, e) => { V.addEventListener(e, t, !1); }); } function p(t) { return t ? t.height ? `${t.height}p` : `${Math.round(t.bandwidth / 1e3)}kbps` : ''; } function m(t, e, i) { for (var n = { index: 0, track: null }, r = e.length; r--;) for (let s = e[r].id, a = i.length; a--;) { const o = i[a]; if (s === o.id && o.height === t) return n.index = a + 1, n.track = o, n; } return n; } function b() { j.removeEventListener('error', y), j.removeEventListener('trackschanged', A), t.each(F, (t, e) => { V.removeEventListener(e, t); }); } function g() { const t = V; b(), j.destroy(), K.video = V = t; } function v(t, e) {
        let i = t.headers,
          n = t.customData; if (i) for (let r = 0; r < i.length; r++) { const s = i[r]; e.headers[s.name] = s.value; }t.withCredentials && (e.allowCrossSiteCredentials = !0), n && (e.headers.customData = n);
      } function y() { K.attached && (O(), K.trigger(r.JWPLAYER_MEDIA_ERROR, { message: 'Error playing file: Unknown playback error' })); } function T() { return K.levels; } function w() { return K.currentQuality; } function k(t) { return K._helperLastVideoHeight = 0, new l.Player(t); } function E(t) { K.attached && (j || (j = k(V)), (i.isAndroid() || t.preload && t.preload !== 'none') && (b(), f(), I(t))); } function S(t) { K.attached && (b(), f(), K.setState(n.LOADING), K.loadedItem !== t ? (K.drmUsed = null, I(t)) : (V.currentTime = 0, _())); } function _() { const t = V.play(); t && t.catch ? t.catch((t) => { console.warn(t), t.name === 'NotAllowedError' && V.hasAttribute('jw-gesture-required') && K.trigger('autoplayFailed'); }) : V.hasAttribute('jw-gesture-required') && K.trigger('autoplayFailed'); } function I(t) {
        let e = t.sources[0].file,
          i = t.starttime || 0; B = !0, U = t.sources[0].drm || {}, K.loadedItem = t, K.setupSideloadedTracks(t.tracks), j.configure({ drm: P() }), j.load(e, i).then(x).catch(y);
      } function x() { K.attached && K.trigger(r.JWPLAYER_MEDIA_BUFFER_FULL); } function A() { const e = {}; if (V.textTracks && V.textTracks[0].label === 'Shaka Player TextTrack' && (V.textTracks[0].embedded = !0), K.attached) { t.each(j.getTracks(), (t) => { e[t.type] = e[t.type] || [], e[t.type].push(t); }); let i = 'video'; e.video && e.video.length > 0 ? C(e.video) : (i = 'audio', C(e.audio)), K.trigger(r.JWPLAYER_MEDIA_TYPE, { mediaType: i }); } } function P() {
        let t,
          e,
          i = {},
          n = ''; if (c.isSupported('clearkey') && U.clearkey) return e = U.clearkey, e.keyId = e.keyId ? e.keyId.replace(/-/g, '') : null, i.clearKeys = {}, i.clearKeys[e.keyId] = e.key, i; if (c.isSupported('widevine'))K.drmUsed = 'widevine', t = 'com.widevine.alpha', n = 'http://widevine-proxy.appspot.com/proxy'; else { if (!c.isSupported('playready')) return i; K.drmUsed = 'playready', t = 'com.microsoft.playready', n = 'http://microsoft-proxy.appspot.com/proxy'; } return (e = U[K.drmUsed]) ? (i.servers = i.servers || {}, i.servers[t] = e.url || n, j.getNetworkingEngine().registerRequestFilter((t, i) => { t === l.net.NetworkingEngine.RequestType.LICENSE && e && v(e, i); }), i) : i;
      } function C(e, i) { e.sort((t, e) => (t.height && e.height ? e.height - t.height : e.bandwidth - t.bandwidth)), K.currentQuality = 0, K.playerTracks = e, K.levels = t.map(e, t => ({ contentType: i, label: p(t), level_id: t.id })), e.length > 1 && K.levels.unshift({ label: 'Auto', level_id: 'auto' }), K.trigger(r.JWPLAYER_MEDIA_LEVELS, { levels: K.levels, currentQuality: K.currentQuality }); } function N() { V.pause(), K.setState(n.PAUSED); } function M() { return K.seeking ? (K.setState(n.LOADING), void K.once(r.JWPLAYER_MEDIA_SEEKED, K.play)) : (K.setState(n.LOADING), _(), void K.setVisibility(K)); } function R(t) { K.attached && (t < 0 && (t += V.duration), K.trigger(r.JWPLAYER_MEDIA_SEEK, { position: K.getCurrentTime(), offset: t }), K.seeking = !0, V.currentTime = t); } function D(t) { t = !!t, t ? e.style(this.container, { visibility: 'visible', opacity: 1 }) : e.style(this.container, { visibility: '', opacity: 0 }); } function O() { K.attached && (b(), K.clearTracks(), V.pause(), K.setState(n.IDLE)); } function L(t) { K.currentQuality === t || t < 0 || t >= K.levels.length || (K.currentQuality = t, j.configure({ abr: { enabled: t === 0 } }), t > 0 && j.selectTrack(K.playerTracks[t - 1]), _(), K.trigger(r.JWPLAYER_MEDIA_LEVEL_CHANGED, { currentQuality: K.currentQuality, levels: K.levels })); } var j,
        U,
        B,
        F = {},
        K = this,
        V = o.getVideo.call(K, d); this.loadedItem = null, this.drmUsed = null, this.position = 0, this.levels = [], this.currentQuality = -1, t.each(a, (t, e) => { typeof t === 'function' ? F[e] = t.bind(K) : K[e] = t; }), K.adaptation = function (t) {
        K.playerTracks || A(); let e = j.getStats(),
          i = m(t.size.height, e.switchHistory, K.playerTracks),
          n = { level: { index: i.index, label: p(i.track), bitrate: e.streamBandwidth, width: t.size.width, height: t.size.height }, bandwidth: e.estimatedBandwidth, type: 'visualQuality' }; B ? (n.reason = 'initial choice', n.mode = 'auto', B = !1) : K.currentQuality === 0 ? n.reason = n.mode = 'auto' : (n.reason = 'api', n.mode = 'manual'), K.trigger('visualQuality', n), K.trigger('providerFirstFrame', {});
      }, t.extend(K, s, o, h, u, { eventsOn_() { j = k(V), f(); }, eventsOff_() { U && i.isFF() ? (K.remove(), V = K.getVideo(d, K.container), K.setContainer(K.container)) : g(); }, init: E, load: S, pause: N, getQualityLevels: T, getCurrentQuality: w, play: M, seek: R, setCurrentQuality: L, setVisibility: D, stop: O, getCurrentTime() { return V.currentTime; }, getDuration() { return j.isLive() ? 1 / 0 : V.duration; }, supportsFullscreen: t.constant(!0), getName: t.constant({ name: 'shaka' }), destroy: g, renderNatively: i.isChrome() || i.isIOS() || i.isSafari() || i.isEdge() });
    } return l.polyfill.installAll(), d.getName = t.constant({ name: 'shaka' }), d;
  }.apply(e, n), !(void 0 !== r && (t.exports = r));
},
160(t, e, i) {
  let n; !(function () {
    const r = {}; (function (t) {
      function e(t, e) {
        let i = t.split('.'),
          n = Lr; i[0] in n || !n.execScript || n.execScript(`var ${i[0]}`); for (var r; i.length && (r = i.shift());)i.length || void 0 === e ? n = n[r] ? n[r] : n[r] = {} : n[r] = e;
      } function i(t) { function e() {} const i = _e; e.prototype = i.prototype, t.jd = i.prototype, t.prototype = new e(), t.prototype.constructor = t, t.cd = function (t, e, n) { return i.prototype[e].apply(t, Array.prototype.slice.call(arguments, 2)); }; } function n(t) { this.c = Math.exp(Math.log(0.5) / t), this.a = this.b = 0; } function r(t, e, i) { const n = Math.pow(t.c, e); t.b = i * (1 - n) + n * t.b, t.a += e; } function s(t) { return t.b / (1 - Math.pow(t.c, t.a)); } function a() { this.a = new n(3), this.c = new n(10), this.b = 5e5; } function o(t) { return t.a.a < 0.5 ? t.b : Math.min(s(t.a), s(t.c)); } function h() {} function u() {} function c() { this.h = null, this.f = !1, this.c = new a(), this.g = {}, this.a = {}, this.i = !1, this.b = null; } function l(t) { return (t = t.g.audio) ? (t = f(t), t[Math.floor(t.length / 2)]) : null; } function d(t) {
        var e = t.g.video; if (!e) return null; var e = f(e),
          i = t.a.audio,
          i = i && i.bandwidth || 0; t = o(t.c); for (var n = e[0], r = 0; r < e.length; ++r) {
          let s = e[r],
            a = r + 1 < e.length ? e[r + 1] : { bandwidth: 1 / 0 }; s.bandwidth && (a = (a.bandwidth + i) / 0.85, t >= (s.bandwidth + i) / 0.95 && t <= a && (n = s));
        } return n;
      } function f(t) { return t.streams.slice(0).filter(t => t.allowedByApplication && t.allowedByKeySystem).sort((t, e) => t.bandwidth - e.bandwidth); } function p(t) { let e; t instanceof p ? (m(this, t.R), this.la = t.la, this.T = t.T, b(this, t.wa), this.O = t.O, g(this, k(t.a)), this.ea = t.ea) : t && (e = String(t).match(jr)) ? (m(this, e[1] || '', !0), this.la = v(e[2] || ''), this.T = v(e[3] || '', !0), b(this, e[4]), this.O = v(e[5] || '', !0), g(this, e[6] || '', !0), this.ea = v(e[7] || '')) : this.a = new w(null); } function m(t, e, i) { t.R = i ? v(e, !0) : e, t.R && (t.R = t.R.replace(/:$/, '')); } function b(t, e) { if (e) { if (e = Number(e), isNaN(e) || e < 0) throw Error(`Bad port number ${e}`); t.wa = e; } else t.wa = null; } function g(t, e, i) { e instanceof w ? t.a = e : (i || (e = y(e, Kr)), t.a = new w(e)); } function v(t, e) { return t ? e ? decodeURI(t) : decodeURIComponent(t) : ''; } function y(t, e, i) { return typeof t === 'string' ? (t = encodeURI(t).replace(e, T), i && (t = t.replace(/%25([0-9a-fA-F]{2})/g, '%$1')), t) : null; } function T(t) { return t = t.charCodeAt(0), `%${(t >> 4 & 15).toString(16)}${(15 & t).toString(16)}`; } function w(t) { this.b = t || null; } function k(t) {
        const e = new w(); if (e.b = t.b, t.a) {
          let i,
            n = {}; for (i in t.a)n[i] = t.a[i].concat(); e.a = n, e.c = t.c;
        } return e;
      } function E(t, e, i) { this.category = t, this.code = e, this.data = Array.prototype.slice.call(arguments, 2); } function S(t, e) { return t.reduce(((t, e, i) => e.catch(t.bind(null, i))).bind(null, e), Promise.reject()); } function _(t, e) { return t.concat(e); } function I() {} function x(t) { return t != null; } function A(t) { return function (e) { return e != t; }; } function P() {
        let t,
          e,
          i = new Promise(((i, n) => { t = i, e = n; })); return i.resolve = t, i.reject = e, i;
      } function C(t) { this.f = !1, this.a = [], this.b = [], this.c = [], this.h = t || null; } function N() { return { maxAttempts: 2, baseDelay: 1e3, backoffFactor: 2, fuzzFactor: 0.5, timeout: 0 }; } function M(t, e) { return { uris: t, method: 'GET', body: null, headers: {}, allowCrossSiteCredentials: !1, retryParameters: e }; } function R(t, e, i) { for (let n = 0; n < t.length; ++n) if (i(t[n], e)) return n; return -1; } function D() { this.a = {}; } function O() { this.a = new D(); } function L(t, e, i, n) { e = new U(e, i, n), t.a.push(i, e); } function j(t) {
        let e,
          i = t.a,
          n = []; for (e in i.a)n.push(...i.a[e]); for (i = 0; i < n.length; ++i)n[i].ka(); t.a.clear();
      } function U(t, e, i) { this.target = t, this.type = e, this.a = i, this.target.addEventListener(e, i, !1); } function B(t) { return !t || !Object.keys(t).length; } function F(t) { return Object.keys(t).map(e => t[e]); } function K(t, e) { return Object.keys(t).reduce((i, n) => i[n] = e(t[n], n), i, {}); } function V(t, e) { return Object.keys(t).every(i => e(i, t[i])); } function H(t) { if (!t) return ''; t = new Uint8Array(t), t[0] == 239 && t[1] == 187 && t[2] == 191 && (t = t.subarray(3)), t = escape(W(t)); try { return decodeURIComponent(t); } catch (e) { throw new E(2, 2004); } } function q(t, e) {
        if (!t) return ''; if (t.byteLength % 2) throw new E(2, 2004); let i; if (t instanceof ArrayBuffer)i = t; else { var n = new Uint8Array(t.byteLength); n.set(new Uint8Array(t)), i = n.buffer; } var n = t.byteLength / 2,
          r = new Uint16Array(n); i = new DataView(i); for (let s = 0; s < n; s++)r[s] = i.getUint16(2 * s, e); return W(r);
      } function G(t) { const e = new Uint8Array(t); if (e[0] == 239 && e[1] == 187 && e[2] == 191) return H(e); if (e[0] == 254 && e[1] == 255) return q(e.subarray(2), !1); if (e[0] == 255 && e[1] == 254) return q(e.subarray(2), !0); const i = function (t, e) { return t.byteLength <= e || t[e] >= 32 && t[e] <= 126; }.bind(null, e); if (!e[0] && !e[2]) return q(t, !1); if (!e[1] && !e[3]) return q(t, !0); if (i(0) && i(1) && i(2) && i(3)) return H(t); throw new E(2, 2003); } function z(t) { t = unescape(encodeURIComponent(t)); for (var e = new Uint8Array(t.length), i = 0; i < t.length; ++i)e[i] = t.charCodeAt(i); return e.buffer; } function W(t) { for (var e = '', i = 0; i < t.length; i += 16e3)e += String.fromCharCode.apply(null, t.subarray(i, i + 16e3)); return e; } function Y(t) { this.a = null, this.b = function () { this.a = null, t(); }.bind(this); } function $(t) { t.a != null && (clearTimeout(t.a), t.a = null); } function J(t) { $(t), t.a = setTimeout(t.b, 100); } function X(e) { return t.btoa(String.fromCharCode.apply(null, e)).replace(/\+/g, '-').replace(/\//g, '_').replace(/=*$/, ''); } function Q(e) { e = t.atob(e.replace(/-/g, '+').replace(/_/g, '/')); for (var i = new Uint8Array(e.length), n = 0; n < e.length; ++n)i[n] = e.charCodeAt(n); return i; } function Z(e) { for (var i = new Uint8Array(e.length / 2), n = 0; n < e.length; n += 2)i[n / 2] = t.parseInt(e.substr(n, 2), 16); return i; } function tt(t) { for (var e = '', i = 0; i < t.length; ++i) { let n = t[i].toString(16); n.length == 1 && (n = `0${n}`), e += n; } return e; } function et(t, e) { if (!t && !e) return !0; if (!t || !e || t.length != e.length) return !1; for (let i = 0; i < t.length; ++i) if (t[i] != e[i]) return !1; return !0; } function it(t, e, i) { this.l = this.h = this.m = null, this.A = !1, this.b = null, this.g = new O(), this.a = [], this.s = [], this.j = new P(), this.G = t, this.i = null, this.f = function (t) { this.j.reject(t), e(t); }.bind(this), this.w = {}, this.J = i, this.v = new Y(this.uc.bind(this)), this.C = this.c = !1, this.j.catch(() => {}); } function nt(t, e) {
        if (!t.h) return L(t.g, e, 'encrypted', function () { this.g.ka(e, 'encrypted'), this.f(new E(6, 6010)); }.bind(t)), Promise.resolve(); t.l = e; var i = t.l.setMediaKeys(t.h),
          i = i.catch(t => Promise.reject(new E(6, 6003, t.message))),
          n = null; return t.b.serverCertificate && (n = t.h.setServerCertificate(t.b.serverCertificate), n = n.catch(t => Promise.reject(new E(6, 6004, t.message)))), Promise.all([i, n]).then(function () { return this.c ? Promise.reject() : (st(this), void (this.b.initData.length || this.s.length || L(this.g, this.l, 'encrypted', this.bc.bind(this)))); }.bind(t)).catch(function (t) { return this.c ? Promise.resolve() : Promise.reject(t); }.bind(t));
      } function rt(t, e) { return Promise.all(e.map(function (t) { return ft(this, t).then((t) => { if (t) return t.remove(); }); }.bind(t))); } function st(t) { const e = t.b ? t.b.initData : []; return e.forEach(function (t) { pt(this, t.initDataType, t.initData); }.bind(t)), t.s.forEach(function (t) { ft(this, t); }.bind(t)), e.length || t.s.length || t.j.resolve(), t.j; } function at(t) { return t.a.map(t => t.ya.sessionId); } function ot(t, e, i, n, r) {
        let s = ct(t),
          a = navigator.userAgent.indexOf('Edge/') >= 0; e.periods.forEach(function (t) {
          t.streamSets.forEach((t) => {
            t.type != 'text' && (s && (t.drmInfos = [s]), t.drmInfos.forEach((e) => {
              ut(this, e); let s = n[e.keySystem]; s || (s = { audioCapabilities: [], videoCapabilities: [], distinctiveIdentifier: 'optional', persistentState: i ? 'required' : 'optional', sessionTypes: [i ? 'persistent-license' : 'temporary'], label: e.keySystem, drmInfos: [] }, n[e.keySystem] = s, r.push(e.keySystem)), s.drmInfos.push(e), e.distinctiveIdentifierRequired && (s.distinctiveIdentifier = 'required'), e.persistentStateRequired && (s.persistentState = 'required'); let o = t.type == 'video' ? s.videoCapabilities : s.audioCapabilities,
                h = (t.type == 'video' ? e.videoRobustness : e.audioRobustness) || ''; t.streams.forEach((t) => { let i = t.mimeType; t.codecs && (i += `; codecs="${t.codecs}"`), a && e.keySystem == 'com.microsoft.playready' && o.length || o.push({ robustness: h, contentType: i }); });
            }));
          });
        }.bind(t));
      } function ht(t, e, i) {
        if (i.length == 1 && i[0] == '') return Promise.reject(new E(6, 6e3)); let n = new P(),
          r = n; return [!0, !1].forEach(function (t) { i.forEach((i) => { const n = e[i]; n.drmInfos.some(t => !!t.licenseServerUri) == t && (n.audioCapabilities.length || delete n.audioCapabilities, n.videoCapabilities.length || delete n.videoCapabilities, r = r.catch(() => (this.c ? Promise.reject() : navigator.requestMediaKeySystemAccess(i, [n])))); }); }.bind(t)), r = r.catch(() => Promise.reject(new E(6, 6001))), r = r.then(function (t) { if (this.c) return Promise.reject(); let i = t.getConfiguration(); return this.m = (i.audioCapabilities || []).concat(i.videoCapabilities || []).map(t => t.contentType), this.m.length || (this.m = null), i = e[t.keySystem], lt(this, t.keySystem, i, i.drmInfos), this.b.licenseServerUri ? t.createMediaKeys() : Promise.reject(new E(6, 6012)); }.bind(t)).then(function (t) { return this.c ? Promise.reject() : (this.h = t, void (this.A = !0)); }.bind(t)).catch(function (t) { return this.c ? Promise.resolve() : (this.m = this.b = null, t instanceof E ? Promise.reject(t) : Promise.reject(new E(6, 6002, t.message))); }.bind(t)), n.reject(), r;
      } function ut(t, e) { let i = e.keySystem; if (i) { if (!e.licenseServerUri) { const n = t.i.servers[i]; n && (e.licenseServerUri = n); }(i = t.i.advanced[i]) && (e.distinctiveIdentifierRequired || (e.distinctiveIdentifierRequired = i.distinctiveIdentifierRequired), e.persistentStateRequired || (e.persistentStateRequired = i.persistentStateRequired), e.videoRobustness || (e.videoRobustness = i.videoRobustness), e.audioRobustness || (e.audioRobustness = i.audioRobustness), e.serverCertificate || (e.serverCertificate = i.serverCertificate)); } } function ct(e) {
        if (B(e.i.clearKeys)) return null; let i,
          n = [],
          r = []; for (i in e.i.clearKeys) {
          var s = e.i.clearKeys[i],
            a = Z(i),
            s = Z(s),
            a = { kty: 'oct', kid: X(a), k: X(s) }; n.push(a), r.push(a.kid);
        } return e = JSON.stringify({ keys: n }), r = JSON.stringify({ kids: r }), r = [{ initData: new Uint8Array(z(r)), initDataType: 'keyids' }], { keySystem: 'org.w3.clearkey', licenseServerUri: `data:application/json;base64,${t.btoa(e)}`, distinctiveIdentifierRequired: !1, persistentStateRequired: !1, audioRobustness: '', videoRobustness: '', serverCertificate: null, initData: r };
      } function lt(t, e, i, n) {
        let r = [],
          s = [],
          a = []; dt(n, r, s, a), t.b = { keySystem: e, licenseServerUri: r[0], distinctiveIdentifierRequired: i.distinctiveIdentifier == 'required', persistentStateRequired: i.persistentState == 'required', audioRobustness: i.audioCapabilities ? i.audioCapabilities[0].robustness : '', videoRobustness: i.videoCapabilities ? i.videoCapabilities[0].robustness : '', serverCertificate: s[0], initData: a };
      } function dt(t, e, i, n) { function r(t, e) { return t.initDataType == e.initDataType && et(t.initData, e.initData); }t.forEach((t) => { e.indexOf(t.licenseServerUri) == -1 && e.push(t.licenseServerUri), t.serverCertificate && R(i, t.serverCertificate, et) == -1 && i.push(t.serverCertificate), t.initData && t.initData.forEach((t) => { R(n, t, r) == -1 && n.push(t); }); }); } function ft(t, e) { let i; try { i = t.h.createSession('persistent-license'); } catch (n) { const r = new E(6, 6005, n.message); return t.f(r), Promise.reject(r); }L(t.g, i, 'message', t.vb.bind(t)), L(t.g, i, 'keystatuseschange', t.qb.bind(t)); const s = { initData: null, ya: i, loaded: !1 }; return t.a.push(s), i.load(e).then(function (t) { if (!this.c) { if (t) return s.loaded = !0, this.a.every(t => t.loaded) && this.j.resolve(), i; this.a.splice(this.a.indexOf(s), 1), this.f(new E(6, 6013)); } }.bind(t), function (t) { this.c || (this.a.splice(this.a.indexOf(s), 1), this.f(new E(6, 6005, t.message))); }.bind(t)); } function pt(t, e, i) { let n; try { n = t.C ? t.h.createSession('persistent-license') : t.h.createSession(); } catch (r) { return void t.f(new E(6, 6005, r.message)); }L(t.g, n, 'message', t.vb.bind(t)), L(t.g, n, 'keystatuseschange', t.qb.bind(t)), t.a.push({ initData: i, ya: n, loaded: !1 }), n.generateRequest(e, i.buffer).catch(function (t) { if (!this.c) { for (let e = 0; e < this.a.length; ++e) if (this.a[e].ya == n) { this.a.splice(e, 1); break; } this.f(new E(6, 6006, t.message)); } }.bind(t)); } function mt(t) { for (var e = q(t.body, !0), e = (new DOMParser()).parseFromString(e, 'application/xml'), i = e.getElementsByTagName('HttpHeader'), n = 0; n < i.length; ++n)t.headers[i[n].querySelector('name').textContent] = i[n].querySelector('value').textContent; t.body = Q(e.querySelector('Challenge').textContent).buffer; } function bt() {
        let t = [],
          e = [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }],
          i = [{ videoCapabilities: e, persistentState: 'required', sessionTypes: ['persistent-license'] }, { videoCapabilities: e }],
          n = {}; return 'org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime'.split(' ').forEach((e) => { const r = navigator.requestMediaKeySystemAccess(e, i).then(t => t.createMediaKeys()).then((t) => { let i = !1; try { t.createSession('persistent-license'), i = !0; } catch (r) {}n[e] = { persistentState: i }; }, () => { n[e] = null; }); t.push(r); }), Promise.all(t).then(() => n);
      } function gt() {
        let t,
          e = {}; for (t in qr)e[t] = !0; for (t in Gr)e[t] = !0; return ['application/dash+xml', 'application/x-mpegurl', 'application/vnd.apple.mpegurl', 'application/vnd.ms-sstr+xml'].forEach((t) => { e[t] = !!qr[t]; }), ['mpd', 'm3u8', 'ism'].forEach((t) => { e[t] = !!Gr[t]; }), e;
      } function vt(t, e, i, n) { let r = n; return r || (n = new p(t).O.split('/').pop().split('.'), n.length > 1 && (n = n.pop().toLowerCase(), r = Gr[n])), r ? Promise.resolve(r) : (i = M([t], i), i.method = 'HEAD', e.request(0, i).then(e => (e = e.headers['content-type']) && (e = e.toLowerCase()), (r = qr[e]) ? r : Promise.reject(new E(4, 4e3, t)), () => Promise.reject(new E(4, 4e3, t)))); } function yt(t, e) { this.g = zr[e], this.c = t, this.h = 0, this.f = 1 / 0, this.a = this.b = null; } function Tt(t, e, i) { return t >= e ? null : new Wr(t, e, i); } function wt(t, e, i, n) {
        const r = t.h; return Promise.resolve().then(function () {
          const t = this.g(e, r, i, n); if (i != null && n != null) {
            for (let s = 0; s < t.length && !(t[s].startTime >= this.f); ++s) this.c.addCue(t[s]); this.b == null && (this.b = i),
            this.a = Math.min(n, this.f);
          }
        }.bind(t));
      } function kt(t, e) { return t.a == null || t.a < e || e < t.b ? 0 : t.a - e; } function Et(t, e) { for (var i = t.c.cues, n = [], r = 0; r < i.length; ++r)e(i[r]) && n.push(i[r]); for (r = 0; r < n.length; ++r)t.c.removeCue(n[r]); } function St(t, e) { let i = 0; if (!t || t.length == 1 && t.end(0) - t.start(0) < 1e-6) return i; for (let n = !1, r = 0; r < t.length; ++r) if (e + 1e-4 >= t.start(r) && e < t.end(r))i += t.end(r) - e, n = !0; else if (n && t.start(r) - t.end(r - 1) <= 0.04)i += t.end(r) - t.start(r), i += t.start(r) - t.end(r - 1); else if (r > 0 && e + 1e-4 < t.start(r) && e + 1e-4 >= t.end(r - 1)) { if (!(t.start(r) - e <= 0.04)) break; i += t.end(r) - e, n = !0; } else n = !1; return i; } function _t(t, e, i) { this.i = t, this.f = e, this.j = i, this.c = {}, this.b = null, this.a = {}, this.g = new O(), this.h = !1; } function It() { const t = {}; return 'video/mp4; codecs="avc1.42E01E",audio/mp4; codecs="mp4a.40.2",video/webm; codecs="vp8",video/webm; codecs="vp9",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(',').forEach((e) => { t[e] = !!zr[e] || MediaSource.isTypeSupported(e); const i = e.split(';')[0]; t[i] = t[i] || t[e]; }), t; } function xt(t, e) { let i; return e == 'text' ? i = t.b.b : (i = Pt(t, e), i = !i || i.length == 1 && i.end(0) - i.start(0) < 1e-6 ? null : i.length ? i.start(0) : null), i; } function At(t, e, i) { return e == 'text' ? (e = kt(t.b, i), e || (e = kt(t.b, i + 0.1)) && (e += 0.1)) : (t = Pt(t, e), e = St(t, i), e || (e = St(t, i + 0.1)) && (e += 0.1)), e; } function Pt(t, e) { try { return t.c[e].buffered; } catch (i) { return null; } } function Ct(t, e, i, n, r) { return e == 'text' ? wt(t.b, i, n, r) : Rt(t, e, t.Qc.bind(t, e, i)); } function Nt(t, e, i) { return e == 'text' ? (t.b.h = i, Promise.resolve()) : Rt(t, e, t.Gc.bind(t, e, i)); } function Mt(t, e, i) { return e == 'text' ? (t.b.f = i, Promise.resolve()) : Promise.all([Rt(t, e, t.ib.bind(t, e)), Rt(t, e, t.Ec.bind(t, e, i))]); } function Rt(t, e, i) { if (t.h) return Promise.reject(); if (i = { start: i, p: new P() }, t.a[e].push(i), t.a[e].length == 1) try { i.start(); } catch (n) { n.name == 'QuotaExceededError' ? i.p.reject(new E(3, 3017, e)) : i.p.reject(new E(3, 3015, n)), Ot(t, e); } return i.p; } function Dt(t, e) {
        if (t.h) return Promise.reject(); let i,
          n = []; for (i in t.c) {
          let r = new P(),
            s = { start: function (t) { t.resolve(); }.bind(null, r), p: r }; t.a[i].push(s), n.push(r), t.a[i].length == 1 && s.start();
        } return Promise.all(n).then(function () {
          let t,
            i; try { e(); } catch (n) { i = Promise.reject(new E(3, 3015, n)); } for (t in this.c)Ot(this, t); return i;
        }.bind(t), () => Promise.reject());
      } function Ot(t, e) { t.a[e].shift(); const i = t.a[e][0]; if (i) try { i.start(); } catch (n) { i.p.reject(new E(3, 3015, n)), Ot(t, e); } } function Lt(t, e) { this.j = t, this.i = e, this.c = this.a = 1 / 0, this.b = 1, this.h = this.f = 0, this.g = !0; } function jt(t, e, i, n, r, s) { this.a = t, this.c = e, this.i = i, this.m = n, this.j = r, this.l = s, this.b = new O(), this.h = !1, this.g = 1, this.f = null, t.readyState > 0 ? this.rb() : L(this.b, t, 'loadedmetadata', this.rb.bind(this)), L(this.b, t, 'ratechange', this.ic.bind(this)); } function Ut(t) { return t.a.readyState > 0 ? qt(t, t.a.currentTime) : Bt(t); } function Bt(t) { return t.m ? qt(t, t.m) : 1 / 0 > t.c.Z() ? t.c.ra() : Math.max(t.c.Ta(), t.c.ra()); } function Ft(t, e) { e != t.h && (t.h = e, Kt(t, t.g), t.j(e)); } function Kt(e, i) { e.f != null && (t.clearInterval(e.f), e.f = null), e.g = i, e.a.playbackRate = e.h || i < 0 ? 0 : i, !e.h && i < 0 && (e.f = t.setInterval(function () { this.a.currentTime += i / 4; }.bind(e), 250)); } function Vt(t, e) {
        let i = t.c,
          n = i.ra(),
          r = i.fa(); return i.U() && 1 / 0 != i.c ? (i = n + 1, n = i + t.i, e >= n && e <= r || St(t.a.buffered, e) && e >= i && e <= r ? e : e > r ? r : r < n && e >= i && e <= r ? e : Math.min(n + 2, r)) : e < n ? n : e > r ? r : e;
      } function Ht(t, e, i) {
        t.a.currentTime = i; var n = 0,
          r = function () { !this.a || n++ >= 10 || this.a.currentTime != e || (this.a.currentTime = i, setTimeout(r, 100)); }.bind(t); setTimeout(r, 100);
      } function qt(t, e) { let i = t.c.ra(); return e < i ? i : (i = t.c.fa(), e > i ? i : e); } function Gt(t, e, i) { this.a = t, this.L = e, this.D = i; } function zt(t, e, i, n, r, s) { this.position = t, this.startTime = e, this.endTime = i, this.a = n, this.L = r, this.D = s; } function Wt(t, e, i, n, r, s, a, o, h) { this.i = t, this.c = e, this.S = i, this.a = n, this.J = r, this.w = s, this.l = a, this.A = o || null, this.C = h || null, this.g = null, this.j = 1, this.G = Promise.resolve(), this.h = [], this.m = {}, this.b = {}, this.f = this.s = this.v = !1; } function Yt(t) { return t.a.periods[pe(t, Ut(t.i))]; } function $t(t) { return K(t.b, t => t.stream); } function Jt(t, e) { const i = {}; return i.text = e, Zt(t, i); } function Xt(t, e, i, n) { const r = t.b[e]; !r && e == 'text' && t.g.ignoreTextStreamFailures ? Jt(t, i) : r && (e = t.h[me(t, i)]) && e.xa && (e = t.m[i.id]) && e.xa && r.stream != i && (r.stream = i, r.La = !0, void 0 == n || r.ca || r.da || (r.ha ? Qt(r, n) : (ye(r), ge(t, r, n)))); } function Qt(t, e) { t.ca ? t.Ka = Math.min(t.Ka, e) : (t.ca = !0, t.Ka = e); } function Zt(t, e) {
        let i = pe(t, Ut(t.i)),
          n = K(e, t => t.mimeType + (t.codecs ? `; codecs="${t.codecs}"` : '')); return t.c.init(n), ie(t), n = F(e), ee(t, n).then(function () { if (!this.f) for (const t in e) { const n = e[t]; this.b[t] || (this.b[t] = { stream: n, type: t, ta: null, V: null, La: !0, va: !1, Ma: i, endOfStream: !1, ha: !1, ba: null, ca: !1, Ka: 0, da: !1, ab: !1 }, ve(this, this.b[t], 0)); } }.bind(t));
      } function te(t, e) { let i = t.h[e]; if (i) return i.I; i = { I: new P(), xa: !1 }, t.h[e] = i; const n = t.a.periods[e].streamSets.map(t => t.streams).reduce(_, []); return t.G = t.G.then(function () { if (!this.f) return ee(this, n); }.bind(t)).then(function () { this.f || (this.h[e].I.resolve(), this.h[e].xa = !0); }.bind(t)).catch(function (t) { this.f || (this.h[e].I.reject(), delete this.h[e], this.l(t)); }.bind(t)), i.I; } function ee(t, e) {
        for (var i = [], n = 0; n < e.length; ++n) {
          var r = e[n],
            s = t.m[r.id]; s ? i.push(s.I) : (t.m[r.id] = { I: new P(), xa: !1 }, i.push(r.createSegmentIndex()));
        } return Promise.all(i).then(function () { if (!this.f) for (let t = 0; t < e.length; ++t) { const i = this.m[e[t].id]; i.xa || (i.I.resolve(), i.xa = !0); } }.bind(t)).catch(function (t) { if (!this.f) return this.m[r.id].I.reject(), delete this.m[r.id], Promise.reject(t); }.bind(t));
      } function ie(t) { const e = t.a.presentationTimeline.Z(); 1 / 0 > e ? t.c.za(e) : t.c.za(Math.pow(2, 32)); } function ne(t, e) {
        let i,
          n = Ut(t.i); i = t.c; var r = e.type; r == 'text' ? i = i.b.a : (i = Pt(i, r), i = !i || i.length == 1 && i.end(0) - i.start(0) < 1e-6 ? null : i.length ? i.end(i.length - 1) : null); var s = e.ta && e.V ? t.a.periods[me(t, e.ta)].startTime + e.V.endTime : n,
          r = pe(t, s),
          a = t.a.periods[r],
          o = re(t, e, n, i, r),
          o = o ? a.startTime + o.startTime - n : At(t.c, e.type, n),
          a = t.j * Math.max(t.a.minBufferTime || 0, t.g.rebufferingGoal); return o >= Math.max(a, t.j * t.g.bufferingGoal) ? (e.va = !1, 0.5) : s >= t.a.presentationTimeline.Z() ? (e.va = !1, e.endOfStream = !0, null) : (e.endOfStream = !1, !t.v && o < a || o <= 1 ? e.va = !0 : o >= a && (e.va = !1), s = me(t, e.stream), r != s ? (e.Ma = r, null) : (o = re(t, e, n, i, s)) ? (ae(t, e, n, s, o), null) : 1);
      } function re(t, e, i, n, r) { if (e.V && e.stream == e.ta) return i = e.V.position + 1, se(t, e, r, i); if (i = e.V ? e.stream.findSegmentPosition(Math.max(0, t.a.periods[me(t, e.ta)].startTime + e.V.endTime - t.a.periods[r].startTime)) : e.stream.findSegmentPosition(Math.max(0, (n || i) - t.a.periods[r].startTime)), i == null) return null; let s = null; return n == null && (s = se(t, e, r, Math.max(0, i - 1))), s || se(t, e, r, i); } function se(t, e, i, n) { return i = t.a.periods[i], (e = e.stream.getSegmentReference(n)) ? (t = t.a.presentationTimeline, n = t.fa(), i.startTime + e.endTime < t.sa() || i.startTime + e.startTime > n ? null : e) : null; } function ae(t, e, i, n, r) {
        var s = t.a.periods[n],
          a = e.stream,
          o = t.a.periods[n + 1],
          h = null,
          h = o ? o.startTime : t.a.presentationTimeline.Z(); n = he(t, e, n, h), e.ha = !0, e.La = !1, o = be(t, r), Promise.all([n, o]).then(function (t) { if (!this.f && !this.s) return ue(this, e, i, s, a, r, t[1]); }.bind(t)).then(function () { this.f || this.s || (e.ha = !1, e.ab = !1, ve(this, e, 0), le(this, a)); }.bind(t)).catch(function (t) { this.f || this.s || (e.ha = !1, t.code == 1001 || t.code == 1002 || t.code == 1003 ? e.type == 'text' && this.g.ignoreTextStreamFailures && t.code == 1001 ? delete this.b.text : (this.l(t), ve(this, e, 4)) : t.code == 3017 ? oe(this, e, t) : this.l(t)); }.bind(t));
      } function oe(t, e, i) { if (!F(t.b).some(t => t != e && t.ab)) { const n = Math.round(100 * t.j); if (n > 20)t.j -= 0.2; else { if (!(n > 4)) return t.s = !0, void t.l(i); t.j -= 0.04; }e.ab = !0; }ve(t, e, e.va ? 0 : 4); } function he(t, e, i, n) { return e.La ? (i = Nt(t.c, e.type, t.a.periods[i].startTime - e.stream.presentationTimeOffset), n = n != null ? Mt(t.c, e.type, n) : Promise.resolve(), e.stream.initSegmentReference ? (t = be(t, e.stream.initSegmentReference).then(function (t) { if (!this.f) return Ct(this.c, e.type, t, null, null); }.bind(t)).catch(t => e.La = !0, Promise.reject(t)), Promise.all([i, n, t])) : Promise.all([i, n])) : Promise.resolve(); } function ue(t, e, i, n, r, s, a) { return ce(t, e, i).then(function () { if (!this.f) return Ct(this.c, e.type, a, s.startTime + n.startTime, s.endTime + n.startTime); }.bind(t)).then(function () { if (!this.f) return e.ta = r, e.V = s, Promise.resolve(); }.bind(t)); } function ce(t, e, i) { const n = xt(t.c, e.type); return n == null ? Promise.resolve() : (i = i - n - t.g.bufferBehind, i <= 0 ? Promise.resolve() : t.c.remove(e.type, n, n + i).then((() => {}))); } function le(t, e) { if (!t.v && (t.v = F(t.b).every(t => !t.ca && !t.da && t.V), t.v)) { let i = me(t, e); for (t.h[i] || te(t, i).then(function () { this.w(); }.bind(t)).catch(I), i = 0; i < t.a.periods.length; ++i)te(t, i).catch(I); t.C && t.C(); } } function de(t, e) {
        if (e.Ma != me(t, e.stream)) {
          let i = e.Ma,
            n = F(t.b); n.every(t => t.Ma == i) && n.every(fe) && te(t, i).then(function () {
            if (!this.f) {
              let t,
                e = this.J(this.a.periods[i]); for (t in this.b) if (!e[t]) return void this.l(new E(5, 5005)); for (t in e) if (!(this.b[t] || t == 'text' && this.g.ignoreTextStreamFailures)) return void this.l(new E(5, 5005)); for (t in this.b) { Xt(this, t, e[t]); const n = this.b[t]; fe(n) && ve(this, n, 0); } this.w();
            }
          }.bind(t)).catch(I);
        }
      } function fe(t) { return !t.ha && t.ba == null && !t.ca && !t.da; } function pe(t, e) { for (let i = t.a.periods.length - 1; i > 0; --i) if (e >= t.a.periods[i].startTime) return i; return 0; } function me(t, e) { for (let i = 0; i < t.a.periods.length; ++i) for (let n = t.a.periods[i], r = 0; r < n.streamSets.length; ++r) if (n.streamSets[r].streams.indexOf(e) >= 0) return i; return -1; } function be(t, e) { const i = M(e.a(), t.g.retryParameters); if (e.L || e.D != null) { let n = `bytes=${e.L}-`; e.D != null && (n += e.D), i.headers.Range = n; } return t.S.request(1, i).then(t => t.data); } function ge(t, e, i) {
        e.ca = !1, e.da = !0; let n = Ut(t.i) + i,
          r = t.c.Z(); (i ? t.c.remove(e.type, n, r) : t.c.clear(e.type)).then(function () { this.f || (e.ta = null, e.V = null, e.da = !1, ve(this, e, 0)); }.bind(t));
      } function ve(e, i, n) { i.ba = t.setTimeout(e.X.bind(e, i), 1e3 * n); } function ye(e) { e.ba != null && (t.clearTimeout(e.ba), e.ba = null); } function Te() { this.a = Promise.resolve(), this.c = this.b = this.f = !1, this.g = new Promise(((t) => { this.h = t; })); } function we(t) { return t.f || (t.a = t.a.then(function (t) { return this.b = !0, Promise.resolve(t); }.bind(t), function (t) { return this.b = !0, Promise.reject(t); }.bind(t))), t.f = !0, t.a; } function ke(t, e) { return t.b ? Promise.resolve() : (t.c = !0, t.i = e, t.g); } function Ee(t, e, i, n, r) {
        let s,
          a = r in n; for (s in e) {
          let o = `${r}.${s}`,
            h = a ? n[r] : i[s],
            u = !!{ '.abr.manager': !0 }[o]; (a || s in t) && (void 0 === e[s] ? void 0 === h || a ? delete t[s] : t[s] = h : u ? t[s] = e[s] : typeof t[s] === 'object' && typeof e[s] === 'object' ? Ee(t[s], e[s], h, n, o) : typeof e[s] === typeof h && (t[s] = e[s]));
        }
      } function Se(e, i) {
        let n,
          r = i || {}; for (n in r) this[n] = r[n]; this.defaultPrevented = this.cancelable = this.bubbles = !1, this.timeStamp = t.performance ? t.performance.now() : Date.now(), this.type = e, this.isTrusted = !1, this.target = this.currentTarget = null, this.a = !1;
      } function _e() { this.Aa = new D(), this.S = this; } function Ie(t, e, i) { return i == e || t >= Yr && i == e.split('-')[0] || t >= $r && i.split('-')[0] == e.split('-')[0]; } function xe(t) { t = t.toLowerCase().split('-'); const e = Jr[t[0]]; return e && (t[0] = e), t.join('-'); } function Ae(t, e, i) { let n = !1; return t.streamSets.forEach((t) => { t.streams.forEach((r) => { const s = r.allowedByApplication; r.allowedByApplication = !0, t.type == 'video' ? (r.width < e.minWidth || r.width > e.maxWidth || r.width > i.width || r.height < e.minHeight || r.height > e.maxHeight || r.height > i.height || r.width * r.height < e.minPixels || r.width * r.height > e.maxPixels || r.bandwidth < e.minVideoBandwidth || r.bandwidth > e.maxVideoBandwidth) && (r.allowedByApplication = !1) : t.type == 'audio' && (r.bandwidth < e.minAudioBandwidth || r.bandwidth > e.maxAudioBandwidth) && (r.allowedByApplication = !1), s != r.allowedByApplication && (n = !0); }); }), n; } function Pe(t, e, i) {
        let n = '',
          r = null; for (t && t.A && (n = t.keySystem(), r = t.m), t = 0; t < i.streamSets.length; ++t) {
          const s = i.streamSets[t]; if (n && s.drmInfos.length && !s.drmInfos.some(t => t.keySystem == n))i.streamSets.splice(t, 1), --t; else {
            for (let a = e[s.type], o = 0; o < s.streams.length; ++o) {
              let h = s.streams[o],
                u = h.mimeType; h.codecs && (u += `; codecs="${h.codecs}"`), zr[u] || MediaSource.isTypeSupported(u) ? r && h.encrypted && r.indexOf(u) < 0 ? (s.streams.splice(o, 1), --o) : !a || h.mimeType == a.mimeType && h.codecs.split('.')[0] == a.codecs.split('.')[0] || (s.streams.splice(o, 1), --o) : (s.streams.splice(o, 1), --o);
            }s.streams.length || (i.streamSets.splice(t, 1), --t);
          }
        }
      } function Ce(t, e) { return t.streamSets.map((t) => { const i = e ? e[t.type] : null; return t.streams.filter(t => t.allowedByApplication && t.allowedByKeySystem).map(e => ({ id: e.id, active: i == e, type: t.type, bandwidth: e.bandwidth, language: t.language, kind: e.kind || null, width: e.width || null, height: e.height || null })); }).reduce(_, []); } function Ne(t, e) { for (let i = 0; i < t.streamSets.length; i++) for (let n = t.streamSets[i], r = 0; r < n.streams.length; r++) { const s = n.streams[r]; if (s.id == e.id) return { stream: s, Tc: n }; } return null; } function Me(t) { return t.streams.some(t => t.allowedByApplication && t.allowedByKeySystem); } function Re(t, e, i) { const n = {}; t.streamSets.forEach((t) => { !Me(t) || t.type in n || (n[t.type] = t); }); let r = 0; return t.streamSets.forEach((t) => { if (Me(t) && t.type == 'video') { const e = Oe(t); e > r ? (r = e, n.video = t) : e == r && De(t) < De(n.video) && (n.video = t); } }), t.streamSets.forEach((t) => { Me(t) && t.primary && (n[t.type].primary ? De(t) < De(n[t.type]) && (n[t.type] = t) : n[t.type] = t); }), [$r, Yr, 0].forEach((r) => { t.streamSets.forEach((t) => { if (Me(t)) { let s; if (t.type == 'audio' ? s = e.preferredAudioLanguage : t.type == 'text' && (s = e.preferredTextLanguage), s) { s = xe(s); const a = xe(t.language); Ie(r, s, a) && (t.language == n[t.type].language ? De(t) < De(n[t.type]) && (n[t.type] = t) : n[t.type] = t, i && (i[t.type] = !0)); } } }); }), n; } function De(t) { let e = 0; return !t || t.streams.length < 1 ? e : (t.streams.forEach((t) => { e += t.bandwidth; }), e / t.streams.length); } function Oe(t) { let e = 0; return t ? (t.streams.forEach((t) => { t.height > e && (e = t.height); }), e) : e; } function Le(t, e) { _e.call(this), this.w = !1, this.f = t, this.m = null, this.v = new O(), this.hb = new c(), this.na = this.c = this.l = this.b = this.i = this.oa = this.G = this.A = this.g = this.h = null, this.Kb = 1e9, this.ma = [], this.Pa = !1, this.qa = !0, this.j = null, this.s = {}, this.a = Ke(this), this.Ba = { width: 1 / 0, height: 1 / 0 }, this.C = [], this.X = this.J = this.pa = 0, e && e(this), this.h = new C(this.Lc.bind(this)), this.oa = je(this); for (let i = 0; i < this.f.textTracks.length; ++i) { const n = this.f.textTracks[i]; n.mode = 'disabled', n.label == 'Shaka Player TextTrack' && (this.m = n); } this.m || (this.m = this.f.addTextTrack('subtitles', 'Shaka Player TextTrack')), this.m.mode = 'hidden', L(this.v, this.f, 'error', this.lc.bind(this)); } function je(e) { e.A = new MediaSource(); const i = new P(); return L(e.v, e.A, 'sourceopen', i.resolve), e.f.src = t.URL.createObjectURL(e.A), i; } function Ue(t) { t.l && t.l.configure(t.a.manifest), t.g && t.g.configure(t.a.drm), t.b && (t.b.configure(t.a.streaming), t.c.periods.forEach(t.Na.bind(t)), Ge(t, Yt(t.b))), t.a.abr.enabled && !t.qa ? t.a.abr.manager.enable() : t.a.abr.manager.disable(), t.a.abr.manager.setDefaultEstimate(t.a.abr.defaultBandwidthEstimate); } function Be(t) { t.v && t.v.ka(t.A, 'sourceopen'), t.f && (t.f.removeAttribute('src'), t.f.load()); const e = Promise.all([t.a ? t.a.abr.manager.stop() : null, t.g ? t.g.o() : null, t.G ? t.G.o() : null, t.i ? t.i.o() : null, t.b ? t.b.o() : null, t.l ? t.l.stop() : null]); return t.g = null, t.G = null, t.i = null, t.b = null, t.l = null, t.c = null, t.na = null, t.oa = null, t.A = null, t.s = {}, t.C = [], t.pa = 0, t.J = 0, e; } function Fe() { return { '.drm.servers': '', '.drm.clearKeys': '', '.drm.advanced': { distinctiveIdentifierRequired: !1, persistentStateRequired: !1, videoRobustness: '', audioRobustness: '', serverCertificate: null } }; } function Ke(t) { return { drm: { retryParameters: N(), servers: {}, clearKeys: {}, advanced: {} }, manifest: { retryParameters: N(), dash: { customScheme(t) { if (t) return null; }, clockSyncUri: '' } }, streaming: { retryParameters: N(), rebufferingGoal: 2, bufferingGoal: 30, bufferBehind: 30, ignoreTextStreamFailures: !1 }, abr: { manager: t.hb, enabled: !0, defaultBandwidthEstimate: 5e5 }, preferredAudioLanguage: '', preferredTextLanguage: '', restrictions: { minWidth: 0, maxWidth: 1 / 0, minHeight: 0, maxHeight: 1 / 0, minPixels: 0, maxPixels: 1 / 0, minAudioBandwidth: 0, maxAudioBandwidth: 1 / 0, minVideoBandwidth: 0, maxVideoBandwidth: 1 / 0 } }; } function Ve(t, e, i) {
        for (const n in e) {
          let r = e[n],
            s = i || n == 'text'; t.qa ? t.s[n] = { stream: r, clear: s } : Xt(t.b, n, r, s ? 0 : void 0);
        }
      } function He(t) { if (t.c) { const e = Date.now() / 1e3; t.Pa ? t.J += e - t.X : t.pa += e - t.X, t.X = e; } } function qe(t, e, i) { if (!F(e).some(Me)) return t.aa(new E(4, 4012)), {}; let n = {}; if (i)n = e; else { i = $t(t.b); for (const r in i) { const s = i[r]; s.allowedByApplication && s.allowedByKeySystem && e[r].language == s.language || (n[r] = e[r]); } } if (B(n)) return {}; u(Object.keys(n)); const a = t.a.abr.manager.chooseStreams(n); return V(n, t => !!a[t]) ? a : (t.aa(new E(4, 4012)), {}); } function Ge(t, e) {
        let i,
          n = { audio: !1, text: !1 },
          r = Re(e, t.a, n),
          s = qe(t, r); for (i in s)t.C.push({ timestamp: Date.now() / 1e3, id: s[i].id, type: i, fromAdaptation: !0 }); Ve(t, s, !0), ze(t), r.text && r.audio && n.text && r.text.language != r.audio.language && (t.m.mode = 'showing', Ye(t));
      } function ze(t) { Promise.resolve().then(function () { this.w || this.dispatchEvent(new Se('adaptation')); }.bind(t)); } function We(t) { Promise.resolve().then(function () { this.w || this.dispatchEvent(new Se('trackschanged')); }.bind(t)); } function Ye(t) { t.dispatchEvent(new Se('texttrackvisibility')); } function $e(t) {
        return JSON.stringify(t, (t, e) => {
          if (t != 'manager' && typeof e !== 'function') {
            if (e instanceof Event || e instanceof Se) {
              var i,
                n = {}; for (i in e) { const r = e[i]; r && typeof r === 'object' || i in Event || (n[i] = r); } return n;
            } if (e instanceof TimeRanges) for (n = { __type__: 'TimeRanges', length: e.length, start: [], end: [] }, i = 0; i < e.length; ++i)n.start.push(e.start(i)), n.end.push(e.end(i)); else n = typeof e === 'number' ? isNaN(e) ? 'NaN' : isFinite(e) ? e : e < 0 ? '-Infinity' : 'Infinity' : e; return n;
          }
        });
      } function Je(t) { return JSON.parse(t, (t, e) => (e == 'NaN' ? NaN : e == '-Infinity' ? -(1 / 0) : e == 'Infinity' ? 1 / 0 : e && typeof e === 'object' && e.__type__ == 'TimeRanges' ? Xe(e) : e)); } function Xe(t) { return { length: t.length, start(e) { return t.start[e]; }, end(e) { return t.end[e]; } }; } function Qe(t, e, i, n, r) { this.C = t, this.l = e, this.w = i, this.A = n, this.s = r, this.f = this.j = this.h = !1, this.v = '', this.a = this.i = null, this.b = { video: {}, player: {} }, this.m = 0, this.c = {}, this.g = null; } function Ze(t) { for (const e in t.c) { const i = t.c[e]; delete t.c[e], i.reject(new E(7, 7e3)); } } function ti(t, e) { const i = $e(e); t.a.sendMessage('urn:x-cast:com.google.shaka.v2', i, () => {}, h); } function ei(t, e, i) { _e.call(this), this.c = t, this.b = e, this.h = this.f = this.g = this.i = this.j = null, this.a = new Qe(i, this.Mc.bind(this), this.Nc.bind(this), this.Oc.bind(this), this.mb.bind(this)), ii(this); } function ii(t) { t.a.init(), t.h = new O(), Qr.forEach(function (t) { L(this.h, this.c, t, this.$c.bind(this)); }.bind(t)), is.forEach(function (t) { L(this.h, this.b, t, this.tc.bind(this)); }.bind(t)), t.j = {}; for (var e in t.c)Object.defineProperty(t.j, e, { configurable: !1, enumerable: !0, get: t.Zc.bind(t, e), set: t.ad.bind(t, e) }); t.i = {}; for (e in t.b)Object.defineProperty(t.i, e, { configurable: !1, enumerable: !0, get: t.sc.bind(t, e) }); t.g = new _e(), t.g.S = t.j, t.f = new _e(), t.f.S = t.i; } function ni(t, e, i) { _e.call(this), this.b = t, this.a = e, this.i = { video: t, player: e }, this.j = i || function () {}, this.h = !1, this.g = !0, this.c = this.f = null, ri(this); } function ri(e) { const i = cast.receiver.CastReceiverManager.getInstance(); i.onSenderConnected = e.ub.bind(e), i.onSenderDisconnected = e.ub.bind(e), i.onSystemVolumeChanged = e.Rb.bind(e), e.f = i.getCastMessageBus('urn:x-cast:com.google.shaka.v2'), e.f.onMessage = e.ec.bind(e), i.start(), Qr.forEach(function (t) { this.b.addEventListener(t, this.xb.bind(this, 'video')); }.bind(e)), is.forEach(function (t) { this.a.addEventListener(t, this.xb.bind(this, 'player')); }.bind(e)), e.a.Fb(1920, 1080), e.a.addEventListener('loading', function () { this.g = !1, si(this); }.bind(e)), e.a.addEventListener('unloading', function () { this.g = !0, si(this); }.bind(e)), e.b.addEventListener('ended', function () { t.setTimeout(() => { this.b && this.b.ended && (this.g = !0, si(this)); }, 5e3); }.bind(e)); } function si(t) { Promise.resolve().then(function () { this.dispatchEvent(new Se('caststatuschanged')); }.bind(t)); } function ai(t, e, i) { for (const n in e.player)t.a[n](e.player[n]); t.j(i), i = Promise.resolve(); const r = t.b.autoplay; e.manifest && (t.b.autoplay = !1, i = t.a.load(e.manifest, e.startTime), i.catch(function (t) { this.a.dispatchEvent(new Se('error', { detail: t })); }.bind(t))), i.then(function () { for (var t in e.video) { var i = e.video[t]; this.b[t] = i; } for (t in e.playerAfterLoad)i = e.playerAfterLoad[t], this.a[t](i); this.b.autoplay = r, e.manifest && this.b.play(); }.bind(t)); } function oi(t, e, i) { t.h && (e = $e(e), i ? t.f.getCastChannel(i).send(e) : t.f.broadcast(e)); } function hi(t, e) { const i = ui(t, e); return i.length != 1 ? null : i[0]; } function ui(t, e) { return Array.prototype.filter.call(t.childNodes, t => t.tagName == e); } function ci(t) { return (t = t.firstChild) && t.nodeType == Node.TEXT_NODE ? t.nodeValue.trim() : null; } function li(t, e, i, n) { let r = null; return t = t.getAttribute(e), t != null && (r = i(t)), r == null ? void 0 !== n ? n : null : r; } function di(t) { return t ? (t = Date.parse(t), isNaN(t) ? null : Math.floor(t / 1e3)) : null; } function fi(t) { return t && (t = /^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t)) ? (t = 31536e3 * Number(t[1] || null) + 2592e3 * Number(t[2] || null) + 86400 * Number(t[3] || null) + 3600 * Number(t[4] || null) + 60 * Number(t[5] || null) + Number(t[6] || null), isFinite(t) ? t : null) : null; } function pi(t) { let e = /([0-9]+)-([0-9]+)/.exec(t); return e ? (t = Number(e[1]), isFinite(t) ? (e = Number(e[2]), isFinite(e) ? { start: t, end: e } : null) : null) : null; } function mi(t) { return t = Number(t), t % 1 ? null : t; } function bi(t) { return t = Number(t), !(t % 1) && t > 0 ? t : null; } function gi(t) { return t = Number(t), !(t % 1) && t >= 0 ? t : null; } function vi(t, e) {
        let i = ki(t),
          n = null,
          r = i.filter(t => t.Cb != 'urn:mpeg:dash:mp4protection:2011' || (n = t.init || n, !1)),
          s = i.map(t => t.keyId).filter(x),
          a = null; if (s.length > 0 && (a = s[0], s.some(A(a)))) throw new E(4, 4010); return s = [], r.length > 0 ? (s = wi(n, e, r), s.length || (s = [Ti('', n)])) : i.length > 0 && (s = F(hs).map(t => Ti(t, n))), { kb: a, dd: n, drmInfos: s, lb: !0 };
      } function yi(t, e, i) { const n = vi(t, e); if (i.lb)t = i.drmInfos.length == 1 && !i.drmInfos[0].keySystem, e = !n.drmInfos.length, (!i.drmInfos.length || t && !e) && (i.drmInfos = n.drmInfos), i.lb = !1; else if (n.drmInfos.length > 0 && (i.drmInfos = i.drmInfos.filter(t => n.drmInfos.some(e => e.keySystem == t.keySystem)), !i.drmInfos.length)) throw new E(4, 4008); return n.kb || i.kb; } function Ti(t, e) { return { keySystem: t, licenseServerUri: '', distinctiveIdentifierRequired: !1, persistentStateRequired: !1, audioRobustness: '', videoRobustness: '', serverCertificate: null, initData: e || [] }; } function wi(t, e, i) { return i.map((i) => { const n = hs[i.Cb]; return n ? [Ti(n, i.init || t)] : e(i.node) || []; }).reduce(_, []); } function ki(t) {
        return t.map((t) => {
          let e = t.getAttribute('schemeIdUri'),
            i = t.getAttribute('cenc:default_KID'),
            n = ui(t, 'cenc:pssh').map(ci); if (!e) return null; if (e = e.toLowerCase(), i && (i = i.replace(/-/g, '').toLowerCase(), i.indexOf(' ') >= 0)) throw new E(4, 4009); let r = []; try { r = n.map(t => ({ initDataType: 'cenc', initData: Q(t) })); } catch (s) { throw new E(4, 4007); } return { node: t, Cb: e, keyId: i, init: r.length > 0 ? r : null };
        }).filter(x);
      } function Ei(e, i, n, r, s) { s !== null && (s = Math.round(s)); const a = { RepresentationID: i, Number: n, Bandwidth: r, Time: s }; return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g, (e, i, n) => { if (e == '$$') return '$'; const r = a[i]; return r == null ? e : (i == 'RepresentationID' && n && (n = void 0), e = r.toString(), n = t.parseInt(n, 10) || 1, Array(Math.max(0, n - e.length) + 1).join('0') + e); }); } function Si(t, e, i) { if (i.length) { const n = i[0]; n.startTime <= us && (i[0] = new zt(n.position, 0, n.endTime, n.a, n.L, n.D)), t || (t = i[i.length - 1], t.startTime > e || (i[i.length - 1] = new zt(t.position, t.startTime, e, t.a, t.L, t.D))); } } function _i(t, e) { if (!e.length) return t; const i = e.map(t => new p(t)); return t.map(t => new p(t)).map(t => i.map(t.resolve.bind(t))).reduce(_, []).map(t => t.toString()); } function Ii(t, e) {
        let i = xi(t, e, 'timescale'),
          n = 1; i && (n = bi(i) || 1), i = xi(t, e, 'duration'), (i = bi(i || '')) && (i /= n); var r = xi(t, e, 'startNumber'),
          s = xi(t, e, 'presentationTimeOffset'),
          a = gi(r || ''); r != null && a != null || (a = 1); var o = Ai(t, e, 'SegmentTimeline'),
          r = null; if (o) {
          for (var r = n, h = Number(s), u = t.H.duration || 1 / 0, o = ui(o, 'S'), c = [], l = 0, d = 0; d < o.length; ++d) {
            var f = o[d],
              p = li(f, 't', gi),
              m = li(f, 'd', gi),
              f = li(f, 'r', mi); if (p != null && (p -= h), !m) break; if (p = p != null ? p : l, f = f || 0, f < 0) if (d + 1 < o.length) { if (f = li(o[d + 1], 't', gi), f == null) break; if (p >= f) break; f = Math.ceil((f - p) / m) - 1; } else { if (1 / 0 == u) break; if (p / r >= u) break; f = Math.ceil((u * r - p) / m) - 1; }c.length > 0 && p != l && (c[c.length - 1].end = p / r); for (let b = 0; b <= f; ++b)l = p + m, c.push({ start: p / r, end: l / r }), p = l;
          }r = c;
        } return { Ia: n, F: i, ia: a, presentationTimeOffset: Number(s) / n || 0, B: r };
      } function xi(t, e, i) { return [e(t.u), e(t.P), e(t.K)].filter(x).map(t => t.getAttribute(i)).reduce((t, e) => t || e); } function Ai(t, e, i) { return [e(t.u), e(t.P), e(t.K)].filter(x).map(t => hi(t, i)).reduce((t, e) => t || e); } function Pi(t) { this.b = t, this.c = cs == 0, this.a = 0; } function Ci(t) { return t.a < t.b.byteLength; } function Ni(t) { try { var e = t.b.getUint8(t.a); } catch (i) { Ui(); } return t.a += 1, e; } function Mi(t) { try { var e = t.b.getUint16(t.a, t.c); } catch (i) { Ui(); } return t.a += 2, e; } function Ri(t) { try { var e = t.b.getUint32(t.a, t.c); } catch (i) { Ui(); } return t.a += 4, e; } function Di(t) {
        let e,
          i; try { t.c ? (e = t.b.getUint32(t.a, !0), i = t.b.getUint32(t.a + 4, !0)) : (i = t.b.getUint32(t.a, !1), e = t.b.getUint32(t.a + 4, !1)); } catch (n) { Ui(); } if (i > 2097151) throw new E(3, 3001); return t.a += 8, i * Math.pow(2, 32) + e;
      } function Oi(t, e) { t.a + e > t.b.byteLength && Ui(); const i = t.b.buffer.slice(t.a, t.a + e); return t.a += e, new Uint8Array(i); } function Li(t, e) { t.a + e > t.b.byteLength && Ui(), t.a += e; } function ji(t) { let e = t.a; try { for (;Ci(t) && t.b.getUint8(t.a);)t.a += 1; } catch (i) { Ui(); } return e = t.b.buffer.slice(e, t.a), t.a += 1, H(e); } function Ui() { throw new E(3, 3e3); } function Bi(t, e) {
        for (;Ci(e);) {
          let i = e.a,
            n = Ri(e),
            r = Ri(e); if (n == 1 ? n = Di(e) : n || (n = e.b.byteLength - i), r == t) return n; Li(e, n - (e.a - i));
        } return -1;
      } function Fi(t, e) {
        for (var i = new Pi(new DataView(t)), n = [[1836019574, 0], [1953653099, 0], [1835297121, 0], [1835626086, 0], [1937007212, 0], [1937011556, 8], [e, 0]], r = -1, s = 0; s < n.length; s++) {
          var a = n[s][1],
            r = Bi(n[s][0], i); if (r == -1) return -1; Li(i, a);
        } return r;
      } function Ki(t, e, i, n) {
        const r = []; t = new Pi(new DataView(t)); let s = Bi(1936286840, t); if (s == -1) throw new E(3, 3004); let a = Ni(t); Li(t, 3), Li(t, 4); const o = Ri(t); if (!o) throw new E(3, 3005); let h,
          u; for (a ? (h = Di(t), u = Di(t)) : (h = Ri(t), u = Ri(t)), Li(t, 2), a = Mi(t), n = h - n, e = e + s + u, s = 0; s < a; s++) { h = Ri(t), u = (2147483648 & h) >>> 31, h &= 2147483647; const c = Ri(t); if (Li(t, 4), u == 1) throw new E(3, 3006); r.push(new zt(r.length, n / o, (n + c) / o, (() => i), e, e + h - 1)), n += c, e += h; } return r;
      } function Vi(t) { this.a = t; } function Hi(t) { this.b = t, this.a = new Pi(t), ls || (ls = [new Uint8Array([255]), new Uint8Array([127, 255]), new Uint8Array([63, 255, 255]), new Uint8Array([31, 255, 255, 255]), new Uint8Array([15, 255, 255, 255, 255]), new Uint8Array([7, 255, 255, 255, 255, 255]), new Uint8Array([3, 255, 255, 255, 255, 255, 255]), new Uint8Array([1, 255, 255, 255, 255, 255, 255, 255])]); } function qi(t) { let e; if (e = Gi(t), e.length > 7) throw new E(3, 3002); for (var i = 0, n = 0; n < e.length; n++)i = 256 * i + e[n]; e = i, i = Gi(t); t: { for (n = 0; n < ls.length; n++) if (et(i, ls[n])) { n = !0; break t; }n = !1; } if (n)i = t.b.byteLength - t.a.a; else { if (i.length == 8 && 224 & i[1]) throw new E(3, 3001); for (var n = i[0] & (1 << 8 - i.length) - 1, r = 1; r < i.length; r++)n = 256 * n + i[r]; i = n; } return i = t.a.a + i <= t.b.byteLength ? i : t.b.byteLength - t.a.a, n = new DataView(t.b.buffer, t.b.byteOffset + t.a.a, i), Li(t.a, i), new zi(e, n); } function Gi(t) {
        let e,
          i = Ni(t.a); for (e = 1; e <= 8 && !(i & 1 << 8 - e); e++);if (e > 8) throw new E(3, 3002); const n = new Uint8Array(e); for (n[0] = i, i = 1; i < e; i++)n[i] = Ni(t.a); return n;
      } function zi(t, e) { this.id = t, this.a = e; } function Wi(t) { if (t.a.byteLength > 8) throw new E(3, 3002); if (t.a.byteLength == 8 && 224 & t.a.getUint8(0)) throw new E(3, 3001); for (var e = 0, i = 0; i < t.a.byteLength; i++) var n = t.a.getUint8(i), e = 256 * e + n; return e; } function Yi(t, e, i, n, r, s) { function a() { return r; } const o = []; t = new Hi(t.a); for (var h = -1, u = -1; Ci(t.a);) { let c = qi(t); if (c.id == 187) { let l = $i(c); l && (c = i * (l.Yc - s), l = e + l.wc, h >= 0 && o.push(new zt(o.length, h, c, a, u, l - 1)), h = c, u = l); } } return h >= 0 && o.push(new zt(o.length, h, n, a, u, null)), o; } function $i(t) { var e = new Hi(t.a); if (t = qi(e), t.id != 179) throw new E(3, 3013); if (t = Wi(t), e = qi(e), e.id != 183) throw new E(3, 3012); for (var e = new Hi(e.a), i = 0; Ci(e.a);) { const n = qi(e); if (n.id == 241) { i = Wi(n); break; } } return { Yc: t, wc: i }; } function Ji(t, e) {
        let i = Ai(t, e, 'Initialization'); if (!i) return null; var n = t.u.M,
          r = i.getAttribute('sourceURL'); r && (n = _i(t.u.M, [r])); var r = 0,
          s = null; return (i = li(i, 'range', pi)) && (r = i.start, s = i.end), new Gt((() => n), r, s);
      } function Xi(t, e) {
        let i,
          n = xi(t, Zi, 'presentationTimeOffset'),
          r = Ji(t, Zi); i = Number(n); const s = t.u.mimeType.split('/')[1]; if (t.u.contentType != 'text' && s != 'mp4' && s != 'webm') throw new E(4, 4006); if (s == 'webm' && !r) throw new E(4, 4005); var a = Ai(t, Zi, 'RepresentationIndex'),
          o = xi(t, Zi, 'indexRange'),
          h = t.u.M,
          o = pi(o || ''); if (a) { const u = a.getAttribute('sourceURL'); u && (h = _i(t.u.M, [u])), o = li(a, 'range', pi, o); } if (!o) throw new E(4, 4002); return i = Qi(t, e, r, h, o.start, o.end, s, i), { createSegmentIndex: i.createSegmentIndex, findSegmentPosition: i.findSegmentPosition, getSegmentReference: i.getSegmentReference, initSegmentReference: r, presentationTimeOffset: Number(n) || 0 };
      } function Qi(t, e, i, n, r, s, a, o) {
        let h = t.presentationTimeline,
          u = t.H.start,
          c = t.H.duration,
          l = e,
          d = null; return { createSegmentIndex() {
          const e = [l(n, r, s), a == 'webm' ? l(i.a(), i.L, i.D) : null]; return l = null, Promise.all(e).then((e) => {
            let i,
              s = e[0]; if (e = e[1] || null, a == 'mp4')s = Ki(s, r, n, o); else { if (e = new Hi(new DataView(e)), qi(e).id != 440786851) throw new E(3, 3008); let l = qi(e); if (l.id != 408125543) throw new E(3, 3009); for (e = l.a.byteOffset, l = new Hi(l.a), i = null; Ci(l.a);) { var f = qi(l); if (f.id == 357149030) { i = f; break; } } if (!i) throw new E(3, 3010); for (l = new Hi(i.a), i = 1e6, f = null; Ci(l.a);) { const p = qi(l); if (p.id == 2807729)i = Wi(p); else if (p.id == 17545) if (f = p, f.a.byteLength == 4)f = f.a.getFloat32(0); else { if (f.a.byteLength != 8) throw new E(3, 3003); f = f.a.getFloat64(0); } } if (f == null) throw new E(3, 3011); if (l = i / 1e9, i = f * l, s = qi(new Hi(new DataView(s))), s.id != 475249515) throw new E(3, 3007); s = Yi(s, e, l, i, n, o); }Si(t.Qa, c, s), h.Ea(u, s), d = new Vi(s);
          });
        },
        findSegmentPosition(t) { return d.find(t); },
        getSegmentReference(t) { return d.get(t); } };
      } function Zi(t) { return t.Ga; } function tn(t, e) {
        let i,
          n = Ji(t, en); i = rn(t); let r = Ii(t, en),
          s = r.ia; s || (s = 1); let a = 0; if (r.F ? a = r.F * (s - 1) - r.presentationTimeOffset : r.B && r.B.length > 0 && (a = r.B[0].start), i = { F: r.F, startTime: a, ia: s, presentationTimeOffset: r.presentationTimeOffset, B: r.B, ua: i }, !i.F && !i.B && i.ua.length > 1) throw new E(4, 4002); if (!i.F && !t.H.duration && !i.B && i.ua.length == 1) throw new E(4, 4002); if (i.B && !i.B.length) throw new E(4, 4002); return s = r = null, t.K.id && t.u.id && (s = `${t.K.id},${t.u.id}`, r = e[s]), a = nn(t.H.duration, i.ia, t.u.M, i), Si(t.Qa, t.H.duration, a), r ? (r.Wa(a), r.Ra(t.presentationTimeline.sa() - t.H.start)) : (t.presentationTimeline.Ea(t.H.start, a), r = new Vi(a), s && (e[s] = r)), { createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition: r.find.bind(r), getSegmentReference: r.get.bind(r), initSegmentReference: n, presentationTimeOffset: i.presentationTimeOffset };
      } function en(t) { return t.$; } function nn(t, e, i, n) {
        let r = n.ua.length; n.B && n.B.length != n.ua.length && (r = Math.min(n.B.length, n.ua.length)); for (var s = [], a = n.startTime, o = 0; o < r; o++) {
          var h,
            u = n.ua[o],
            c = _i(i, [u.ac]); h = n.F != null ? a + n.F : n.B ? n.B[o].end : a + t, s.push(new zt(o + e, a, h, (t => t).bind(null, c), u.start, u.end)), a = h;
        } return s;
      } function rn(t) { return [t.u.$, t.P.$, t.K.$].filter(x).map(t => ui(t, 'SegmentURL')).reduce((t, e) => (t.length > 0 ? t : e)).map((t) => { const e = t.getAttribute('media'); return t = li(t, 'mediaRange', pi, { start: 0, end: null }), { ac: e, start: t.start, end: t.end }; }); } function sn(t, e, i, n) {
        let r,
          s = un(t); r = Ii(t, an); let a = xi(t, an, 'media'),
          o = xi(t, an, 'index'); if (r = { F: r.F, Ia: r.Ia, ia: r.ia, presentationTimeOffset: r.presentationTimeOffset, B: r.B, Va: a, Da: o }, a = 0 + (r.Da ? 1 : 0), a += r.B ? 1 : 0, a += r.F ? 1 : 0, !a) throw new E(4, 4002); if (a != 1 && (r.Da && (r.B = null), r.F = null), !r.Da && !r.Va) throw new E(4, 4002); if (r.Da) { if (i = t.u.mimeType.split('/')[1], i != 'mp4' && i != 'webm') throw new E(4, 4006); if (i == 'webm' && !s) throw new E(4, 4005); n = Ei(r.Da, t.u.id, null, t.bandwidth || null, null), n = _i(t.u.M, [n]), t = Qi(t, e, s, n, 0, null, i, r.presentationTimeOffset); } else {
          r.F ? (n || t.presentationTimeline.Xa(r.F), t = on(t, r)) : (n = e = null, t.K.id && t.u.id && (n = `${t.K.id},${t.u.id}`,
            e = i[n]), a = hn(t, r), Si(t.Qa, t.H.duration, a), e ? (e.Wa(a), e.Ra(t.presentationTimeline.sa() - t.H.start)) : (t.presentationTimeline.Ea(t.H.start, a), e = new Vi(a), n && (i[n] = e)), t = { createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition: e.find.bind(e), getSegmentReference: e.get.bind(e) });
        } return { createSegmentIndex: t.createSegmentIndex, findSegmentPosition: t.findSegmentPosition, getSegmentReference: t.getSegmentReference, initSegmentReference: s, presentationTimeOffset: r.presentationTimeOffset };
      } function an(t) { return t.Ha; } function on(t, e) {
        let i = t.H.duration,
          n = e.F,
          r = e.ia,
          s = e.Ia,
          a = e.Va,
          o = t.bandwidth || null,
          h = t.u.id,
          u = t.u.M; return { createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition(t) { return t < 0 || i && t >= i ? null : Math.floor(t / n); }, getSegmentReference(t) { const e = t * n; return new zt(t, e, e + n, (() => { const i = Ei(a, h, t + r, o, e * s); return _i(u, [i]); }), 0, null); } };
      } function hn(t, e) {
        for (var i = [], n = 0; n < e.B.length; n++) {
          let r = e.B[n].start,
            s = n + e.ia; i.push(new zt(s, r, e.B[n].end, ((t, e, i, n, r, s) => t = Ei(t, e, r, i, s), _i(n, [t]).map(t => t.toString())).bind(null, e.Va, t.u.id, t.bandwidth || null, t.u.M, s, (r + e.presentationTimeOffset) * e.Ia), 0, null));
        } return i;
      } function un(t) {
        const e = xi(t, an, 'initialization'); if (!e) return null; let i = t.u.id,
          n = t.bandwidth || null,
          r = t.u.M; return new Gt((() => { const t = Ei(e, i, null, n, null); return _i(r, [t]); }), 0, null);
      } function cn() { this.m = this.l = this.j = this.c = this.a = null, this.g = [], this.b = null, this.h = [], this.v = 1, this.i = {}, this.s = 0, this.f = null, this.Ja = this.Ja.bind(this); } function ln(t) { return t.a.request(0, M(t.g, t.c.retryParameters)).then(function (t) { if (this.a) return dn(this, t.data, t.uri); }.bind(t)); } function dn(t, e, i) {
        var n = H(e),
          r = new DOMParser(),
          s = null; e = null; try { s = r.parseFromString(n, 'text/xml'); } catch (a) {} if (s && s.documentElement.tagName == 'MPD' && (e = s.documentElement), !e) throw new E(4, 4001); i = [i], n = ui(e, 'Location').map(ci).filter(x), n.length > 0 && (i = t.g = n), n = ui(e, 'BaseURL').map(ci), i = _i(i, n); const o = li(e, 'minBufferTime', fi); t.s = li(e, 'minimumUpdatePeriod', fi, -1); var h,
          u = li(e, 'availabilityStartTime', di),
          n = li(e, 'timeShiftBufferDepth', fi),
          c = li(e, 'suggestedPresentationDelay', fi),
          r = li(e, 'maxSegmentDuration', fi),
          s = e.getAttribute('type') || 'static'; if (t.b)h = t.b.presentationTimeline; else { const l = Math.max(10, 1.5 * o); h = new Lt(u, c != null ? c : l); } var u = fn(t, { Qa: s != 'static', presentationTimeline: h, K: null, H: null, P: null, u: null, bandwidth: void 0 }, i, e),
          c = u.duration,
          d = u.periods; return h.Hb(s == 'static'), h.za(c || 1 / 0), h.Gb(n != null ? n : 1 / 0), h.Xa(r || 1), t.b ? Promise.resolve() : (e = ui(e, 'UTCTiming'), n = h.U(), u.Y && t.a.yb(t.Ja), yn(t, i, e, n).then(function (t) { this.a && (h.Eb(t), this.b = { presentationTimeline: h, periods: d, offlineSessionIds: [], minBufferTime: o || 0 }); }.bind(t)));
      } function fn(t, e, i, n) {
        var r = li(n, 'mediaPresentationDuration', fi),
          s = [],
          a = 0; n = ui(n, 'Period'); for (let o = 0; o < n.length; o++) {
          var h = n[o],
            a = li(h, 'start', fi, a),
            u = li(h, 'duration', fi); if (u == null) if (o + 1 != n.length) { var c = li(n[o + 1], 'start', fi); c != null && (u = c - a); } else r != null && (u = r - a); var h = { start: a, duration: u, node: h, Y: !1 },
            l = t,
            d = e,
            c = h; if (d.K = mn(c.node, null, i), d.H = c, d.K.id || (d.K.id = `__shaka_period_${c.start}`), l = ui(c.node, 'AdaptationSet').map(l.qc.bind(l, d)), !l.length) throw new E(4, 4004); for (d = 0; d < l.length; d++)l[d].Y && (c.Y = !0); if (l = bn(l), c = { startTime: c.start, streamSets: l }, s.push(c), l = e.K.id, t.h.every(A(l)) && (t.j(c), t.h.push(l), t.b && t.b.periods.push(c)), u == null) { a = null; break; }a += u;
        } return r != null ? { periods: s, duration: r, Y: h.Y } : { periods: s, duration: a, Y: h.Y };
      } function pn(e, i) { e.s < 0 || (e.f = t.setTimeout(e.Pc.bind(e), 1e3 * Math.max(Math.max(3, e.s) - i, 0))); } function mn(t, e, i) {
        e = e || { contentType: '', mimeType: '', codecs: '' }, i = i || e.M; let n = ui(t, 'BaseURL').map(ci),
          r = t.getAttribute('contentType') || e.contentType,
          s = t.getAttribute('mimeType') || e.mimeType; return r || (r = s.split('/')[0]), { M: _i(i, n), Ga: hi(t, 'SegmentBase') || e.Ga, $: hi(t, 'SegmentList') || e.$, Ha: hi(t, 'SegmentTemplate') || e.Ha, width: li(t, 'width', gi) || e.width, height: li(t, 'height', gi) || e.height, contentType: r, mimeType: s, codecs: t.getAttribute('codecs') || e.codecs, id: t.getAttribute('id') };
      } function bn(t) {
        const e = {}; t.forEach((t) => { e[t.id] = [t]; }), t.forEach((t) => { const i = e[t.id]; t.Vc.forEach((t) => { (t = e[t]) && t != i && (i.push(...t), t.forEach((t) => { e[t.id] = i; })); }); }); let i = [],
          n = []; return F(e).forEach((t) => { if (!(n.indexOf(t) >= 0)) { n.push(t); const e = new D(); t.forEach((t) => { e.push(t.contentType || '', t); }), e.keys().forEach((t) => { const n = new D(); e.get(t).forEach((t) => { n.push(t.language, t); }), n.keys().forEach((e) => { const r = n.get(e); e = { language: e, type: t, primary: r.some(t => t.$b), drmInfos: r.map(t => t.drmInfos).reduce(_, []), streams: r.map(t => t.streams).reduce(_, []) }, i.push(e); }); }); } }), i;
      } function gn(t) { let e; return e = 0 + (t.Ga ? 1 : 0), e += t.$ ? 1 : 0, (e += t.Ha ? 1 : 0) ? (e != 1 && (t.Ga && (t.$ = null), t.Ha = null), !0) : t.contentType == 'text' || t.contentType == 'application'; } function vn(t, e, i, n) { return e = _i(e, [i]), e = M(e, t.c.retryParameters), e.method = n, t.a.request(0, e).then((t) => { if (n == 'HEAD') { if (!t.headers || !t.headers.date) return 0; t = t.headers.date; } else t = H(t.data); return t = Date.parse(t), isNaN(t) ? 0 : t - Date.now(); }); } function yn(t, e, i, n) { i = i.map(t => ({ scheme: t.getAttribute('schemeIdUri'), value: t.getAttribute('value') })); const r = t.c.dash.clockSyncUri; return n && !i.length && r && i.push({ scheme: 'urn:mpeg:dash:utc:http-head:2014', value: r }), S(i, function (t) { const i = t.value; switch (t.scheme) { case 'urn:mpeg:dash:utc:http-head:2014':case 'urn:mpeg:dash:utc:http-head:2012':return vn(this, e, i, 'HEAD'); case 'urn:mpeg:dash:utc:http-xsdate:2014':case 'urn:mpeg:dash:utc:http-iso:2014':case 'urn:mpeg:dash:utc:http-xsdate:2012':case 'urn:mpeg:dash:utc:http-iso:2012':return vn(this, e, i, 'GET'); case 'urn:mpeg:dash:utc:direct:2014':case 'urn:mpeg:dash:utc:direct:2012':return t = Date.parse(i), isNaN(t) ? 0 : t - Date.now(); case 'urn:mpeg:dash:utc:http-ntp:2014':case 'urn:mpeg:dash:utc:ntp:2014':case 'urn:mpeg:dash:utc:sntp:2014':return Promise.reject(); default:return Promise.reject(); } }.bind(t)).catch(() => 0); } function Tn(t, e) {
        let i = H(t),
          n = [],
          r = new DOMParser(),
          s = null; try { s = r.parseFromString(i, 'text/xml'); } catch (a) { throw new E(2, 2005); } if (s) {
          let o,
            h; if (!(i = s.getElementsByTagName('tt')[0])) throw new E(2, 2006); for (r = i.getAttribute('ttp:frameRate'), s = i.getAttribute('ttp:subFrameRate'), o = i.getAttribute('ttp:frameRateMultiplier'), h = i.getAttribute('ttp:tickRate'), r = new wn(r, s, o, h), s = Tn.b(i.getElementsByTagName('styling')[0]), o = Tn.b(i.getElementsByTagName('layout')[0]), i = Tn.b(i.getElementsByTagName('body')[0]), h = 0; h < i.length; h++) { const u = Tn.c(i[h], e, r, s, o); u && n.push(u); }
        } return n;
      } function wn(t, e, i, n) { this.a = Number(t) || 30, this.c = Number(e) || 1, this.b = Number(n), this.b || (this.b = t ? this.a * this.c : 1), i && (t = /^(\d+) (\d+)$/g.exec(i)) && (this.a *= t[1] / t[2]); } function kn(t, e) {
        let i = new Pi(new DataView(t)),
          n = Bi(1835295092, i); if (n != -1) return Tn(Oi(i, n - 8).buffer, e); if (Fi(t, kn.J) != -1) return []; throw new E(2, 2007);
      } function En(t) { this.b = t, this.a = 0; } function Sn(t, e) { let i; return e.lastIndex = t.a, i = (i = e.exec(t.b)) ? { position: i.index, length: i[0].length, Bc: i } : null, t.a != t.b.length && i && i.position == t.a ? (t.a += i.length, i.Bc) : null; } function _n(t) { return t.a == t.b.length ? null : (t = Sn(t, /[^ \t\n]*/gm)) ? t[0] : null; } function In(t, e) {
        var i = H(t),
          i = i.replace(/\r\n|\r(?=[^\n]|$)/gm, '\n'),
          i = i.split(/\n{2,}/m); if (!/^WEBVTT($|[ \t\n])/m.test(i[0])) throw new E(2, 2e3); for (var n = [], r = 1; r < i.length; r++) { const s = In.c(i[r].split('\n'), e); s && n.push(s); } return n;
      } function xn(t, e, i, n) {
        let r = new Pi(new DataView(t)),
          s = Bi(1835295092, r); if (s != -1) return xn.qa(Oi(r, s - 8).buffer, e, i, n); if (Fi(t, xn.ma) != -1) return []; throw new E(2, 2008);
      } function An(t, e) { return new Promise(((i, n) => { const r = new XMLHttpRequest(); r.open(e.method, t, !0), r.responseType = 'arraybuffer', r.timeout = e.retryParameters.timeout, r.withCredentials = e.allowCrossSiteCredentials, r.onload = function (e) { if (e = e.target, e.status >= 200 && e.status <= 299) { var r = e.getAllResponseHeaders().split('\r\n').reduce((t, e) => { const i = e.split(': '); return t[i[0].toLowerCase()] = i.slice(1).join(': '), t; }, {}); e.Ac && (t = e.Ac), i({ uri: t, data: e.response, headers: r }); } else { r = null; try { r = G(e.response); } catch (s) {}n(new E(1, 1001, t, e.status, r)); } }, r.onerror = function () { n(new E(1, 1002, t)); }, r.ontimeout = function () { n(new E(1, 1003, t)); }; for (const s in e.headers)r.setRequestHeader(s, e.headers[s]); r.send(e.body); })); } function Pn() { this.a = null, this.c = [], this.b = {}; } function Cn(t, e, i) { return Rn(t, e, 'readwrite', t => t.put(i)); } function Nn(t, e) {
        const i = []; return Rn(t, 'segment', 'readwrite', t => t.openCursor(), (t) => {
          if (t) {
            if (e(t.value)) {
              let n = t.delete(),
                r = new P(); n.onsuccess = r.resolve, n.onerror = Dn.bind(null, n, r), i.push(r);
            }t.continue();
          }
        }).then(() => Promise.all(i)).then(() => i.length);
      } function Mn(t, e) { let i = 0; return Rn(t, e, 'readonly', t => t.openCursor(null, 'prev'), (t) => { t && (i = t.key + 1); }).then(() => i); } function Rn(t, e, i, n, r) {
        i = t.a.transaction([e], i); let s = n(i.objectStore(e)),
          a = new P(); r && (s.onsuccess = function (t) { r(t.target.result); }), s.onerror = Dn.bind(null, s, a); const o = { transaction: i, I: a }; t.c.push(o); const h = function () { this.c.splice(this.c.indexOf(o), 1); }.bind(t); return i.oncomplete = function () { h(), a.resolve(s.result); }, i.onerror = function (t) { h(), Dn(s, a, t); }, a;
      } function Dn(t, e, i) { t.error.name == 'AbortError' ? e.reject(new E(9, 9002)) : e.reject(new E(9, 9001, t.error)), i.preventDefault(); } function On(t) { return { offlineUri: `offline:${t.key}`, originalManifestUri: t.originalManifestUri, duration: t.duration, size: t.size, tracks: t.periods[0].streams.map(t => ({ id: t.id, active: !1, type: t.contentType, bandwidth: 0, language: t.language, kind: t.kind || null, width: t.width, height: t.height })), appMetadata: t.appMetadata }; } function Ln() {} function jn(t) { const e = new Lt(null, 0); e.za(t.duration); const i = t.drmInfo ? [t.drmInfo] : []; return { presentationTimeline: e, minBufferTime: 10, offlineSessionIds: t.sessionIds, periods: t.periods.map(t => ({ startTime: t.startTime, streamSets: t.streams.map((n) => { let r = n.segments.map((t, e) => new zt(e, t.startTime, t.endTime, (() => [t.uri]), 0, null)); return e.Ea(t.startTime, r), r = new Vi(r), { language: n.language, type: n.contentType, primary: n.primary, drmInfos: i, streams: [{ id: n.id, createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition: r.find.bind(r), getSegmentReference: r.get.bind(r), initSegmentReference: n.initSegmentUri ? new Gt((() => [n.initSegmentUri]), 0, null) : null, presentationTimeOffset: n.presentationTimeOffset, mimeType: n.mimeType, codecs: n.codecs, bandwidth: 0, width: n.width || void 0, height: n.height || void 0, kind: n.kind, encrypted: n.encrypted, keyId: n.keyId, allowedByApplication: !0, allowedByKeySystem: !0 }] }; }) })) }; } function Un(t, e, i) { this.b = {}, this.i = i, this.m = t, this.l = e, this.j = this.a = null, this.f = this.g = this.h = this.c = 0; } function Bn(t, e, i, n, r) { t.b[e] = t.b[e] || [], t.b[e].push({ uris: i.a(), L: i.L, D: i.D, jb: n, Ca: r }); } function Fn(t, e) {
        t.c = 0, t.h = 0, t.g = 0, t.f = 0, F(t.b).forEach(function (t) { t.forEach((t) => { t.D != null ? this.c += t.D - t.L + 1 : this.g += t.jb; }); }.bind(t)), t.a = e, t.a.size = t.c; const i = F(t.b).map(function (t) {
          var e = 0,
            i = function () { if (!this.i) return Promise.reject(new E(9, 9002)); if (e >= t.length) return Promise.resolve(); const n = t[e++]; return Kn(this, n).then(i); }.bind(this); return i();
        }.bind(t)); return t.b = {}, t.j = Promise.all(i);
      } function Kn(t, e) {
        const i = M(e.uris, t.l); (e.L || e.D != null) && (i.headers.Range = `bytes=${e.L}-${e.D == null ? '' : e.D}`); let n; return t.m.request(1, i).then(function (t) { return this.a ? (n = t.data.byteLength, e.Ca(t.data)) : Promise.reject(new E(9, 9002)); }.bind(t)).then(function () {
          if (!this.a) return Promise.reject(new E(9, 9002)); e.D == null ? (this.a.size += n, this.f += e.jb) : this.h += n; let t = (this.h + this.f) / (this.c + this.g),
            i = On(this.a); this.i.progressCallback(i, t);
        }.bind(t));
      } function Vn(t) { this.a = new Pn(), this.c = t, this.j = Gn(this), this.g = null, this.v = !1, this.i = null, this.l = [], this.f = -1, this.m = 0, this.b = null, this.h = new Un(t.h, t.getConfiguration().streaming.retryParameters, this.j); } function Hn() { return !!t.indexedDB; } function qn(t, e, i, n) {
        function r() {} let s,
          a,
          o,
          h = t.c.h,
          u = t.c.getConfiguration(); return vt(e, h, u.manifest.retryParameters, n).then(function (t) { return Jn(this), o = new t(), o.configure(u.manifest), o.start(e, h, this.s.bind(this), i); }.bind(t)).then(function (t) { return Jn(this), s = t, a = new it(h, i, r), a.configure(u.drm), a.init(s, !0); }.bind(t)).then(function () { return Jn(this), Yn(s); }.bind(t)).then(function () { return Jn(this), st(a); }.bind(t)).then(function () { return Jn(this), o.stop(); }.bind(t)).then(function () { return Jn(this), { manifest: s, Qb: a }; }.bind(t)).catch((t) => { if (o) return o.stop().then(() => { throw t; }); throw t; });
      } function Gn(t) { return { trackSelectionCallback: t.A.bind(t), progressCallback(t, e) { if (t || e) return null; } }; } function zn(t) { return t.a.a ? Promise.resolve() : t.a.init(ds); } function Wn(t) { const e = t.g ? t.g.o() : Promise.resolve(); return t.g = null, t.b = null, t.v = !1, t.i = null, t.l = [], t.f = -1, e; } function Yn(t) { return t = t.periods.map(t => t.streamSets).reduce(_, []).map(t => t.streams).reduce(_, []), Promise.all(t.map(t => t.createSegmentIndex())); } function $n(t, e, i, n) { for (var r = [], s = t.b.presentationTimeline.ra(), a = s, o = n.findSegmentPosition(s), h = o != null ? n.getSegmentReference(o) : null; h;) { var u = t.a.b.segment++; Bn(t.h, i.type, h, (h.endTime - h.startTime) * n.bandwidth / 8, function (t, e, i, n) { return e = { key: t, data: n, manifestKey: this.f, streamNumber: i, segmentNumber: e }, this.l.push(t), Cn(this.a, 'segment', e); }.bind(t, u, h.position, n.id)), r.push({ startTime: h.startTime, endTime: h.endTime, uri: `offline:${t.f}/${n.id}/${u}` }), a = h.endTime + e.startTime, h = n.getSegmentReference(++o); } return t.m = Math.max(t.m, a - s), e = null, n.initSegmentReference && (u = t.a.b.segment++, e = `offline:${t.f}/${n.id}/${u}`, Bn(t.h, i.type, n.initSegmentReference, 0, function (t, e) { const i = { key: u, data: e, manifestKey: this.f, streamNumber: t, segmentNumber: -1 }; return this.l.push(u), Cn(this.a, 'segment', i); }.bind(t, n.id))), { id: n.id, primary: i.primary, presentationTimeOffset: n.presentationTimeOffset || 0, contentType: i.type, mimeType: n.mimeType, codecs: n.codecs, kind: n.kind, language: i.language, width: n.width || null, height: n.height || null, initSegmentUri: e, encrypted: n.encrypted, keyId: n.keyId, segments: r }; } function Jn(t) { if (!t.c) throw new E(9, 9002); } function Xn(t) { fs.push(t); } function Qn(t) {
        var e = t.type.replace(/^(webkit|moz|MS)/, '').toLowerCase(),
          e = new Event(e, t); t.target.dispatchEvent(e);
      } function Zn(t) {
        for (this.c = [], this.b = [], this.a = [], t = new Pi(new DataView(t.buffer)); Ci(t);) {
          const e = Bi(1886614376, t); if (e == -1) break; var i = t.a - 8,
            n = Ni(t); if (n > 1)Li(t, e - (t.a - i)); else {
            Li(t, 3); let r = tt(Oi(t, 16)),
              s = []; if (n > 0) for (var n = Ri(t), a = 0; a < n; ++a) { const o = tt(Oi(t, 16)); s.push(o); }n = Ri(t), Li(t, n), this.b.push.apply(this.b, s), this.c.push(r), this.a.push({ start: i, end: t.a - 1 }), t.a != i + e && Li(t, e - (t.a - i));
          }
        }
      } function tr(t, e) { try { const i = new er(t, e); return Promise.resolve(i); } catch (n) { return Promise.reject(n); } } function er(t, e) {
        this.keySystem = t; for (var i = !1, n = 0; n < e.length; ++n) {
          var r = e[n],
            s = { audioCapabilities: [], videoCapabilities: [], persistentState: 'optional', distinctiveIdentifier: 'optional', initDataTypes: r.initDataTypes, sessionTypes: ['temporary'], label: r.label },
            a = !1; if (r.audioCapabilities) {
            for (var o = 0; o < r.audioCapabilities.length; ++o) {
              var h = r.audioCapabilities[o]; if (h.contentType) {
                var a = !0,
                  u = h.contentType.split(';')[0]; MSMediaKeys.isTypeSupported(this.keySystem, u) && (s.audioCapabilities.push(h), i = !0);
              }
            }
          } if (r.videoCapabilities) for (o = 0; o < r.videoCapabilities.length; ++o)h = r.videoCapabilities[o], h.contentType && (a = !0, u = h.contentType.split(';')[0], MSMediaKeys.isTypeSupported(this.keySystem, u) && (s.videoCapabilities.push(h), i = !0)); if (a || (i = MSMediaKeys.isTypeSupported(this.keySystem, 'video/mp4')), r.persistentState == 'required' && (s.persistentState = 'required', s.sessionTypes = ['persistent-license']), i) return void (this.a = s);
        } throw i = Error('Unsupported keySystem'), i.name = 'NotSupportedError', i.code = DOMException.NOT_SUPPORTED_ERR, i;
      } function ir(t) { const e = this.mediaKeys; return e && e != t && rr(e, null), delete this.mediaKeys, (this.mediaKeys = t) ? rr(t, this) : Promise.resolve(); } function nr(t) { this.a = new MSMediaKeys(t), this.b = new O(); } function rr(t, e) { function i() { e.msSetMediaKeys(n.a), e.removeEventListener('loadedmetadata', i); } if (j(t.b), !e) return Promise.resolve(); L(t.b, e, 'msneedkey', ar); var n = t; try { return e.readyState >= 1 ? e.msSetMediaKeys(t.a) : e.addEventListener('loadedmetadata', i), Promise.resolve(); } catch (r) { return Promise.reject(r); } } function sr(t) { _e.call(this), this.c = null, this.g = t, this.b = this.a = null, this.f = new O(), this.sessionId = '', this.expiration = NaN, this.closed = new P(), this.keyStatuses = new ur(); } function ar(t) { const e = document.createEvent('CustomEvent'); if (e.initCustomEvent('encrypted', !1, !1, null), e.initDataType = 'cenc', t = t.initData) { let i = new Zn(t); if (!(i.a.length <= 1)) { for (var n = [], r = 0; r < i.a.length; r++)n.push(t.subarray(i.a[r].start, i.a[r].end + 1)); for (r = or, t = [], i = 0; i < n.length; ++i) { for (var s = !1, a = 0; a < t.length && !(s = r ? r(n[i], t[a]) : n[i] === t[a]); ++a);s || t.push(n[i]); } for (r = n = 0; r < t.length; r++)n += t[r].length; for (n = new Uint8Array(n), r = i = 0; r < t.length; r++)n.set(t[r], i), i += t[r].length; t = n; } }e.initData = t, this.dispatchEvent(e); } function or(t, e) { return et(t, e); } function hr(t, e) { t.keyStatuses.cb(e), t.dispatchEvent(new Se('keystatuseschange')); } function ur() { this.size = 0, this.a = void 0; } function cr() { return Promise.reject(Error('The key system specified is not supported.')); } function lr(t) { return t ? Promise.reject(Error('MediaKeys not supported.')) : Promise.resolve(); } function dr() { throw new TypeError('Illegal constructor.'); } function fr() { throw new TypeError('Illegal constructor.'); } function pr(t, e) { try { const i = new br(t, e); return Promise.resolve(i); } catch (n) { return Promise.reject(n); } } function mr(t) { const e = this.mediaKeys; return e && e != t && vr(e, null), delete this.mediaKeys, (this.mediaKeys = t) && vr(t, this), Promise.resolve(); } function br(t, e) {
        this.a = this.keySystem = t; let i = !0; t == 'org.w3.clearkey' && (this.a = 'webkit-org.w3.clearkey', i = !1); let n,
          r = !1; n = document.getElementsByTagName('video'), n = n.length ? n[0] : document.createElement('video'); for (let s = 0; s < e.length; ++s) {
          let a = e[s],
            o = { audioCapabilities: [], videoCapabilities: [], persistentState: 'optional', distinctiveIdentifier: 'optional', initDataTypes: a.initDataTypes, sessionTypes: ['temporary'], label: a.label },
            h = !1; if (a.audioCapabilities) for (var u = 0; u < a.audioCapabilities.length; ++u) { var c = a.audioCapabilities[u]; c.contentType && (h = !0, n.canPlayType(c.contentType.split(';')[0], this.a) && (o.audioCapabilities.push(c), r = !0)); } if (a.videoCapabilities) for (u = 0; u < a.videoCapabilities.length; ++u)c = a.videoCapabilities[u], c.contentType && (h = !0, n.canPlayType(c.contentType, this.a) && (o.videoCapabilities.push(c), r = !0)); if (h || (r = n.canPlayType('video/mp4', this.a) || n.canPlayType('video/webm', this.a)), a.persistentState == 'required' && (i ? (o.persistentState = 'required', o.sessionTypes = ['persistent-license']) : r = !1), r) return void (this.b = o);
        } throw i = 'Unsupported keySystem', t != 'org.w3.clearkey' && t != 'com.widevine.alpha' || (i = 'None of the requested configurations were supported.'), i = Error(i), i.name = 'NotSupportedError', i.code = DOMException.NOT_SUPPORTED_ERR, i;
      } function gr(t) { this.g = t, this.b = null, this.a = new O(), this.c = [], this.f = {}; } function vr(t, e) { t.b = e, j(t.a), e && (L(t.a, e, 'webkitneedkey', t.pc.bind(t)), L(t.a, e, 'webkitkeymessage', t.oc.bind(t)), L(t.a, e, 'webkitkeyadded', t.mc.bind(t)), L(t.a, e, 'webkitkeyerror', t.nc.bind(t))); } function yr(t, e) { let i = t.f[e]; return i || ((i = t.c.shift()) ? (i.sessionId = e, t.f[e] = i) : null); } function Tr(t, e, i) { _e.call(this), this.f = t, this.h = !1, this.a = this.b = null, this.c = e, this.g = i, this.sessionId = '', this.expiration = NaN, this.closed = new P(), this.keyStatuses = new Er(); } function wr(t, e, i) {
        if (t.h) return Promise.reject(Error('The session is already initialized.')); t.h = !0; let n; try {
          if (t.g == 'persistent-license') {
            if (i)n = new Uint8Array(z(`LOAD_SESSION|${i}`)); else {
              let r = z('PERSISTENT|'),
                s = new Uint8Array(r.byteLength + e.byteLength); s.set(new Uint8Array(r), 0), s.set(new Uint8Array(e), r.byteLength), n = s;
            }
          } else n = new Uint8Array(e);
        } catch (a) { return Promise.reject(a); }t.b = new P(); try { t.f.webkitGenerateKeyRequest(t.c, n); } catch (a) { if (a.name != 'InvalidStateError') return t.b = null, Promise.reject(a); setTimeout(function () { try { this.f.webkitGenerateKeyRequest(this.c, n); } catch (t) { this.b.reject(t), this.b = null; } }.bind(t), 10); } return t.b;
      } function kr(t, e) { t.keyStatuses.cb(e), t.dispatchEvent(new Se('keystatuseschange')); } function Er() { this.size = 0, this.a = void 0; } function Sr(t) { if (this.c = [], this.b = [], this.ja = bs, t) try { t(this.W.bind(this), this.a.bind(this)); } catch (e) { this.a(e); } } function _r(t) { const e = new Sr(); return e.W(t), e; } function Ir(t) { const e = new Sr(); return e.a(t), e; } function xr(t) { function e(t, e, i) { t.ja == bs && (r[e] = i, n++, n == r.length && t.W(r)); } const i = new Sr(); if (!t.length) return i.W([]), i; for (var n = 0, r = Array(t.length), s = i.a.bind(i), a = 0; a < t.length; ++a)t[a] && t[a].then ? t[a].then(e.bind(null, i, a), s) : e(i, a, t[a]); return i; } function Ar(t) { for (var e = new Sr(), i = e.W.bind(e), n = e.a.bind(e), r = 0; r < t.length; ++r)t[r] && t[r].then ? t[r].then(i, n) : i(t[r]); return e; } function Pr(t, e, i) { vs.push(function () { if (i && typeof i === 'function') { try { var t = i(this.Oa); } catch (n) { return void e.a(n); } let r; try { r = t && t.then; } catch (n) { return void e.a(n); }t instanceof Sr ? t == e ? e.a(new TypeError('Chaining cycle detected')) : t.then(e.W.bind(e), e.a.bind(e)) : r ? Cr(t, r, e) : e.W(t); } else this.ja == 1 ? e.W(this.Oa) : e.a(this.Oa); }.bind(t)), gs == null && (gs = Mr(Nr)); } function Cr(t, e, i) { try { let n = !1; e.call(t, (t) => { if (!n) { n = !0; let e; try { e = t && t.then; } catch (r) { return void i.a(r); }e ? Cr(t, e, i) : i.W(t); } }, i.a.bind(i)); } catch (r) { i.a(r); } } function Nr() { for (;vs.length;) { gs != null && (Rr(gs), gs = null); const t = vs; vs = []; for (let e = 0; e < t.length; ++e)t[e](); } } function Mr() { return 0; } function Rr() {} function Dr() { return { droppedVideoFrames: this.webkitDroppedFrameCount, totalVideoFrames: this.webkitDecodedFrameCount, corruptedVideoFrames: 0, creationTime: NaN, totalFrameDelay: 0 }; } var Or,
        Lr = this; Lr.bd = !0, e('shaka.abr.SimpleAbrManager', c), Or = c.prototype, Or.stop = function () { this.h = null, this.f = !1, this.g = {}, this.a = {}, this.b = null; }, Or.init = function (t) { this.h = t; }, Or.chooseStreams = function (t) { for (var e in t) this.g[e] = t[e]; if (e = {}, 'audio' in t) { var i = l(this); i ? (e.audio = i, this.a.audio = i) : delete this.a.audio; } return 'video' in t && ((i = d(this)) ? (e.video = i, this.a.video = i) : delete this.a.video), 'text' in t && (e.text = t.text.streams[0]), this.b = Date.now(), e; }, Or.enable = function () { this.f = !0; }, Or.disable = function () { this.f = !1; }, Or.segmentDownloaded = function (t, e, i) { let n = this.c; if (t = e - t, i < 65536 || (t = Math.max(t, 50), i = 8e3 * i / t, t /= 1e3, r(n.a, t, i), r(n.c, t, i)), this.b != null && this.f)t: { if (n = Date.now() - this.b, this.i) { if (n < 8e3) break t; } else { if (n < 4e3) break t; this.i = !0; }n = this.a.video, i = {}, (t = l(this)) && (i.audio = t, this.a.audio = t), (t = d(this)) && (i.video = t, this.a.video = t), this.b = Date.now(), t = void 0, n && i.video && i.video.bandwidth > n.bandwidth && (t = 10), this.h(i, t); } }, Or.getBandwidthEstimate = function () { return o(this.c); }, Or.setDefaultEstimate = function (t) { this.c.b = t; }; var jr = /^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/; Or = p.prototype, Or.R = '', Or.la = '', Or.T = '', Or.wa = null, Or.O = '', Or.ea = '', Or.toString = function () {
        let t = [],
          e = this.R; if (e && t.push(y(e, Ur, !0), ':'), e = this.T) { t.push('//'); const i = this.la; i && t.push(y(i, Ur, !0), '@'), t.push(encodeURIComponent(e).replace(/%25([0-9a-fA-F]{2})/g, '%$1')), e = this.wa, e != null && t.push(':', String(e)); } return (e = this.O) && (this.T && e.charAt(0) != '/' && t.push('/'), t.push(y(e, e.charAt(0) == '/' ? Fr : Br, !0))), (e = this.a.toString()) && t.push('?', e), (e = this.ea) && t.push('#', y(e, Vr)), t.join('');
      }, Or.resolve = function (t) { let e = new p(this); e.R === 'data' && (e = new p()); let i = !!t.R; i ? m(e, t.R) : i = !!t.la, i ? e.la = t.la : i = !!t.T, i ? e.T = t.T : i = t.wa != null; var n = t.O; if (i)b(e, t.wa); else if (i = !!t.O) { if (n.charAt(0) != '/') if (this.T && !this.O)n = `/${n}`; else { var r = e.O.lastIndexOf('/'); r != -1 && (n = e.O.substr(0, r + 1) + n); } if (n == '..' || n == '.')n = ''; else if (n.indexOf('./') != -1 || n.indexOf('/.') != -1) { for (var r = !n.lastIndexOf('/', 0), n = n.split('/'), s = [], a = 0; a < n.length;) { const o = n[a++]; o == '.' ? r && a == n.length && s.push('') : o == '..' ? ((s.length > 1 || s.length == 1 && s[0] != '') && s.pop(), r && a == n.length && s.push('')) : (s.push(o), r = !0); }n = s.join('/'); } } return i ? e.O = n : i = t.a.toString() !== '', i ? g(e, k(t.a)) : i = !!t.ea, i && (e.ea = t.ea), e; }; var Ur = /[#\/\?@]/g,
        Br = /[\#\?:]/g,
        Fr = /[\#\?]/g,
        Kr = /[\#\?@]/g,
        Vr = /#/g; w.prototype.a = null, w.prototype.c = null, w.prototype.toString = function () {
        if (this.b) return this.b; if (!this.a) return ''; let t,
          e = []; for (t in this.a) for (let i = encodeURIComponent(t), n = this.a[t], r = 0; r < n.length; r++) { let s = i; n[r] !== '' && (s += `=${encodeURIComponent(n[r])}`), e.push(s); } return this.b = e.join('&');
      }, e('shaka.util.Error', E), E.prototype.toString = function () { return `shaka.util.Error ${JSON.stringify(this, null, '  ')}`; }, E.Category = { NETWORK: 1, TEXT: 2, MEDIA: 3, MANIFEST: 4, STREAMING: 5, DRM: 6, PLAYER: 7, CAST: 8, STORAGE: 9 }, E.Code = { UNSUPPORTED_SCHEME: 1e3, BAD_HTTP_STATUS: 1001, HTTP_ERROR: 1002, TIMEOUT: 1003, MALFORMED_DATA_URI: 1004, UNKNOWN_DATA_URI_ENCODING: 1005, INVALID_TEXT_HEADER: 2e3, INVALID_TEXT_CUE: 2001, INVALID_TEXT_SETTINGS: 2002, UNABLE_TO_DETECT_ENCODING: 2003, BAD_ENCODING: 2004, INVALID_XML: 2005, INVALID_TTML: 2006, INVALID_MP4_TTML: 2007, INVALID_MP4_VTT: 2008, BUFFER_READ_OUT_OF_BOUNDS: 3e3, JS_INTEGER_OVERFLOW: 3001, EBML_OVERFLOW: 3002, EBML_BAD_FLOATING_POINT_SIZE: 3003, MP4_SIDX_WRONG_BOX_TYPE: 3004, MP4_SIDX_INVALID_TIMESCALE: 3005, MP4_SIDX_TYPE_NOT_SUPPORTED: 3006, WEBM_CUES_ELEMENT_MISSING: 3007, WEBM_EBML_HEADER_ELEMENT_MISSING: 3008, WEBM_SEGMENT_ELEMENT_MISSING: 3009, WEBM_INFO_ELEMENT_MISSING: 3010, WEBM_DURATION_ELEMENT_MISSING: 3011, WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012, WEBM_CUE_TIME_ELEMENT_MISSING: 3013, MEDIA_SOURCE_OPERATION_FAILED: 3014, MEDIA_SOURCE_OPERATION_THREW: 3015, VIDEO_ERROR: 3016, QUOTA_EXCEEDED_ERROR: 3017, UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3, DASH_INVALID_XML: 4001, DASH_NO_SEGMENT_INFO: 4002, DASH_EMPTY_ADAPTATION_SET: 4003, DASH_EMPTY_PERIOD: 4004, DASH_WEBM_MISSING_INIT: 4005, DASH_UNSUPPORTED_CONTAINER: 4006, DASH_PSSH_BAD_ENCODING: 4007, DASH_NO_COMMON_KEY_SYSTEM: 4008, DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009, DASH_CONFLICTING_KEY_IDS: 4010, UNPLAYABLE_PERIOD: 4011, RESTRICTIONS_CANNOT_BE_MET: 4012, INTERNAL_ERROR_KEY_STATUS: 4013, INVALID_STREAMS_CHOSEN: 5005, NO_RECOGNIZED_KEY_SYSTEMS: 6e3, REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001, FAILED_TO_CREATE_CDM: 6002, FAILED_TO_ATTACH_TO_VIDEO: 6003, INVALID_SERVER_CERTIFICATE: 6004, FAILED_TO_CREATE_SESSION: 6005, FAILED_TO_GENERATE_LICENSE_REQUEST: 6006, LICENSE_REQUEST_FAILED: 6007, LICENSE_RESPONSE_REJECTED: 6008, ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010, NO_LICENSE_SERVER_GIVEN: 6012, OFFLINE_SESSION_REMOVED: 6013, EXPIRED: 6014, LOAD_INTERRUPTED: 7e3, CAST_API_UNAVAILABLE: 8e3, NO_CAST_RECEIVERS: 8001, ALREADY_CASTING: 8002, UNEXPECTED_CAST_ERROR: 8003, CAST_CANCELED_BY_USER: 8004, CAST_CONNECTION_TIMED_OUT: 8005, CAST_RECEIVER_APP_UNAVAILABLE: 8006, INDEXED_DB_NOT_SUPPORTED: 9e3, INDEXED_DB_ERROR: 9001, OPERATION_ABORTED: 9002, REQUESTED_ITEM_NOT_FOUND: 9003, MALFORMED_OFFLINE_URI: 9004, CANNOT_STORE_LIVE_OFFLINE: 9005, STORE_ALREADY_IN_PROGRESS: 9006, NO_INIT_DATA_FOR_OFFLINE: 9007 }, e('shaka.net.NetworkingEngine.RequestType', { MANIFEST: 0, SEGMENT: 1, LICENSE: 2 }); const Hr = {}; e('shaka.net.NetworkingEngine.registerScheme', (t, e) => { Hr[t] = e; }), e('shaka.net.NetworkingEngine.unregisterScheme', (t) => { delete Hr[t]; }), C.prototype.vc = function (t) { this.b.push(t); }, C.prototype.registerRequestFilter = C.prototype.vc, C.prototype.Xc = function (t) { const e = this.b; t = e.indexOf(t), t >= 0 && e.splice(t, 1); }, C.prototype.unregisterRequestFilter = C.prototype.Xc, C.prototype.Ob = function () { this.b = []; }, C.prototype.clearAllRequestFilters = C.prototype.Ob, C.prototype.yb = function (t) { this.c.push(t); }, C.prototype.registerResponseFilter = C.prototype.yb, C.prototype.Jb = function (t) { const e = this.c; t = e.indexOf(t), t >= 0 && e.splice(t, 1); }, C.prototype.unregisterResponseFilter = C.prototype.Jb, C.prototype.Pb = function () { this.c = []; }, C.prototype.clearAllResponseFilters = C.prototype.Pb, C.prototype.o = function () { this.f = !0, this.b = [], this.c = []; for (var t = [], e = 0; e < this.a.length; ++e)t.push(this.a[e].catch(I)); return Promise.all(t); }, C.prototype.request = function (t, e) { if (this.f) return Promise.reject(); for (var i = Date.now(), n = this.b, r = 0; r < n.length; r++) try { n[r](t, e); } catch (s) { return Promise.reject(s); } for (var r = e.retryParameters || {}, n = r.maxAttempts || 1, a = r.backoffFactor || 2, o = r.baseDelay == null ? 1e3 : r.baseDelay, h = this.g(t, e, 0), r = 1; r < n; r++)h = h.catch(this.i.bind(this, t, e, o, r % e.uris.length)), o *= a; return this.a.push(h), h.then((e) => { this.a.splice(this.a.indexOf(h), 1); const n = Date.now(); return this.h && t == 1 && this.h(i, n, e.data.byteLength), e; }).catch(t => this.a.splice(this.a.indexOf(h), 1), Promise.reject(t)); }, C.prototype.request = C.prototype.request, C.prototype.g = function (t, e, i) {
        if (this.f) return Promise.reject(); let n = new p(e.uris[i]),
          r = n.R; return r || (r = location.protocol, r = r.slice(0, -1), m(n, r), e.uris[i] = n.toString()), (r = Hr[r]) ? r(e.uris[i], e).then((e) => { for (let i = this.c, n = 0; n < i.length; n++)i[n](t, e); return e; }) : Promise.reject(new E(1, 1e3, n));
      }, C.prototype.i = function (e, i, n, r) {
        let s = new P(),
          a = i.retryParameters || {}; return t.setTimeout(s.resolve, n * (1 + (2 * Math.random() - 1) * (a.fuzzFactor == null ? 0.5 : a.fuzzFactor))), s.then(this.g.bind(this, e, i, r));
      }, Or = D.prototype, Or.push = function (t, e) { this.a.hasOwnProperty(t) ? this.a[t].push(e) : this.a[t] = [e]; }, Or.set = function (t, e) { this.a[t] = e; }, Or.has = function (t) { return this.a.hasOwnProperty(t); }, Or.get = function (t) { return (t = this.a[t]) ? t.slice() : null; }, Or.remove = function (t, e) { const i = this.a[t]; if (i) for (let n = 0; n < i.length; ++n)i[n] == e && (i.splice(n, 1), --n); }, Or.keys = function () {
        let t,
          e = []; for (t in this.a)e.push(t); return e;
      }, Or.clear = function () { this.a = {}; }, O.prototype.o = function () { return j(this), this.a = null, Promise.resolve(); }, O.prototype.ka = function (t, e) { for (let i = this.a.get(e) || [], n = 0; n < i.length; ++n) { const r = i[n]; r.target == t && (r.ka(), this.a.remove(e, r)); } }, U.prototype.ka = function () { this.target && (this.target.removeEventListener(this.type, this.a, !1), this.a = this.target = null); }, Or = it.prototype, Or.o = function () { this.c = !0; const t = this.a.map(t => t.ya.close().catch(I), t.ya.closed); return this.j.reject(), this.g && t.push(this.g.o()), this.l && t.push(this.l.setMediaKeys(null).catch(I)), this.v && $(this.v), this.g = this.l = this.h = this.m = this.b = this.v = null, this.a = [], this.s = [], this.f = this.i = this.G = null, Promise.all(t); }, Or.configure = function (t) { this.i = t; }, Or.init = function (t, e) {
        let i = {},
          n = []; return this.C = e, this.s = t.offlineSessionIds, ot(this, t, e || t.offlineSessionIds.length > 0, i, n), n.length ? ht(this, i, n) : (this.A = !0, Promise.resolve());
      }, Or.keySystem = function () { return this.b ? this.b.keySystem : ''; }, Or.bc = function (t) { for (var e = new Uint8Array(t.initData), i = 0; i < this.a.length; ++i) if (et(e, this.a[i].initData)) return; pt(this, t.initDataType, e); }, Or.vb = function (t) {
        let e = t.target,
          i = M([this.b.licenseServerUri], this.i.retryParameters); i.body = t.message, i.method = 'POST', this.b.keySystem == 'com.microsoft.playready' && mt(i), this.G.request(2, i).then(t => (this.c ? Promise.reject() : e.update(t.data)), t => (this.c ? Promise.resolve() : void this.f(new E(6, 6007, t)))).catch(t => (this.c ? Promise.resolve() : void this.f(new E(6, 6008, t.message))));
      }, Or.qb = function (t) {
        t = t.target; let e; for (e = 0; e < this.a.length && this.a[e].ya != t; ++e);if (e != this.a.length) {
          let i = t.keyStatuses,
            n = !1; i.forEach || (i = []), i.forEach((t, i) => {
            if (typeof i === 'string') { var r = i; i = t, t = r; } if (this.b.keySystem == 'com.microsoft.playready' && i.byteLength == 16) {
              var r = new DataView(i),
                s = r.getUint32(0, !0),
                a = r.getUint16(4, !0),
                o = r.getUint16(6, !0); r.setUint32(0, s, !1), r.setUint16(4, a, !1), r.setUint16(6, o, !1);
            } this.b.keySystem == 'com.microsoft.playready' && t == 'status-pending' && (t = 'usable'), t != 'status-pending' && t != 'internal-error' && (this.a[e].loaded = !0, this.a.every(t => t.loaded) && this.j.resolve()), t == 'expired' && (n = !0), r = tt(new Uint8Array(i)), t == 'internal-error' && this.f(new E(6, 4013, r)), this.w[r] = t;
          }), i = t.expiration - Date.now(), (i < 0 || n && i < 1e3) && (this.a.splice(e, 1), t.close()), J(this.v);
        }
      }, Or.uc = function () { V(this.w, (t, e) => e == 'expired') && this.f(new E(6, 6014)), this.J(this.w); }; var qr = {},
        Gr = {}; e('shaka.media.ManifestParser.registerParserByExtension', (t, e) => { Gr[t] = e; }), e('shaka.media.ManifestParser.registerParserByMime', (t, e) => { qr[t] = e; }); var zr = {}; e('shaka.media.TextEngine.registerParser', (t, e) => { zr[t] = e; }), e('shaka.media.TextEngine.unregisterParser', (t) => { delete zr[t]; }), e('shaka.media.TextEngine.makeCue', Tt);
      var Wr = t.VTTCue || t.TextTrackCue; yt.prototype.o = function () { return this.c && Et(this, () => !0), this.c = this.g = null, Promise.resolve(); }, yt.prototype.remove = function (t, e) { return Promise.resolve().then(() => { Et(this, i => !(i.startTime >= e || i.endTime <= t)), this.b == null || e <= this.b || t >= this.a || (t <= this.b && e >= this.a ? this.b = this.a = null : t <= this.b && e < this.a ? this.b = e : t > this.b && e >= this.a && (this.a = t)); }); }, Or = _t.prototype, Or.o = function () {
        this.h = !0; let t,
          e = []; for (t in this.a) {
          let i = this.a[t],
            n = i[0]; for (this.a[t] = i.slice(0, 1), n && e.push(n.p.catch(I)), n = 1; n < i.length; ++n)i[n].p.catch(I), i[n].p.reject();
        } return this.b && e.push(this.b.o()), Promise.all(e).then(() => { this.g.o(), this.b = this.j = this.f = this.i = this.g = null, this.c = {}, this.a = {}; });
      }, Or.init = function (t) { for (const e in t) { let i = t[e]; e == 'text' ? this.b = new yt(this.j, i) : (i = this.f.addSourceBuffer(i), L(this.g, i, 'error', this.Rc.bind(this, e)), L(this.g, i, 'updateend', this.Fa.bind(this, e)), this.c[e] = i, this.a[e] = []); } }, Or.remove = function (t, e, i) { return t == 'text' ? this.b.remove(e, i) : Promise.all([Rt(this, t, this.Ab.bind(this, t, e, i)), Rt(this, t, this.ib.bind(this, t))]); }, Or.clear = function (t) { return t == 'text' ? this.b.remove(0, 1 / 0) : Rt(this, t, this.Ab.bind(this, t, 0, this.f.duration)); }, Or.endOfStream = function (t) { return Dt(this, () => { t ? this.f.endOfStream(t) : this.f.endOfStream(); }); }, Or.za = function (t) { return Dt(this, () => { this.f.duration = t; }); }, Or.Z = function () { return this.f.duration; }, Or.Qc = function (t, e) { this.c[t].appendBuffer(e); }, Or.Ab = function (t, e, i) { i <= e ? this.Fa(t) : this.c[t].remove(e, i); }, Or.ib = function (t) { const e = this.c[t].appendWindowEnd; this.c[t].abort(), this.c[t].appendWindowEnd = e, this.Fa(t); }, Or.Gc = function (t, e) { this.c[t].timestampOffset = e, this.Fa(t); }, Or.Ec = function (t, e) { this.c[t].appendWindowEnd = e + 0.04, this.Fa(t); }, Or.Rc = function (t) { this.a[t][0].p.reject(new E(3, 3014, this.i.error ? this.i.error.code : 0)); }, Or.Fa = function (t) { const e = this.a[t][0]; e && (e.p.resolve(), Ot(this, t)); }, e('shaka.media.PresentationTimeline', Lt), Lt.prototype.Z = function () { return this.a; }, Lt.prototype.getDuration = Lt.prototype.Z, Lt.prototype.za = function (t) { this.a = t; }, Lt.prototype.setDuration = Lt.prototype.za, Lt.prototype.Eb = function (t) { this.h = t; }, Lt.prototype.setClockOffset = Lt.prototype.Eb, Lt.prototype.Hb = function (t) { this.g = t; }, Lt.prototype.setStatic = Lt.prototype.Hb, Lt.prototype.Ub = function () { return this.c; }, Lt.prototype.getSegmentAvailabilityDuration = Lt.prototype.Ub, Lt.prototype.Gb = function (t) { this.c = t; }, Lt.prototype.setSegmentAvailabilityDuration = Lt.prototype.Gb, Lt.prototype.Ea = function (t, e) { e.length && (this.b = e.reduce((t, e) => Math.max(t, e.endTime - e.startTime), this.b), t || (this.f = Math.max(this.f, e[0].startTime))); }, Lt.prototype.notifySegments = Lt.prototype.Ea, Lt.prototype.Xa = function (t) { this.b = Math.max(this.b, t); }, Lt.prototype.notifyMaxSegmentDuration = Lt.prototype.Xa, Lt.prototype.U = function () { return 1 / 0 == this.a && !this.g; }, Lt.prototype.isLive = Lt.prototype.U, Lt.prototype.ga = function () { return 1 / 0 != this.a && !this.g; }, Lt.prototype.isInProgress = Lt.prototype.ga, Lt.prototype.ra = function () { return Math.max(Math.min(this.f, this.fa()), this.sa()); }, Lt.prototype.getEarliestStart = Lt.prototype.ra, Lt.prototype.sa = function () { return 1 / 0 == this.c ? 0 : Math.max(0, this.fa() - this.c - this.i); }, Lt.prototype.getSegmentAvailabilityStart = Lt.prototype.sa, Lt.prototype.fa = function () { return this.U() || this.ga() ? Math.min(Math.max(0, (Date.now() + this.h) / 1e3 - this.b - this.j), this.a) : this.a; }, Lt.prototype.getSegmentAvailabilityEnd = Lt.prototype.fa, Lt.prototype.Ta = function () { return Math.max(0, this.fa() - (this.U() || this.ga() ? this.i : 0)); }, Lt.prototype.getSeekRangeEnd = Lt.prototype.Ta, Or = jt.prototype, Or.o = function () { const e = this.b.o(); return this.b = null, this.f != null && (t.clearInterval(this.f), this.f = null), this.l = this.j = this.c = this.a = null, e; }, Or.Sa = function () { return this.g; }, Or.ic = function () { this.a.playbackRate != (this.h || this.g < 0 ? 0 : this.g) && Kt(this, this.a.playbackRate); }, Or.rb = function () { this.b.ka(this.a, 'loadedmetadata'); const t = Bt(this); Math.abs(this.a.currentTime - t) < 0.001 ? (L(this.b, this.a, 'seeking', this.tb.bind(this)), L(this.b, this.a, 'playing', this.sb.bind(this))) : (L(this.b, this.a, 'seeking', this.kc.bind(this)), this.a.currentTime = t); }, Or.kc = function () { this.b.ka(this.a, 'seeking'), L(this.b, this.a, 'seeking', this.tb.bind(this)), L(this.b, this.a, 'playing', this.sb.bind(this)); }, Or.tb = function () {
        let t = this.a.currentTime,
          e = Vt(this, t); Math.abs(e - t) > 0.001 ? Ht(this, t, e) : this.l();
      }, Or.sb = function () {
        let t = this.a.currentTime,
          e = Vt(this, t); Math.abs(e - t) > 0.001 && Ht(this, t, e);
      }, e('shaka.media.InitSegmentReference', Gt), e('shaka.media.SegmentReference', zt), Wt.prototype.o = function () { for (const t in this.b)ye(this.b[t]); return this.g = this.b = this.m = this.h = this.C = this.A = this.l = this.w = this.J = this.G = this.a = this.S = this.c = this.i = null, this.f = !0, Promise.resolve(); }, Wt.prototype.configure = function (t) { this.g = t, this.i.i = this.j * Math.max(this.a.minBufferTime || 0, this.g.rebufferingGoal); }, Wt.prototype.init = function () { const t = this.J(this.a.periods[pe(this, Ut(this.i))]); return B(t) ? Promise.reject(new E(5, 5005)) : Zt(this, t).then(() => { this.A && this.A(); }); }, Wt.prototype.X = function (t) { if (!this.f && !t.ha && t.ba != null && !t.da) if (t.ba = null, t.ca)ge(this, t, t.Ka); else { try { var e = ne(this, t); e != null && ve(this, t, e); } catch (i) { return void this.l(i); }e = F(this.b), Ft(this.i, e.some(t => t.va)), de(this, t), e.every(t => t.endOfStream) && this.c.endOfStream(); } }, Te.prototype.then = function (t) { return this.a = this.a.then(t).then(t => (this.c ? (this.h(), Promise.reject(this.i)) : Promise.resolve(t))), this; }, Se.prototype.preventDefault = function () {}, Se.prototype.stopImmediatePropagation = function () { this.a = !0; }, Se.prototype.stopPropagation = function () {}, _e.prototype.addEventListener = function (t, e) { this.Aa.push(t, e); }, _e.prototype.removeEventListener = function (t, e) { this.Aa.remove(t, e); }, _e.prototype.dispatchEvent = function (t) { for (let e = this.Aa.get(t.type) || [], i = 0; i < e.length; ++i) { t.target = this.S, t.currentTarget = this.S; const n = e[i]; try { n.handleEvent ? n.handleEvent(t) : n.call(this, t); } catch (r) {} if (t.a) break; } return t.defaultPrevented; }; var Yr = 1,
        $r = 2,
        Jr = { aar: 'aa', abk: 'ab', afr: 'af', aka: 'ak', alb: 'sq', amh: 'am', ara: 'ar', arg: 'an', arm: 'hy', asm: 'as', ava: 'av', ave: 'ae', aym: 'ay', aze: 'az', bak: 'ba', bam: 'bm', baq: 'eu', bel: 'be', ben: 'bn', bih: 'bh', bis: 'bi', bod: 'bo', bos: 'bs', bre: 'br', bul: 'bg', bur: 'my', cat: 'ca', ces: 'cs', cha: 'ch', che: 'ce', chi: 'zh', chu: 'cu', chv: 'cv', cor: 'kw', cos: 'co', cre: 'cr', cym: 'cy', cze: 'cs', dan: 'da', deu: 'de', div: 'dv', dut: 'nl', dzo: 'dz', ell: 'el', eng: 'en', epo: 'eo', est: 'et', eus: 'eu', ewe: 'ee', fao: 'fo', fas: 'fa', fij: 'fj', fin: 'fi', fra: 'fr', fre: 'fr', fry: 'fy', ful: 'ff', geo: 'ka', ger: 'de', gla: 'gd', gle: 'ga', glg: 'gl', glv: 'gv', gre: 'el', grn: 'gn', guj: 'gu', hat: 'ht', hau: 'ha', heb: 'he', her: 'hz', hin: 'hi', hmo: 'ho', hrv: 'hr', hun: 'hu', hye: 'hy', ibo: 'ig', ice: 'is', ido: 'io', iii: 'ii', iku: 'iu', ile: 'ie', ina: 'ia', ind: 'id', ipk: 'ik', isl: 'is', ita: 'it', jav: 'jv', jpn: 'ja', kal: 'kl', kan: 'kn', kas: 'ks', kat: 'ka', kau: 'kr', kaz: 'kk', khm: 'km', kik: 'ki', kin: 'rw', kir: 'ky', kom: 'kv', kon: 'kg', kor: 'ko', kua: 'kj', kur: 'ku', lao: 'lo', lat: 'la', lav: 'lv', lim: 'li', lin: 'ln', lit: 'lt', ltz: 'lb', lub: 'lu', lug: 'lg', mac: 'mk', mah: 'mh', mal: 'ml', mao: 'mi', mar: 'mr', may: 'ms', mkd: 'mk', mlg: 'mg', mlt: 'mt', mon: 'mn', mri: 'mi', msa: 'ms', mya: 'my', nau: 'na', nav: 'nv', nbl: 'nr', nde: 'nd', ndo: 'ng', nep: 'ne', nld: 'nl', nno: 'nn', nob: 'nb', nor: 'no', nya: 'ny', oci: 'oc', oji: 'oj', ori: 'or', orm: 'om', oss: 'os', pan: 'pa', per: 'fa', pli: 'pi', pol: 'pl', por: 'pt', pus: 'ps', que: 'qu', roh: 'rm', ron: 'ro', rum: 'ro', run: 'rn', rus: 'ru', sag: 'sg', san: 'sa', sin: 'si', slk: 'sk', slo: 'sk', slv: 'sl', sme: 'se', smo: 'sm', sna: 'sn', snd: 'sd', som: 'so', sot: 'st', spa: 'es', sqi: 'sq', srd: 'sc', srp: 'sr', ssw: 'ss', sun: 'su', swa: 'sw', swe: 'sv', tah: 'ty', tam: 'ta', tat: 'tt', tel: 'te', tgk: 'tg', tgl: 'tl', tha: 'th', tib: 'bo', tir: 'ti', ton: 'to', tsn: 'tn', tso: 'ts', tuk: 'tk', tur: 'tr', twi: 'tw', uig: 'ug', ukr: 'uk', urd: 'ur', uzb: 'uz', ven: 've', vie: 'vi', vol: 'vo', wel: 'cy', wln: 'wa', wol: 'wo', xho: 'xh', yid: 'yi', yor: 'yo', zha: 'za', zho: 'zh', zul: 'zu' }; i(Le), e('shaka.Player', Le), Le.prototype.o = function () { this.w = !0; let t = Promise.resolve(); return this.j && (t = ke(this.j, new E(7, 7e3))), t.then(() => { const t = Promise.all([Be(this), this.v ? this.v.o() : null, this.h ? this.h.o() : null]); return this.a = this.h = this.hb = this.v = this.m = this.f = null, t; }); }, Le.prototype.destroy = Le.prototype.o, Le.version = 'v2.0.0'; const Xr = {}; Le.registerSupportPlugin = function (t, e) { Xr[t] = e; }, Le.isBrowserSupported = function () { return !!(t.Promise && t.Uint8Array && Array.prototype.forEach && t.MediaSource && t.MediaKeys && t.navigator && t.navigator.requestMediaKeySystemAccess && t.MediaKeySystemAccess && t.MediaKeySystemAccess.prototype.getConfiguration); }, Le.probeSupport = function () {
        return bt().then((t) => {
          let e = gt(),
            i = It(); t = { manifest: e, media: i, drm: t }; for (const n in Xr)t[n] = Xr[n](); return t;
        });
      }, Le.prototype.load = function (t, e, i) {
        let n = this.gb(),
          r = new Te(); return this.j = r, this.dispatchEvent(new Se('loading')), we(r.then(() => n).then(() => vt(t, this.h, this.a.manifest.retryParameters, i)).then(e => this.l = new e(), this.l.configure(this.a.manifest), this.l.start(t, this.h, this.Na.bind(this), this.aa.bind(this), this.Ic.bind(this))).then(e => this.c = e, this.na = t, this.g = new it(this.h, this.aa.bind(this), this.Jc.bind(this)), this.g.configure(this.a.drm), this.g.init(e, !1)).then(() => this.c.periods.forEach(this.Na.bind(this)), this.X = Date.now() / 1e3, Promise.all([nt(this.g, this.f), this.oa])).then(() => this.i = new jt(this.f, this.c.presentationTimeline, 1 * Math.max(this.c.minBufferTime || 0, this.a.streaming.rebufferingGoal), e || null, this.Ib.bind(this), this.Kc.bind(this)), this.G = new _t(this.f, this.A, this.m), this.b = new Wt(this.i, this.G, this.h, this.c, this.Hc.bind(this), this.Mb.bind(this), this.aa.bind(this)), this.b.configure(this.a.streaming), this.b.init()).then(() => { this.c.periods.forEach(this.Na.bind(this)), We(this), ze(this), this.a.abr.manager.init(this.eb.bind(this)), this.j = null; })).catch(t => this.j == r && (this.j = null, this.dispatchEvent(new Se('unloading'))), Promise.reject(t));
      }, Le.prototype.load = Le.prototype.load, Le.prototype.configure = function (t) { t.abr && t.abr.manager && t.abr.manager != this.a.abr.manager && (this.a.abr.manager.stop(), t.abr.manager.init(this.eb.bind(this))), Ee(this.a, t, Ke(this), Fe(), ''), Ue(this); }, Le.prototype.configure = Le.prototype.configure, Le.prototype.getConfiguration = function () { const t = Ke(this); return Ee(t, this.a, Ke(this), Fe(), ''), t; }, Le.prototype.getConfiguration = Le.prototype.getConfiguration, Le.prototype.zc = function () { const t = Ke(this); t.abr && t.abr.manager && t.abr.manager != this.a.abr.manager && (this.a.abr.manager.stop(), t.abr.manager.init(this.eb.bind(this))), this.a = Ke(this), Ue(this); }, Le.prototype.resetConfiguration = Le.prototype.zc, Le.prototype.nb = function () { return this.h; }, Le.prototype.getNetworkingEngine = Le.prototype.nb, Le.prototype.Sb = function () { return this.na; }, Le.prototype.getManifestUri = Le.prototype.Sb, Le.prototype.U = function () { return !!this.c && this.c.presentationTimeline.U(); }, Le.prototype.isLive = Le.prototype.U, Le.prototype.ga = function () { return !!this.c && this.c.presentationTimeline.ga(); }, Le.prototype.isInProgress = Le.prototype.ga, Le.prototype.Cc = function () {
        let t = 0,
          e = 0; return this.c && (e = this.c.presentationTimeline, t = e.sa(), e = e.Ta()), { start: t, end: e };
      }, Le.prototype.seekRange = Le.prototype.Cc, Le.prototype.keySystem = function () { return this.g ? this.g.keySystem() : ''; }, Le.prototype.keySystem = Le.prototype.keySystem, Le.prototype.drmInfo = function () { return this.g ? this.g.b : null; }, Le.prototype.drmInfo = Le.prototype.drmInfo, Le.prototype.Wb = function () { return this.Pa; }, Le.prototype.isBuffering = Le.prototype.Wb, Le.prototype.gb = function () { if (this.w) return Promise.resolve(); if (this.dispatchEvent(new Se('unloading')), this.j) { const t = new E(7, 7e3); return ke(this.j, t).then(this.Bb.bind(this)); } return this.Bb(); }, Le.prototype.unload = Le.prototype.gb, Le.prototype.Sa = function () { return this.i ? this.i.Sa() : 0; }, Le.prototype.getPlaybackRate = Le.prototype.Sa, Le.prototype.Wc = function (t) { this.i && Kt(this.i, t); }, Le.prototype.trickPlay = Le.prototype.Wc, Le.prototype.Nb = function () { this.i && Kt(this.i, 1); }, Le.prototype.cancelTrickPlay = Le.prototype.Nb, Le.prototype.getTracks = function () { if (!this.b) return []; const t = $t(this.b); return Ce(Yt(this.b), t).filter(t => this.ma.indexOf(t.id) < 0); }, Le.prototype.getTracks = Le.prototype.getTracks, Le.prototype.Dc = function (t, e) { if (this.b) { let i = Ne(Yt(this.b), t); if (i && (i = i.stream, i.allowedByApplication && i.allowedByKeySystem)) { this.C.push({ timestamp: Date.now() / 1e3, id: i.id, type: t.type, fromAdaptation: !1 }), t.type != 'text' && this.configure({ abr: { enabled: !1 } }); const n = {}; n[t.type] = i, Ve(this, n, e); } } }, Le.prototype.selectTrack = Le.prototype.Dc, Le.prototype.Zb = function () { return this.m.mode == 'showing'; }, Le.prototype.isTextTrackVisible = Le.prototype.Zb, Le.prototype.Fc = function (t) { this.m.mode = t ? 'showing' : 'hidden', Ye(this); }, Le.prototype.setTextTrackVisibility = Le.prototype.Fc, Le.prototype.getStats = function () {
        He(this); let t = {},
          e = {},
          i = this.f && this.f.getVideoPlaybackQuality ? this.f.getVideoPlaybackQuality() : {}; return this.b && (e = $t(this.b), t = e.video || {}, e = e.audio || {}), { width: t.width || 0, height: t.height || 0, streamBandwidth: t.bandwidth + e.bandwidth || 0, decodedFrames: Number(i.totalVideoFrames), droppedFrames: Number(i.droppedVideoFrames), estimatedBandwidth: this.a.abr.manager.getBandwidthEstimate(), playTime: this.pa, bufferingTime: this.J, switchHistory: this.C.slice(0) };
      }, Le.prototype.getStats = Le.prototype.getStats, Le.prototype.addTextTrack = function (t, e, i, n, r) { if (!this.b) return Promise.reject(); for (var s, a = Yt(this.b), o = 0; o < this.c.periods.length; o++) if (this.c.periods[o] == a) { if (o == this.c.periods.length - 1) { if (s = this.c.presentationTimeline.Z() - a.startTime, 1 / 0 == s) return Promise.reject(); } else s = this.c.periods[o + 1].startTime - a.startTime; break; } const h = { id: this.Kb++, createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition() { return 1; }, getSegmentReference(e) { return e != 1 ? null : new zt(1, 0, s, (() => [t]), 0, null); }, initSegmentReference: null, presentationTimeOffset: 0, mimeType: n, codecs: r || '', bandwidth: 0, kind: i, encrypted: !1, keyId: null, language: e, allowedByApplication: !0, allowedByKeySystem: !0 }; return n = { language: e, type: 'text', primary: !1, drmInfos: [], streams: [h] }, this.ma.push(h.id), a.streamSets.push(n), Jt(this.b, h).then(() => { if (!this.w) return this.ma.splice(this.ma.indexOf(h.id), 1), Ge(this, a), We(this), { id: h.id, active: !1, type: 'text', bandwidth: 0, language: e, kind: i, width: null, height: null }; }); }, Le.prototype.addTextTrack = Le.prototype.addTextTrack, Le.prototype.Fb = function (t, e) { this.Ba.width = t, this.Ba.height = e; }, Le.prototype.setMaxHardwareResolution = Le.prototype.Fb, Or = Le.prototype, Or.Bb = function () { return this.l ? Be(this).then(() => { this.w || (this.Ib(!1), this.oa = je(this)); }) : Promise.resolve(); }, Or.Na = function (t) { let e = this.b ? $t(this.b) : {}; Pe(this.g, e, t), e = t.streamSets.some(Me), Ae(t, this.a.restrictions, this.Ba) && !this.j && We(this), t = !t.streamSets.some(Me), e ? t && this.aa(new E(4, 4012)) : this.aa(new E(4, 4011)); }, Or.Lc = function (t, e, i) { this.a.abr.manager.segmentDownloaded(t, e, i); }, Or.Ib = function (t) { He(this), this.Pa = t, this.dispatchEvent(new Se('buffering', { buffering: t })); }, Or.Kc = function () {
        if (this.b) {
          let t,
            e = this.b; for (t in e.b) { const i = e.b[t]; i.da || At(e.c, t, Ut(e.i)) > 0 || i.ca || (i.ha ? Qt(i, 0) : xt(e.c, t) == null ? i.ba == null && ve(e, i, 0) : (ye(i), ge(e, i, 0))); }
        }
      }, Or.Hc = function (t) { this.qa = !0, this.a.abr.manager.disable(), t = Re(t, this.a), t = qe(this, t, !0); for (var e in this.s)t[e] = this.s[e].stream; this.s = {}; for (e in t) this.C.push({ timestamp: Date.now() / 1e3, id: t[e].id, type: e, fromAdaptation: !0 }); return this.j || We(this), t; }, Or.Mb = function () { this.qa = !1, this.a.abr.enabled && this.a.abr.manager.enable(); for (const t in this.s) { const e = this.s[t]; Xt(this.b, t, e.stream, e.clear ? 0 : void 0); } this.s = {}; }, Or.eb = function (t, e) {
        let i,
          n = $t(this.b); for (i in t) { const r = t[i]; n[i] != r ? this.C.push({ timestamp: Date.now() / 1e3, id: r.id, type: i, fromAdaptation: !0 }) : delete t[i]; } if (!B(t) && this.b) { for (i in t)Xt(this.b, i, t[i], i == 'video' ? e : void 0); ze(this); }
      }, Or.aa = function (t) { this.dispatchEvent(new Se('error', { detail: t })); }, Or.Ic = function (t) { this.dispatchEvent(t); }, Or.lc = function () { if (this.f.error) { const t = this.f.error.code; if (t != 1) { let e = this.f.error.msExtendedCode; e && (e < 0 && (e += Math.pow(2, 32)), e = e.toString(16)), this.aa(new E(3, 3016, t, e)); } } }, Or.Jc = function (t) {
        let e = Yt(this.b),
          i = !1; e.streamSets.forEach((e) => { e.streams.forEach((e) => { const n = e.allowedByKeySystem; e.keyId && e.keyId in t && (e.allowedByKeySystem = t[e.keyId] != 'output-restricted'), n != e.allowedByKeySystem && (i = !0); }); }), Ge(this, e), i && We(this);
      }; var Qr = 'ended play playing pause pausing ratechange seeked seeking timeupdate volumechange'.split(' '),
        Zr = 'buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume'.split(' '),
        ts = ['loop', 'playbackRate'],
        es = ['pause', 'play'],
        is = ['adaptation', 'buffering', 'error', 'texttrackvisibility', 'trackschanged'],
        ns = 'getConfiguration getManifestUri getPlaybackRate getTracks getStats isBuffering isLive isTextTrackVisible seekRange'.split(' '),
        rs = [['getConfiguration', 'configure']],
        ss = [['isTextTrackVisible', 'setTextTrackVisibility']],
        as = 'configure resetConfiguration trickPlay cancelTrickPlay selectTrack setTextTrackVisibility addTextTrack'.split(' '),
        os = ['load', 'unload']; Or = Qe.prototype, Or.o = function () { return Ze(this), this.a && (this.a.stop(() => {}, () => {}), this.a = null), this.A = this.w = this.l = null, this.f = this.j = this.h = !1, this.g = this.c = this.b = this.a = this.i = null, Promise.resolve(); }, Or.N = function () { return this.f; }, Or.$a = function () { return this.v; }, Or.init = function () {
        if (t.chrome && chrome.cast && chrome.cast.isAvailable) {
          delete t.__onGCastApiAvailable, this.h = !0, this.l(); var e = new chrome.cast.SessionRequest(this.C),
            e = new chrome.cast.ApiConfig(e, this.cc.bind(this), this.jc.bind(this), 'origin_scoped'); chrome.cast.initialize(e, () => {}, () => {});
        } else t.__onGCastApiAvailable = function (t) { t && this.init(); }.bind(this);
      }, Or.bb = function (t) { this.i = t, this.f && ti(this, { type: 'appData', appData: this.i }); }, Or.cast = function (t) { return this.h ? this.j ? this.f ? Promise.reject(new E(8, 8002)) : (this.g = new P(), chrome.cast.requestSession(this.Ya.bind(this, t), this.ob.bind(this)), this.g) : Promise.reject(new E(8, 8001)) : Promise.reject(new E(8, 8e3)); }, Or.get = function (t, e) { if (t == 'video') { if (es.indexOf(e) >= 0) return this.zb.bind(this, t, e); } else if (t == 'player') { if (as.indexOf(e) >= 0) return this.zb.bind(this, t, e); if (os.indexOf(e) >= 0) return this.xc.bind(this, t, e); if (ns.indexOf(e) >= 0) return this.wb.bind(this, t, e); } return this.wb(t, e); }, Or.set = function (t, e, i) { this.b[t][e] = i, ti(this, { type: 'set', targetName: t, property: e, value: i }); }, Or.Ya = function (t, e) { this.a = e, this.a.addUpdateListener(this.pb.bind(this)), this.a.addMessageListener('urn:x-cast:com.google.shaka.v2', this.dc.bind(this)), this.pb(), ti(this, { type: 'init', initState: t, appData: this.i }), this.g.resolve(); }, Or.ob = function (t) { let e = 8003; switch (t.code) { case 'cancel':e = 8004; break; case 'timeout':e = 8005; break; case 'receiver_unavailable':e = 8006; } this.g.reject(new E(8, e, t)); }, Or.wb = function (t, e) { return this.b[t][e]; }, Or.zb = function (t, e) { ti(this, { type: 'call', targetName: t, methodName: e, args: Array.prototype.slice.call(arguments, 2) }); }, Or.xc = function (t, e) {
        let i = Array.prototype.slice.call(arguments, 2),
          n = new P(),
          r = this.m.toString(); return this.m++, this.c[r] = n, ti(this, { type: 'asyncCall', targetName: t, methodName: e, args: i, id: r }), n;
      }, Or.cc = function (t) { const e = this.s(); this.g = new P(), this.Ya(e, t); }, Or.jc = function (t) { this.j = t == 'available', this.l(); }, Or.pb = function () { const t = !!this.a && this.a.status == 'connected'; if (this.f && !t) { this.A(); for (const e in this.b) this.b[e] = {}; Ze(this); } this.v = (this.f = t) ? this.a.receiver.friendlyName : '', this.l(); }, Or.dc = function (t, e) {
        var i = Je(e); switch (i.type) {
          case 'event':var n = i.targetName,
            r = i.event; this.w(n, new Se(r.type, r)); break; case 'update':r = i.update; for (n in r) {
            var s,
              i = this.b[n] || {}; for (s in r[n])i[s] = r[n][s];
          } break; case 'asyncComplete':if (n = i.id, s = i.error, i = this.c[n], delete this.c[n], i) if (s) { n = new E(s.category, s.code); for (r in s)n[r] = s[r]; i.reject(n); } else i.resolve();
        }
      }, i(ei), e('shaka.cast.CastProxy', ei), ei.prototype.o = function () { const t = [this.h ? this.h.o() : null, this.b ? this.b.o() : null, this.a ? this.a.o() : null]; return this.a = this.h = this.i = this.j = this.b = this.c = null, Promise.all(t); }, ei.prototype.destroy = ei.prototype.o, ei.prototype.Vb = function () { return this.j; }, ei.prototype.getVideo = ei.prototype.Vb, ei.prototype.Tb = function () { return this.i; }, ei.prototype.getPlayer = ei.prototype.Tb, ei.prototype.Lb = function () { return !!this.a && (this.a.h && this.a.j); }, ei.prototype.canCast = ei.prototype.Lb, ei.prototype.N = function () { return !!this.a && this.a.N(); }, ei.prototype.isCasting = ei.prototype.N, ei.prototype.$a = function () { return this.a ? this.a.$a() : ''; }, ei.prototype.receiverName = ei.prototype.$a, ei.prototype.cast = function () { const t = this.mb(); return this.a.cast(t).then(() => this.b.gb()); }, ei.prototype.cast = ei.prototype.cast, ei.prototype.bb = function (t) { this.a.bb(t); }, ei.prototype.setAppData = ei.prototype.bb, ei.prototype.Uc = function () { const t = this.a; if (t.f) { const e = t.s(); chrome.cast.requestSession(t.Ya.bind(t, e), t.ob.bind(t)); } }, ei.prototype.suggestDisconnect = ei.prototype.Uc, Or = ei.prototype, Or.mb = function () { const t = { video: {}, player: {}, playerAfterLoad: {}, manifest: this.b.na, startTime: null }; return this.c.pause(), ts.forEach((e) => { t.video[e] = this.c[e]; }), this.c.ended || (t.startTime = this.c.currentTime), rs.forEach((e) => { const i = e[1]; e = this.b[e[0]](), t.player[i] = e; }), ss.forEach((e) => { const i = e[1]; e = this.b[e[0]](), t.playerAfterLoad[i] = e; }), t; }, Or.Mc = function () { this.dispatchEvent(new Se('caststatuschanged')); }, Or.Oc = function () {
        rs.forEach((t) => { const e = t[1]; t = this.a.get('player', t[0])(), this.b[e](t); }); let t = this.a.get('player', 'getManifestUri')(),
          e = this.a.get('video', 'ended'),
          i = Promise.resolve(),
          n = this.c.autoplay,
          r = null; e || (r = this.a.get('video', 'currentTime')), t && (this.c.autoplay = !1, i = this.b.load(t, r), i.catch((t) => { this.b.dispatchEvent(new Se('error', { detail: t })); })); const s = {}; ts.forEach((t) => { s[t] = this.a.get('video', t); }), i.then(() => { ts.forEach((t) => { this.c[t] = s[t]; }), ss.forEach((t) => { const e = t[1]; t = this.a.get('player', t[0])(), this.b[e](t); }), this.c.autoplay = n, t && this.c.play(); });
      }, Or.Zc = function (t) { if (t == 'addEventListener') return this.g.addEventListener.bind(this.g); if (t == 'removeEventListener') return this.g.removeEventListener.bind(this.g); if (this.a.N() && !Object.keys(this.a.b.video).length) { var e = this.c[t]; if (typeof e !== 'function') return e; } return this.a.N() ? this.a.get('video', t) : (e = this.c[t], typeof e === 'function' && (e = e.bind(this.c)), e); }, Or.ad = function (t, e) { this.a.N() ? this.a.set('video', t, e) : this.c[t] = e; }, Or.$c = function (t) { this.a.N() || this.g.dispatchEvent(new Se(t.type, t)); }, Or.sc = function (t) { return t == 'addEventListener' ? this.f.addEventListener.bind(this.f) : t == 'removeEventListener' ? this.f.removeEventListener.bind(this.f) : t == 'getNetworkingEngine' ? this.b.nb.bind(this.b) : this.a.N() && !Object.keys(this.a.b.video).length && ns.indexOf(t) >= 0 || !this.a.N() ? (t = this.b[t], t.bind(this.b)) : this.a.get('player', t); }, Or.tc = function (t) { this.a.N() || this.f.dispatchEvent(t); }, Or.Nc = function (t, e) { this.a.N() && (t == 'video' ? this.g.dispatchEvent(e) : t == 'player' && this.f.dispatchEvent(e)); }, i(ni), e('shaka.cast.CastReceiver', ni), ni.prototype.Xb = function () { return this.h; }, ni.prototype.isConnected = ni.prototype.Xb, ni.prototype.Yb = function () { return this.g; }, ni.prototype.isIdle = ni.prototype.Yb, ni.prototype.o = function () { const e = this.a ? this.a.o() : Promise.resolve(); return this.c != null && t.clearTimeout(this.c), this.j = this.i = this.a = this.b = null, this.h = !1, this.g = !0, this.c = this.f = null, e.then(() => { cast.receiver.CastReceiverManager.getInstance().stop(); }); }, ni.prototype.destroy = ni.prototype.o, Or = ni.prototype, Or.ub = function () { this.h = !!cast.receiver.CastReceiverManager.getInstance().getSenders().length, si(this); }, Or.xb = function (t, e) { this.Za(), oi(this, { type: 'event', targetName: t, event: e }); }, Or.Za = function () { this.c != null && t.clearTimeout(this.c), this.c = t.setTimeout(this.Za.bind(this), 500); const e = { video: {}, player: {} }; Zr.forEach((t) => { e.video[t] = this.b[t]; }), ns.forEach((t) => { e.player[t] = this.a[t](); }); const i = cast.receiver.CastReceiverManager.getInstance().getSystemVolume(); i && (e.video.volume = i.level, e.video.muted = i.muted), oi(this, { type: 'update', update: e }); }, Or.Rb = function () { const t = cast.receiver.CastReceiverManager.getInstance().getSystemVolume(); t && oi(this, { type: 'update', update: { video: { volume: t.level, muted: t.muted } } }), oi(this, { type: 'event', targetName: 'video', event: { type: 'volumechange' } }); }, Or.ec = function (t) {
        let e = Je(t.data); switch (e.type) {
          case 'init':ai(this, e.initState, e.appData), this.Za(); break; case 'appData':this.j(e.appData); break; case 'set':var i = e.targetName,
            n = e.property,
            r = e.value; if (i == 'video') { if (e = cast.receiver.CastReceiverManager.getInstance(), n == 'volume') { e.setSystemVolumeLevel(r); break; } if (n == 'muted') { e.setSystemVolumeMuted(r); break; } } this.i[i][n] = r; break; case 'call':i = e.targetName, n = e.methodName, r = e.args, i = this.i[i], i[n](...r); break; case 'asyncCall':i = e.targetName, n = e.methodName, r = e.args, e = e.id, t = t.senderId, i = this.i[i], i[n](...r).then(this.Db.bind(this, t, e, null), this.Db.bind(this, t, e));
        }
      }, Or.Db = function (t, e, i) { oi(this, { type: 'asyncComplete', id: e, error: i }, t); }; var hs = { 'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey', 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha', 'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready', 'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime' },
        us = 1 / 15,
        cs = 1; e('shaka.media.SegmentIndex', Vi), Vi.prototype.o = function () { return this.a = null, Promise.resolve(); }, Vi.prototype.destroy = Vi.prototype.o, Vi.prototype.find = function (t) { for (let e = this.a.length - 1; e >= 0; --e) { const i = this.a[e]; if (t >= i.startTime && t < i.endTime) return i.position; } return null; }, Vi.prototype.find = Vi.prototype.find, Vi.prototype.get = function (t) { return this.a.length ? (t -= this.a[0].position, t < 0 || t >= this.a.length ? null : this.a[t]) : null; }, Vi.prototype.get = Vi.prototype.get, Vi.prototype.Wa = function (t) {
        for (var e = [], i = 0, n = 0; i < this.a.length && n < t.length;) {
          var r = this.a[i],
            s = t[n]; r.startTime < s.startTime ? (e.push(r), i++) : (r.startTime > s.startTime || (Math.abs(r.endTime - s.endTime) > 0.1 ? e.push(s) : e.push(r), i++), n++);
        } for (;i < this.a.length;)e.push(this.a[i++]); if (e.length) for (i = e[e.length - 1].position + 1; n < t.length;)s = t[n++], s = new zt((i++), s.startTime, s.endTime, s.a, s.L, s.D), e.push(s); else e = t; this.a = e;
      }, Vi.prototype.merge = Vi.prototype.Wa, Vi.prototype.Ra = function (t) { for (var e = 0; e < this.a.length && !(this.a[e].endTime > t); ++e);this.a.splice(0, e); }, Vi.prototype.evict = Vi.prototype.Ra; let ls; Or = cn.prototype, Or.configure = function (t) { this.c = t; }, Or.start = function (t, e, i, n, r) { return this.g = [t], this.a = e, this.j = i, this.l = n, this.m = r, ln(this).then(() => this.a && pn(this, 0), this.b); }, Or.stop = function () { return this.a && this.a.Jb(this.Ja), this.c = this.m = this.l = this.j = this.a = null, this.g = [], this.b = null, this.h = [], this.i = {}, this.f != null && (t.clearTimeout(this.f), this.f = null), Promise.resolve(); }, Or.qc = function (t, e) {
        t.P = mn(e, t.K, null); var i = !1,
          n = ui(e, 'Role'),
          r = void 0; t.P.contentType == 'text' && (r = 'subtitle'); for (var s = 0; s < n.length; s++) { var a = n[s].getAttribute('schemeIdUri'); if (a == null || a == 'urn:mpeg:dash:role:2011') switch (a = n[s].getAttribute('value')) { case 'main':i = !0; break; case 'caption':case 'subtitle':r = a; } } var n = !!hi(e, 'InbandEventStream'),
          o = []; if (ui(e, 'SupplementalProperty').forEach((t) => { t.getAttribute('schemeIdURI') == 'http://dashif.org/descriptor/AdaptationSetSwitching' && (t = t.getAttribute('value')) && o.push(...t.split(',')); }), s = ui(e, 'ContentProtection'), s = vi(s, this.c.dash.customScheme), a = xe(e.getAttribute('lang') || 'und'), r = ui(e, 'Representation').map(this.rc.bind(this, t, s, r, a)).filter(t => !!t), !r.length) throw new E(4, 4003); if (!t.P.contentType) {
          let h = r[0].mimeType,
            u = r[0].codecs,
            c = h; u && (c += `; codecs="${u}"`), t.P.contentType = zr[c] ? 'text' : h.split('/')[0];
        } return { id: t.P.id || `__fake__${this.v++}`, contentType: t.P.contentType, language: a, $b: i, streams: r, drmInfos: s.drmInfos, Vc: o, Y: n };
      }, Or.rc = function (t, e, i, n, r) {
        if (t.u = mn(r, t.P, null), !gn(t.u)) return null; t.bandwidth = li(r, 'bandwidth', bi) || void 0; let s; if (s = this.yc.bind(this), t.u.Ga)s = Xi(t, s); else if (t.u.$)s = tn(t, this.i); else if (t.u.Ha)s = sn(t, s, this.i, !!this.b); else {
          let a = t.u.M,
            o = t.H.duration || 0; s = { createSegmentIndex: Promise.resolve.bind(Promise), findSegmentPosition(t) { return t >= 0 && t < o ? 1 : null; }, getSegmentReference(t) { return t != 1 ? null : new zt(1, 0, o, (() => a), 0, null); }, initSegmentReference: null, presentationTimeOffset: 0 };
        } return r = ui(r, 'ContentProtection'), r = yi(r, this.c.dash.customScheme, e), { id: this.v++, createSegmentIndex: s.createSegmentIndex, findSegmentPosition: s.findSegmentPosition, getSegmentReference: s.getSegmentReference, initSegmentReference: s.initSegmentReference, presentationTimeOffset: s.presentationTimeOffset, mimeType: t.u.mimeType, codecs: t.u.codecs, bandwidth: t.bandwidth, width: t.u.width, height: t.u.height, kind: i, encrypted: e.drmInfos.length > 0, keyId: r, language: n, allowedByApplication: !0, allowedByKeySystem: !0 };
      }, Or.Pc = function () { this.f = null; const t = Date.now(); ln(this).then(() => { this.a && pn(this, (Date.now() - t) / 1e3); }).catch((t) => { this.l(t), this.a && pn(this, 0); }); }, Or.yc = function (t, e, i) { return t = M(t, this.c.retryParameters), e != null && (t.headers.Range = `bytes=${e}-${i != null ? i : ''}`), this.a.request(1, t).then(t => t.data); }, Or.Ja = function (t, e) {
        if (t == 1) {
          var i = new Pi(new DataView(e.data)),
            n = Bi(1701671783, i); if (n != -1) {
            const r = i.a - 8 + n; if (Li(i, 4), n = ji(i), n == 'urn:mpeg:dash:event:2012')ln(this); else {
              var s = ji(i),
                a = Ri(i),
                o = Ri(i),
                h = Ri(i),
                u = Ri(i),
                i = Oi(i, r - i.a); this.m(new Se('emsg', { detail: { hd: n, value: s, Ia: a, gd: o, ed: h, id: u, fd: i } }));
            }
          }
        }
      }, Gr.mpd = cn, qr['application/dash+xml'] = cn, Tn.l = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, Tn.s = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/, Tn.m = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/, Tn.v = /^(\d*\.?\d*)f$/, Tn.A = /^(\d*\.?\d*)t$/, Tn.w = /^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/, Tn.j = /^(\d{1,2}|100)% (\d{1,2}|100)%$/, Tn.b = function (t) { let e = []; if (!t) return e; for (let i = t.childNodes, n = 0; n < i.length; n++) { let r = i[n].nodeName == 'span' && t.nodeName == 'p'; i[n].nodeType != Node.ELEMENT_NODE || i[n].nodeName == 'br' || r || (r = Tn.b(i[n]), e = e.concat(r)); } return e.length || e.push(t), e; }, Tn.c = function (t, e, i, n, r) {
        if (!t.hasAttribute('begin') && !t.hasAttribute('end') && t.textContent == '') return null; let s = Tn.a(t.getAttribute('begin'), i),
          a = Tn.a(t.getAttribute('end'), i); i = Tn.a(t.getAttribute('dur'), i); const o = t.textContent; if (a == null && i != null && (a = s + i), s == null || a == null) throw new E(2, 2001); return (e = Tt(s + e, a + e, o)) ? (r = Tn.h(t, 'region', r), Tn.na(e, t, r, n), e) : null;
      }, Tn.na = function (t, e, i, n) {
        let r,
          s = Tn.f(e, i, n, 'tts:textAlign'); s && (t.b = s), (s = Tn.f(e, i, n, 'tts:extent')) && (r = Tn.j.exec(s)) && (t.size = Number(r[1])), r = Tn.f(e, i, n, 'tts:writingMode'), s = !0, r == 'tb' || r == 'tblr' ? t.c = 'lr' : r == 'tbrl' ? t.c = 'rl' : s = !1, (e = Tn.f(e, i, n, 'tts:origin')) && (r = Tn.j.exec(e)) && (s ? (t.position = Number(r[2]), t.a = Number(r[1])) : (t.position = Number(r[1]), t.a = Number(r[2])));
      }, Tn.f = function (t, e, i, n) { for (var r = Tn.b(e), s = 0; s < r.length; s++) { const a = r[s].getAttribute(n); if (a) return a; } return r = Tn.h, (t = r(e, 'style', i) || r(t, 'style', i)) ? t.getAttribute(n) : null; }, Tn.h = function (t, e, i) { if (!t || i.length < 1) return null; let n = null; if (t = Tn.oa(t, e)) for (e = 0; e < i.length; e++) if (i[e].getAttribute('xml:id') == t) { n = i[e]; break; } return n; }, Tn.oa = function (t, e) { for (var i = null; t && !(i = t.getAttribute(e));) { const n = t.parentNode; if (!(n instanceof Element)) break; t = n; } return i; }, Tn.a = function (t, e) { let i = null; return Tn.l.test(t) ? i = Tn.pa(e, t) : Tn.s.test(t) ? i = Tn.g(Tn.s, t) : Tn.m.test(t) ? i = Tn.g(Tn.m, t) : Tn.v.test(t) ? i = Tn.Aa(e, t) : Tn.A.test(t) ? i = Tn.Ba(e, t) : Tn.w.test(t) && (i = Tn.g(Tn.w, t)), i; }, Tn.Aa = function (t, e) { const i = Tn.v.exec(e); return Number(i[1]) / t.a; }, Tn.Ba = function (t, e) { const i = Tn.A.exec(e); return Number(i[1]) / t.b; }, Tn.pa = function (t, e) {
        var i = Tn.l.exec(e),
          n = Number(i[1]),
          r = Number(i[2]),
          s = Number(i[3]),
          a = Number(i[4]),
          a = a + (Number(i[5]) || 0) / t.c,
          s = s + a / t.a; return s + 60 * r + 3600 * n;
      }, Tn.g = function (t, e) {
        const i = t.exec(e);
        return i && i[0] != '' ? (Number(i[4]) || 0) / 1e3 + (Number(i[3]) || 0) + 60 * (Number(i[2]) || 0) + 3600 * (Number(i[1]) || 0) : null;
      }, zr['application/ttml+xml'] = Tn, kn.J = 1937010800, zr['application/mp4; codecs="stpp"'] = kn, In.c = function (t, e) {
        if (t.length == 1 && !t[0] || /^NOTE($|[ \t])/.test(t[0])) return null; let i = null; t[0].indexOf('-->') < 0 && (i = t[0], t.splice(0, 1)); let n = new En(t[0]),
          r = In.a(n),
          s = Sn(n, /[ \t]+--\x3e[ \t]+/g),
          a = In.a(n); if (r == null || !s || a == null) throw new E(2, 2001); if (r = Tt(r + e, a + e, t.slice(1).join('\n').trim()), !r) return null; for (Sn(n, /[ \t]+/gm), s = _n(n); s;) { if (!In.i(r, s)) throw new E(2, 2002); Sn(n, /[ \t]+/gm), s = _n(n); } return i != null && (r.id = i), r;
      }, In.i = function (t, e) { let i; if (i = /^align:(start|middle|end|left|right)$/.exec(e))t.align = i[1]; else if (i = /^vertical:(lr|rl)$/.exec(e))t.c = i[1]; else if (i = /^size:(\d{1,2}|100)%$/.exec(e))t.size = Number(i[1]); else if (i = /^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))t.position = Number(i[1]), i[2] && (t.g = i[2]); else if (i = /^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(e))t.f = !1, t.a = Number(i[1]), i[2] && (t.b = i[2]); else { if (!(i = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))) return !1; t.f = !0, t.a = Number(i[1]), i[2] && (t.b = i[2]); } return !0; }, In.a = function (t) {
        if (t = Sn(t, /(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})/g), !t) return null; let e = Number(t[2]),
          i = Number(t[3]); return e > 59 || i > 59 ? null : Number(t[4]) / 1e3 + i + 60 * e + 3600 * (Number(t[1]) || 0);
      }, zr['text/vtt'] = In, zr['text/vtt; codecs="vtt"'] = In, xn.qa = function (t, e, i, n) { for (t = new Pi(new DataView(t)), i += e, n += e, e = []; Ci(t);) { let r = Bi(xn.X, t); if (r == -1) break; (r = xn.c(Oi(t, r - 8).buffer, i, n)) && e.push(r); } return e; }, xn.c = function (t, e, i) {
        t = new Pi(new DataView(t)); for (var n, r, s; Ci(t);) {
          let a = Ri(t),
            o = Ri(t),
            h = H(Oi(t, a - 8).buffer); switch (a == 1 && Di(t), o) { case xn.G:n = h; break; case xn.C:s = h; break; case xn.S:r = h; }
        } if (!n) throw new E(2, 2008); if (e = Tt(e, i, n), !e) return null; if (s && (e.id = s), r) for (r = new En(r), s = _n(r); s;) { if (!In.i(e, s)) throw new E(2, 2002); Sn(r, /[ \t]+/gm), s = _n(r); } return e;
      }, xn.ma = 2004251764, xn.X = 1987343459, xn.G = 1885436268, xn.C = 1768187247, xn.S = 1937011815, zr['application/mp4; codecs="wvtt"'] = xn, Hr.data = function (e) {
        return new Promise(((i) => {
          var n = e.split(':'); if (n.length < 2 || n[0] != 'data') throw new E(1, 1004, e); if (n = n.slice(1).join(':').split(','), n.length < 2) throw new E(1, 1004, e); var r = n[0],
            n = t.decodeURIComponent(n.slice(1).join(',')),
            r = r.split(';'),
            s = null; if (r.length > 1 && (s = r[1]), s == 'base64')n = Q(n).buffer; else { if (s) throw new E(1, 1005, e); n = z(n); }i({ uri: e, data: n, headers: {} });
        }));
      }, Hr.http = An, Hr.https = An, Or = Pn.prototype, Or.init = function (e) {
        if (!t.indexedDB) return Promise.reject(new E(9, 9e3)); let i = t.indexedDB.open('shaka_offline_db', 1),
          n = new P(); return i.onupgradeneeded = function (t) { t = t.target.result; for (const i in e)t.createObjectStore(i, { keyPath: e[i] }); }, i.onsuccess = function (t) { this.a = t.target.result, n.resolve(); }.bind(this), i.onerror = Dn.bind(null, i, n), n.then(() => { const t = Object.keys(e); return Promise.all(t.map(t => Mn(this, t).then((e) => { this.b[t] = e; }))); });
      }, Or.o = function () { return Promise.all(this.c.map((t) => { try { t.transaction.abort(); } catch (e) {} return t.I.catch(I); })).then(() => { this.a && (this.a.close(), this.a = null); }); }, Or.get = function (t, e) { return Rn(this, t, 'readonly', t => t.get(e)); }, Or.forEach = function (t, e) { return Rn(this, t, 'readonly', t => t.openCursor(), (t) => { t && (e(t.value), t.continue()); }); }, Or.remove = function (t, e) { return Rn(this, t, 'readwrite', t => t.delete(e)); }; var ds = { manifest: 'key', segment: 'key' }; Ln.prototype.configure = function () {}, Ln.prototype.start = function (t) {
        const e = /^offline:([0-9]+)$/.exec(t); if (!e) return Promise.reject(new E(1, 9004, t)); let i = Number(e[1]),
          n = new Pn(); return n.init(ds).then(() => n.get('manifest', i)).then((t) => { if (!t) throw new E(9, 9003, i); return jn(t); }).then(t => n.o().then(() => t), t => n.o().then(() => { throw t; }));
      }, Ln.prototype.stop = function () { return Promise.resolve(); }, qr['application/x-offline-manifest'] = Ln, Hr.offline = function (t) {
        if (/^offline:([0-9]+)$/.exec(t)) { var e = { uri: t, data: new ArrayBuffer(0), headers: { 'content-type': 'application/x-offline-manifest' } }; return Promise.resolve(e); } if (e = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t)) {
          let i = Number(e[1]),
            n = new Pn(); return n.init(ds).then(() => n.get('segment', i)).then(e => n.o().then(() => { if (!e) throw new E(9, 9003, i); return { uri: t, data: e.data, headers: {} }; }));
        } return Promise.reject(new E(1, 9004, t));
      }, Un.prototype.o = function () { const t = this.j || Promise.resolve(); return this.b = {}, this.j = this.a = this.l = this.m = this.i = null, t; }, e('shaka.offline.Storage', Vn), Vn.support = Hn, Vn.prototype.o = function () {
        let t = this.l,
          e = this.a,
          i = this.h ? this.h.o().catch(() => {}).then(() => Promise.all(t.map(t => e.remove('segment', t)))).then(() => e.o()) : Promise.resolve(); return this.j = this.c = this.h = this.a = null, i;
      }, Vn.prototype.destroy = Vn.prototype.o, Vn.prototype.configure = function (t) { Ee(this.j, t, Gn(this), {}, ''); }, Vn.prototype.configure = Vn.prototype.configure, Vn.prototype.Sc = function (t, e, i) {
        function n(t) { s = t; } if (this.v) return Promise.reject(new E(9, 9006)); this.v = !0; var r,
          s = null; return zn(this).then(() => Jn(this), qn(this, t, n, i)).then((i) => {
          if (Jn(this), this.b = i.manifest, this.g = i.Qb, this.b.presentationTimeline.U() || this.b.presentationTimeline.ga()) throw new E(9, 9005, t); this.b.periods.forEach(this.s.bind(this)), this.f = this.a.b.manifest++, this.m = 0, i = this.b.periods.map(this.w.bind(this)); let n = this.g.b,
            s = at(this.g); if (n) { if (!s.length) throw new E(9, 9007, t); n.initData = []; } return r = { key: this.f, originalManifestUri: t, duration: this.m, size: 0, periods: i, sessionIds: s, drmInfo: n, appMetadata: e }, Fn(this.h, r);
        }).then(() => { if (Jn(this), s) throw s; return Cn(this.a, 'manifest', r); }).then(() => Wn(this)).then(() => On(r)).catch(t => Wn(this).catch(I).then(() => { throw t; }));
      }, Vn.prototype.store = Vn.prototype.Sc, Vn.prototype.remove = function (t) {
        function e(t) { t.code != 6013 && (a = t); } let i = t.offlineUri,
          n = /^offline:([0-9]+)$/.exec(i); if (!n) return Promise.reject(new E(9, 9004, i)); var r,
          s,
          a = null,
          o = Number(n[1]); return zn(this).then(() => Jn(this), this.a.get('manifest', o)).then((t) => { if (Jn(this), !t) throw new E(9, 9003, i); return r = t, t = jn(r), s = new it(this.c.h, e, (() => {})), s.configure(this.c.getConfiguration().drm), s.init(t, !0); }).then(() => rt(s, r.sessionIds)).then(() => s.o()).then(() => {
          if (Jn(this), a) throw a; let e = r.periods.map(t => t.streams.map((t) => { const e = t.segments.map(t => Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.uri)[1])); return t.initSegmentUri && e.push(Number(/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.initSegmentUri)[1])), e; }).reduce(_, [])).reduce(_, []),
            i = 0,
            n = e.length,
            s = this.j.progressCallback; return Nn(this.a, r => r = e.indexOf(r.key), r >= 0 && (s(t, i / n), i++), r >= 0);
        }).then(() => Jn(this), this.j.progressCallback(t, 1), this.a.remove('manifest', o));
      }, Vn.prototype.remove = Vn.prototype.remove, Vn.prototype.list = function () { const t = []; return zn(this).then(() => Jn(this), this.a.forEach('manifest', (e) => { t.push(On(e)); })).then(() => t); }, Vn.prototype.list = Vn.prototype.list, Vn.prototype.A = function (t) {
        var e = [],
          i = t.filter(t => t.type == 'video' && t.height <= 480); i.sort((t, e) => e.bandwidth - t.bandwidth), i.length && e.push(i[0]); for (var n = xe(this.c.getConfiguration().preferredAudioLanguage), i = [0, Yr, $r], r = t.filter(t => t.type == 'audio'), i = i.map(t => r.filter(e => e = xe(e.language), Ie(t, n, e))), s = r, a = 0; a < i.length; a++)i[a].length && (s = i[a]); s.sort((t, e) => t.bandwidth - e.bandwidth), s.length && e.push(s[Math.floor(s.length / 2)]); var i = xe(this.c.getConfiguration().preferredTextLanguage),
          o = Ie.bind(null, $r, i); return e.push(...t.filter((t) => { const e = xe(t.language); return t.type == 'text' && o(e); })), e;
      }, Vn.prototype.s = function (t) { function e(t, e, i) { return e = e.filter(t => t.type == i), e.length == 0 ? null : Ne(t, e[0]).stream; } let i = {}; this.i && (i = { video: e(this.b.periods[0], this.i, 'video'), audio: e(this.b.periods[0], this.i, 'audio') }), Pe(this.g, i, t), Ae(t, this.c.getConfiguration().restrictions, { width: 1 / 0, height: 1 / 0 }); }, Vn.prototype.w = function (t) {
        var e = Ce(t, null),
          e = this.j.trackSelectionCallback(e); this.i || (this.i = e, this.b.periods.forEach(this.s.bind(this))); for (let i = e.length - 1; i > 0; --i) { for (var n = !1, r = i - 1; r >= 0; --r) if (e[i].type == e[r].type && e[i].kind == e[r].kind && e[i].language == e[r].language) { n = !0; break; } if (n) break; } return e = e.map(e => e = Ne(t, e), $n(this, t, e.Tc, e.stream)), { startTime: t.startTime, streams: e };
      }, Xr.offline = Hn, e('shaka.polyfill.installAll', () => { for (let t = 0; t < fs.length; ++t)fs[t](); }); var fs = []; e('shaka.polyfill.register', Xn), Xn(() => { if (t.Document) { let e = Element.prototype; e.requestFullscreen = e.requestFullscreen || e.mozRequestFullScreen || e.msRequestFullscreen || e.webkitRequestFullscreen, e = Document.prototype, e.exitFullscreen = e.exitFullscreen || e.mozCancelFullScreen || e.msExitFullscreen || e.webkitExitFullscreen, 'fullscreenElement' in document || Object.defineProperty(document, 'fullscreenElement', { get() { return document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement; } }), document.addEventListener('webkitfullscreenchange', Qn), document.addEventListener('webkitfullscreenerror', Qn), document.addEventListener('mozfullscreenchange', Qn), document.addEventListener('mozfullscreenerror', Qn), document.addEventListener('MSFullscreenChange', Qn), document.addEventListener('MSFullscreenError', Qn); } }), er.prototype.createMediaKeys = function () { const t = new nr(this.keySystem); return Promise.resolve(t); }, er.prototype.getConfiguration = function () { return this.a; }, nr.prototype.createSession = function (t) { if ((t || 'temporary') != 'temporary') throw new TypeError(`Session type ${t} is unsupported on this platform.`); return new sr(this.a); }, nr.prototype.setServerCertificate = function () { return Promise.reject(Error('setServerCertificate not supported on this platform.')); }, i(sr), Or = sr.prototype, Or.generateRequest = function (t, e) { this.a = new P(); try { this.c = this.g.createSession('video/mp4', new Uint8Array(e), null), L(this.f, this.c, 'mskeymessage', this.hc.bind(this)), L(this.f, this.c, 'mskeyadded', this.fc.bind(this)), L(this.f, this.c, 'mskeyerror', this.gc.bind(this)), hr(this, 'status-pending'); } catch (i) { this.a.reject(i); } return this.a; }, Or.load = function () { return Promise.reject(Error('MediaKeySession.load not yet supported')); }, Or.update = function (t) { this.b = new P(); try { this.c.update(new Uint8Array(t)); } catch (e) { this.b.reject(e); } return this.b; }, Or.close = function () { try { this.c.close(), this.closed.resolve(), j(this.f); } catch (t) { this.closed.reject(t); } return this.closed; }, Or.remove = function () { return Promise.reject(Error('MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform')); }, Or.hc = function (t) { this.a && (this.a.resolve(), this.a = null), this.dispatchEvent(new Se('message', { messageType: void 0 == this.keyStatuses.Ua() ? 'licenserequest' : 'licenserenewal', message: t.message.buffer })); }, Or.fc = function () { this.a ? (hr(this, 'usable'), this.a.resolve(), this.a = null) : this.b && (hr(this, 'usable'), this.b.resolve(), this.b = null); }, Or.gc = function () { const t = Error('EME PatchedMediaKeysMs key error'); if (t.errorCode = this.c.error, this.a) this.a.reject(t), this.a = null; else if (this.b) this.b.reject(t), this.b = null; else switch (this.c.error.code) { case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:hr(this, 'output-not-allowed'); default:hr(this, 'internal-error'); } }; let ps; Or = ur.prototype, Or.cb = function (t) { this.size = void 0 == t ? 0 : 1, this.a = t; }, Or.Ua = function () { return this.a; }, Or.forEach = function (t) { this.a && t(this.a, ps); }, Or.get = function (t) { if (this.has(t)) return this.a; }, Or.has = function (t) { const e = ps; return !(!this.a || !et(new Uint8Array(t), new Uint8Array(e))); }, dr.prototype.createSession = function () {}, dr.prototype.setServerCertificate = function () {}, fr.prototype.getConfiguration = function () {}, fr.prototype.createMediaKeys = function () {}, br.prototype.createMediaKeys = function () { const t = new gr(this.a); return Promise.resolve(t); }, br.prototype.getConfiguration = function () { return this.b; }, Or = gr.prototype, Or.createSession = function (t) { let e = t || 'temporary'; if (e != 'temporary' && e != 'persistent-license') throw new TypeError(`Session type ${t} is unsupported on this platform.`); return t = this.b || document.createElement('video'), t.src || (t.src = 'about:blank'), e = new Tr(t, this.g, e), this.c.push(e), e; }, Or.setServerCertificate = function () { return Promise.reject(Error('setServerCertificate not supported on this platform.')); }, Or.pc = function (t) { this.b.dispatchEvent(new Se('encrypted', { initDataType: 'webm', initData: t.initData })); }, Or.oc = function (t) { const e = yr(this, t.sessionId); e && (t = new Se('message', { messageType: void 0 == e.keyStatuses.Ua() ? 'licenserequest' : 'licenserenewal', message: t.message }), e.b && (e.b.resolve(), e.b = null), e.dispatchEvent(t)); }, Or.mc = function (t) { (t = yr(this, t.sessionId)) && (kr(t, 'usable'), t.a && t.a.resolve(), t.a = null); }, Or.nc = function (t) { const e = yr(this, t.sessionId); if (e) { let i = Error('EME v0.1b key error'); i.errorCode = t.errorCode, i.errorCode.systemCode = t.systemCode, !t.sessionId && e.b ? (i.method = 'generateRequest', t.systemCode == 45 && (i.message = 'Unsupported session type.'), e.b.reject(i), e.b = null) : t.sessionId && e.a ? (i.method = 'update', e.a.reject(i), e.a = null) : (i = t.systemCode, t.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? kr(e, 'output-restricted') : i == 1 ? kr(e, 'expired') : kr(e, 'internal-error')); } }, i(Tr), Or = Tr.prototype, Or.fb = function (t, e) {
        if (this.a) this.a.then(this.fb.bind(this, t, e)).catch(this.fb.bind(this, t, e)); else {
          this.a = t; let i,
            n; this.c == 'webkit-org.w3.clearkey' ? (i = H(e), n = JSON.parse(i), n.keys[0].kty != 'oct' && (this.a.reject(Error('Response is not a valid JSON Web Key Set.')), this.a = null), i = Q(n.keys[0].k), n = Q(n.keys[0].kid)) : (i = new Uint8Array(e), n = null); try { this.f.webkitAddKey(this.c, i, n, this.sessionId); } catch (r) { this.a.reject(r), this.a = null; }
        }
      }, Or.generateRequest = function (t, e) { return wr(this, e, null); }, Or.load = function (t) { return this.g == 'persistent-license' ? wr(this, null, t) : Promise.reject(Error('Not a persistent session.')); }, Or.update = function (t) { const e = new P(); return this.fb(e, t), e; }, Or.close = function () { if (this.g != 'persistent-license') { if (!this.sessionId) return this.closed.reject(Error('The session is not callable.')), this.closed; this.f.webkitCancelKeyRequest(this.c, this.sessionId); } return this.closed.resolve(), this.closed; }, Or.remove = function () { return this.g != 'persistent-license' ? Promise.reject(Error('Not a persistent session.')) : this.close(); }; let ms; Or = Er.prototype, Or.cb = function (t) { this.size = void 0 == t ? 0 : 1, this.a = t; }, Or.Ua = function () { return this.a; }, Or.forEach = function (t) { this.a && t(this.a, ms); }, Or.get = function (t) { if (this.has(t)) return this.a; }, Or.has = function (t) { const e = ms; return !(!this.a || !et(new Uint8Array(t), new Uint8Array(e))); }, Xn(() => { !t.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || (HTMLMediaElement.prototype.webkitGenerateKeyRequest ? (ms = new Uint8Array([0]).buffer, navigator.requestMediaKeySystemAccess = pr, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = mr, t.MediaKeys = gr, t.MediaKeySystemAccess = br) : t.MSMediaKeys ? (ps = new Uint8Array([0]).buffer, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = ir, t.MediaKeys = nr, t.MediaKeySystemAccess = er, navigator.requestMediaKeySystemAccess = tr) : (navigator.requestMediaKeySystemAccess = cr, delete HTMLMediaElement.prototype.mediaKeys, HTMLMediaElement.prototype.mediaKeys = null, HTMLMediaElement.prototype.setMediaKeys = lr, t.MediaKeys = dr, t.MediaKeySystemAccess = fr)); }), Xn(() => {
        if (t.MediaSource) {
          let e = navigator.vendor,
            i = navigator.appVersion; if (e && i && !(e.indexOf('Apple') < 0)) if (i.indexOf('Version/8') >= 0)t.MediaSource = null; else { const n = MediaSource.prototype.addSourceBuffer; MediaSource.prototype.addSourceBuffer = function () { const t = n.apply(this, arguments); return t.abort = function () {}, t; }; }
        }
      }); var bs = 0; Sr.prototype.then = function (t, e) { const i = new Sr(); switch (this.ja) { case 1:Pr(this, i, t); break; case 2:Pr(this, i, e); break; case bs:this.c.push({ I: i, Ca: t }), this.b.push({ I: i, Ca: e }); } return i; }, Sr.prototype.then = Sr.prototype.then, Sr.prototype.catch = function (t) { return this.then(void 0, t); }, Sr.prototype.catch = Sr.prototype.catch, Sr.prototype.W = function (t) { if (this.ja == bs) { for (this.Oa = t, this.ja = 1, t = 0; t < this.c.length; ++t)Pr(this, this.c[t].I, this.c[t].Ca); this.c = [], this.b = []; } }, Sr.prototype.a = function (t) { if (this.ja == bs) { for (this.Oa = t, this.ja = 2, t = 0; t < this.b.length; ++t)Pr(this, this.b[t].I, this.b[t].Ca); this.c = [], this.b = []; } }; var gs = null,
        vs = []; Xn((e) => { t.setImmediate ? (Mr = function (e) { return t.setImmediate(e); }, Rr = function (e) { return t.clearImmediate(e); }) : (Mr = function (e) { return t.setTimeout(e, 0); }, Rr = function (e) { return t.clearTimeout(e); }), t.Promise && !e || (t.Promise = Sr, t.Promise.resolve = _r, t.Promise.reject = Ir, t.Promise.all = xr, t.Promise.race = Ar); }), Xn(() => { if (t.HTMLVideoElement) { const e = HTMLVideoElement.prototype; !e.getVideoPlaybackQuality && 'webkitDroppedFrameCount' in e && (e.getVideoPlaybackQuality = Dr); } });
    }).call(r, this), typeof t !== 'undefined' && t.exports ? t.exports = r.shaka : (n = function () { return r.shaka; }.call(e, i, e, t), !(void 0 !== n && (t.exports = n)));
  }());
} });
